(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{385:function(t,e,s){t.exports=s.p+"assets/img/concept.166bfd1a.png"},386:function(t,e,s){t.exports=s.p+"assets/img/thing_life_cycle_startup.5f9f79f7.png"},387:function(t,e,s){t.exports=s.p+"assets/img/thing_life_cycle_shutdown.537f1d19.png"},548:function(t,e,s){"use strict";s.r(e);var n=[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"developing-a-binding"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#developing-a-binding","aria-hidden":"true"}},[this._v("#")]),this._v(" Developing a Binding")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("A binding is an extension to openHAB that integrates an external system like a software service or a hardware device.\nThe external system is represented as a set of "),e("em",[this._v("Things")]),this._v(" and sometimes "),e("em",[this._v("Bridges")]),this._v(" with "),e("em",[this._v("Channels")]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(385),alt:"thing concept"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#structure-of-a-binding"}},[t._v("Structure of a Binding")])]),s("li",[s("a",{attrs:{href:"#describing-things"}},[t._v("Describing Things")])]),s("li",[s("a",{attrs:{href:"#the-thinghandlerfactory"}},[t._v("The ThingHandlerFactory")])]),s("li",[s("a",{attrs:{href:"#the-thinghandler"}},[t._v("The ThingHandler")]),s("ul",[s("li",[s("a",{attrs:{href:"#lifecycle"}},[t._v("Lifecycle")])]),s("li",[s("a",{attrs:{href:"#configuration"}},[t._v("Configuration")])]),s("li",[s("a",{attrs:{href:"#properties"}},[t._v("Properties")])]),s("li",[s("a",{attrs:{href:"#handling-commands"}},[t._v("Handling Commands")])]),s("li",[s("a",{attrs:{href:"#handling-refreshtype-command"}},[t._v("Handling RefreshType Command")])]),s("li",[s("a",{attrs:{href:"#updating-the-channel-state"}},[t._v("Updating the Channel State")])]),s("li",[s("a",{attrs:{href:"#polling-for-a-state"}},[t._v("Polling for a State")])]),s("li",[s("a",{attrs:{href:"#trigger-a-channel"}},[t._v("Trigger a channel")])]),s("li",[s("a",{attrs:{href:"#updating-the-thing-status"}},[t._v("Updating the Thing Status")])]),s("li",[s("a",{attrs:{href:"#channel-links"}},[t._v("Channel Links")])])])]),s("li",[s("a",{attrs:{href:"#updating-the-thing-from-a-binding"}},[t._v("Updating the Thing from a Binding")]),s("ul",[s("li",[s("a",{attrs:{href:"#updating-the-configuration"}},[t._v("Updating the Configuration")])]),s("li",[s("a",{attrs:{href:"#updating-thing-properties"}},[t._v("Updating Thing Properties")])]),s("li",[s("a",{attrs:{href:"#updating-the-thing-structure"}},[t._v("Updating the Thing Structure")])]),s("li",[s("a",{attrs:{href:"#handling-thing-updates"}},[t._v("Handling Thing Updates")])])])]),s("li",[s("a",{attrs:{href:"#bridges"}},[t._v("Bridges")]),s("ul",[s("li",[s("a",{attrs:{href:"#bridge-handler-implementation"}},[t._v("Bridge Handler Implementation")])]),s("li",[s("a",{attrs:{href:"#the-basebridgehandler"}},[t._v("The BaseBridgeHandler")])]),s("li",[s("a",{attrs:{href:"#life-cycle"}},[t._v("Life cycle")])]),s("li",[s("a",{attrs:{href:"#handler-initialization-notification"}},[t._v("Handler initialization notification")])])])]),s("li",[s("a",{attrs:{href:"#config-status-provider"}},[t._v("Config Status Provider")]),s("ul",[s("li",[s("a",{attrs:{href:"#providing-the-configuration-status"}},[t._v("Providing the Configuration Status")])])])]),s("li",[s("a",{attrs:{href:"#handling-thing-bridge-removal"}},[t._v("Handling Thing / Bridge Removal")])]),s("li",[s("a",{attrs:{href:"#actions-bound-to-a-thing"}},[t._v("Actions bound to a Thing")])]),s("li",[s("a",{attrs:{href:"#firmware-information-firmware-update"}},[t._v("Firmware information / Firmware update")])]),s("li",[s("a",{attrs:{href:"#implementing-a-discovery-service"}},[t._v("Implementing a Discovery Service")]),s("ul",[s("li",[s("a",{attrs:{href:"#registering-as-an-osgi-service"}},[t._v("Registering as an OSGi service")])]),s("li",[s("a",{attrs:{href:"#background-discovery"}},[t._v("Background Discovery")])]),s("li",[s("a",{attrs:{href:"#active-scan"}},[t._v("Active Scan")])]),s("li",[s("a",{attrs:{href:"#re-discovered-results-and-things"}},[t._v("Re-Discovered Results and Things")])]),s("li",[s("a",{attrs:{href:"#remove-older-results"}},[t._v("Remove older results")])]),s("li",[s("a",{attrs:{href:"#upnp-discovery"}},[t._v("UPnP Discovery")])]),s("li",[s("a",{attrs:{href:"#mdns-discovery"}},[t._v("mDNS Discovery")])]),s("li",[s("a",{attrs:{href:"#discovery-that-is-bound-to-a-thing"}},[t._v("Discovery that is bound to a Thing")])])])]),s("li",[s("a",{attrs:{href:"#frequently-asked-questions-faq"}},[t._v("Frequently asked questions / FAQ")])]),s("li",[s("a",{attrs:{href:"#include-the-binding-in-the-build"}},[t._v("Include the Binding in the Build")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"structure-of-a-binding"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#structure-of-a-binding","aria-hidden":"true"}},[this._v("#")]),this._v(" Structure of a Binding")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"describing-things"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#describing-things","aria-hidden":"true"}},[this._v("#")]),this._v(" Describing Things")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("External systems are represented as "),s("em",[t._v("Things")]),t._v(" in openHAB.\nWhen starting the implementation of a binding, you should think about the abstraction of your external system.\nDifferent services or devices should be represented as individual "),s("em",[t._v("Things")]),t._v(".\nEach functionality of the "),s("em",[t._v("Thing")]),t._v(" should be modelled as a "),s("code",[t._v("Channel")]),t._v(".")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[s("em",[t._v("Thing")]),t._v(" and "),s("em",[t._v("Channel")]),t._v(" structures need to be explained to the openHAB runtime.\nThis is done in a declarative way via XML files, so called "),s("em",[t._v("ThingTypes")]),t._v(" and "),s("em",[t._v("ChannelTypes")]),t._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"the-thinghandlerfactory"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#the-thinghandlerfactory","aria-hidden":"true"}},[this._v("#")]),this._v(" The ThingHandlerFactory")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("For each "),e("em",[this._v("Thing")]),this._v(" the binding must provide a proper "),e("code",[this._v("ThingHandler")]),this._v(" implementation that is able to handle the communication.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The "),e("code",[this._v("ThingHandlerFactory")]),this._v(" is responsible for creating "),e("code",[this._v("ThingHandler")]),this._v(" instances.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Every binding must implement a "),e("code",[this._v("ThingHandlerFactory")]),this._v(" and register it as OSGi service so that the runtime knows which class needs to be called for creating and handling things.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("When a new "),s("em",[t._v("Thing")]),t._v(" is added, the openHAB runtime queries every "),s("code",[t._v("ThingHandlerFactory")]),t._v(" for support of the "),s("em",[t._v("ThingType")]),t._v(" by calling the "),s("code",[t._v("supportsThingType")]),t._v(" method.\nWhen the method returns "),s("code",[t._v("true")]),t._v(", the runtime calls "),s("code",[t._v("createHandler")]),t._v(", which should then return a proper "),s("code",[t._v("ThingHandler")]),t._v(" implementation.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("A weather bindings "),e("code",[this._v("WeatherHandlerFactory")]),this._v(" for example supports only one "),e("em",[this._v("ThingType")]),this._v(" and instantiates a new "),e("code",[this._v("WeatherHandler")]),this._v(" for a given thing:")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@NonNullByDefault")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("configurationPid "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"binding.myweatherbinding"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" service "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThingHandlerFactory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WeatherHandlerFactory")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BaseThingHandlerFactory")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Collection")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThingTypeUID")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" SUPPORTED_THING_TYPES_UIDS "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Collections")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("singleton")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WeatherBindingConstants")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("THING_TYPE_WEATHER"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("supportsThingType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThingTypeUID")]),t._v(" thingTypeUID"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" SUPPORTED_THING_TYPES_UIDS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("contains")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("thingTypeUID"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Nullable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThingHandler")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createHandler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thing")]),t._v(" thing"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThingTypeUID")]),t._v(" thingTypeUID "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" thing"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getThingTypeUID")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WeatherBindingConstants")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("THING_TYPE_WEATHER"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("equals")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("thingTypeUID"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WeatherHandler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("thing"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Constants like the "),e("code",[this._v("THING_TYPE_WEATHER")]),this._v(" UID and also "),e("em",[this._v("Channel")]),this._v(" UIDs are typically defined inside a public "),e("code",[this._v("BindingConstants")]),this._v(" class.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Depending on your implementation, each "),e("em",[this._v("ThingType")]),this._v(" may use its own handler.\nIt is also possible to use the same handler for different "),e("em",[this._v("Things")]),this._v(", or use different handlers for the same "),e("em",[this._v("ThingType")]),this._v(", depending on the configuration.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"the-thinghandler"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#the-thinghandler","aria-hidden":"true"}},[this._v("#")]),this._v(" The ThingHandler")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("A "),e("code",[this._v("ThingHandler")]),this._v(" handles the communication between openHAB and an entity from the real world, e.g. a physical device, a web service, represented by a "),e("code",[this._v("Thing")]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("openHAB provides an abstract base class named "),e("code",[this._v("BaseThingHandler")]),this._v(".\nIt is recommended to use this class, because it covers a lot of common logic.\nMost of the explanations are based on the assumption, that the binding inherits from the BaseThingHandler in all concrete "),e("code",[this._v("ThingHandler")]),this._v(" implementations.\nNevertheless if there are reasons why you can not use the base class, the binding can also directly implement the "),e("code",[this._v("ThingHandler")]),this._v(" interface.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("If the framework wants the binding to do something or just notfiy it about changes,\nit calls methods like "),e("code",[this._v("handleCommand")]),this._v(", "),e("code",[this._v("handleUpdate")]),this._v(" or "),e("code",[this._v("thingUpdated")]),this._v(".")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("If the ThingHandler wants to inform the framework about changes, it uses a callback\nThe "),s("code",[t._v("BaseThingHandler")]),t._v(" provides convience methods like "),s("code",[t._v("updateState")]),t._v(", "),s("code",[t._v("updateStatus")]),t._v(" "),s("code",[t._v("updateThing")]),t._v(" or "),s("code",[t._v("triggerChannel")]),t._v(", that can be used to inform the framework about changes.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-java extra-class"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[this._v("TODO\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"lifecycle"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#lifecycle","aria-hidden":"true"}},[this._v("#")]),this._v(" Lifecycle")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("The "),s("code",[t._v("ThingHandler")]),t._v(" has two important lifecycle methods: "),s("code",[t._v("initialize")]),t._v(" and "),s("code",[t._v("dispose")]),t._v(".\nThe "),s("code",[t._v("initialize")]),t._v(" method is called when the handler is started and "),s("code",[t._v("dispose")]),t._v(" just before the handler is stopped.\nTherefore these methods can be used to allocate and deallocate resources.\nFor an example, our exemplary Weather binding starts and stops a scheduled job to update weather information within these methods.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"startup"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#startup","aria-hidden":"true"}},[this._v("#")]),this._v(" Startup")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ol",[s("li",[s("p",[t._v("Handler is registered: "),s("code",[t._v("ThingHandler")]),t._v(" instance is created by a "),s("code",[t._v("ThingHandlerFactory")]),t._v(" and tracked by the framework.\nIn addition, the handler can be registered as a service if required, e.g. as "),s("code",[t._v("FirmwareUpdateHandler")]),t._v(" or "),s("code",[t._v("ConfigStatusProvider")]),t._v(".")])]),t._v(" "),s("li",[s("p",[t._v("Handler is initialized: "),s("code",[t._v("ThingHandler.initialize()")]),t._v(" is called by the framework in order to initialize the handler.\nThis method is only called if all 'required' configuration parameters of the Thing are present.\nThe handler is ready to work (methods like "),s("code",[t._v("handleCommand")]),t._v(", "),s("code",[t._v("handleUpdate")]),t._v(" or "),s("code",[t._v("thingUpdated")]),t._v(" can be called).")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The diagram below illustrates the startup of a handler in more detail.\nThe life cycle is controlled by the "),e("code",[this._v("ThingManager")]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(386),alt:"thing_life_cycle_startup"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("The "),s("code",[t._v("ThingManager")]),t._v(" mediates the communication between a "),s("code",[t._v("Thing")]),t._v(" and a "),s("code",[t._v("ThingHandler")]),t._v(" from the binding.\nThe "),s("code",[t._v("ThingManager")]),t._v(" creates for each Thing a "),s("code",[t._v("ThingHandler")]),t._v(" instance using a "),s("code",[t._v("ThingHandlerFactory")]),t._v(".\nTherefore, it tracks all "),s("code",[t._v("ThingHandlerFactory")]),t._v("s from the binding.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("If the "),s("code",[t._v("Thing")]),t._v(" is not initializable the configuration can be updated via "),s("code",[t._v("ThingHandler.handleConfigurationUpdate(Map)")]),t._v(".\nThe binding has to notify the "),s("code",[t._v("ThingManager")]),t._v(" about the updated configuration by a callback.\nThe "),s("code",[t._v("ThingManager")]),t._v(" tries to initialize the "),s("code",[t._v("ThingHandler")]),t._v(" resp. "),s("code",[t._v("Thing")]),t._v(" again.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("After the handler is initialized, the handler must be ready to handle methods calls like "),e("code",[this._v("handleCommand")]),this._v(" and "),e("code",[this._v("handleUpdate")]),this._v(", as well as "),e("code",[this._v("thingUpdated")]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"shutdown"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#shutdown","aria-hidden":"true"}},[this._v("#")]),this._v(" Shutdown")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ol",[s("li",[s("p",[t._v("Handler is unregistered: "),s("code",[t._v("ThingHandler")]),t._v(" instance is no longer tracked by the framework.\nThe "),s("code",[t._v("ThingHandlerFactory")]),t._v(" can unregister handler services (e.g. "),s("code",[t._v("FirmwareUpdateHandler")]),t._v(" or "),s("code",[t._v("ConfigStatusProvider")]),t._v(") if registered, or release resources.")])]),t._v(" "),s("li",[s("p",[t._v("Handler is disposed: "),s("code",[t._v("ThingHandler.disposed()")]),t._v(" method is called.\nThe framework expects "),s("code",[t._v("dispose()")]),t._v(" to be non-blocking and to return quickly.\nFor longer running disposals, the implementation has to take care of scheduling a separate job.")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(387),alt:"thing_life_cycle_shutdown"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"bridge-status-changes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#bridge-status-changes","aria-hidden":"true"}},[this._v("#")]),this._v(" Bridge Status Changes")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("A "),s("code",[t._v("ThingHandler")]),t._v(" is notified about Bridge status changes to "),s("em",[t._v("ONLINE")]),t._v(" and "),s("em",[t._v("OFFLINE")]),t._v(" after a "),s("code",[t._v("BridgeHandler")]),t._v(" has been initialized.\nTherefore, the method "),s("code",[t._v("ThingHandler.bridgeStatusChanged(ThingStatusInfo)")]),t._v(" must be implemented\n(this method is not called for a bridge status updated through the bridge initialization itself).\nIf the Thing of this handler does not have a Bridge, this method is never called.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("If the bridge status has changed to OFFLINE, the status of the handled thing must also be updated to "),s("em",[t._v("OFFLINE")]),t._v(" with detail "),s("em",[t._v("BRIDGE_OFFLINE")]),t._v(".\nIf the bridge returns to "),s("em",[t._v("ONLINE")]),t._v(", the thing status must be changed at least to "),s("em",[t._v("OFFLINE")]),t._v(" with detail "),s("em",[t._v("NONE")]),t._v(" or to another thing specific status.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"configuration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Configuration")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[s("em",[t._v("Things")]),t._v(" can be configured with parameters.\nTo retrieve the configuration of a "),s("em",[t._v("Thing")]),t._v(" one can call "),s("code",[t._v("getThing().getConfiguration()")]),t._v(" inside the "),s("code",[t._v("ThingHandler")]),t._v(".\nThe configuration class has the equivalent methods as the "),s("code",[t._v("Map")]),t._v(" interface, thus the method "),s("code",[t._v("get(String key)")]),t._v(" can be used to retrieve a value for a given key.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Moreover the configuration class has a utility method "),e("code",[this._v("as(Class<T> configurationClass)")]),this._v(" that transforms the configuration into a Java object of the given type.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("All configuration values will be mapped to properties of the class.\nThe type of the property must match the type of the configuration.\nOnly the following types are supported for configuration values: "),e("code",[this._v("Boolean")]),this._v(", "),e("code",[this._v("String")]),this._v(" and "),e("code",[this._v("BigDecimal")]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"properties"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#properties","aria-hidden":"true"}},[this._v("#")]),this._v(" Properties")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"handling-commands"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#handling-commands","aria-hidden":"true"}},[this._v("#")]),this._v(" Handling Commands")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("For handling commands the "),s("code",[t._v("ThingHandler")]),t._v(" interface defines the "),s("code",[t._v("handleCommand")]),t._v(" method.\nThis method is called when a command is sent to an item, which is linked to a channel of the "),s("em",[t._v("Thing")]),t._v(".\nA Command represents the intention that an action should be executed on the external system,\nor that the state should be changed.\nInside the "),s("code",[t._v("handleCommand")]),t._v(" method binding specific logic can be executed.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("handle different command types depending on the item types, that are defined by the channels,")]),this._v(" "),e("li",[this._v("be called at the same time from different threads.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The following code block shows a typical implementation of the "),e("code",[this._v("handleCommand")]),this._v(" method:")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleCommand")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ChannelUID")]),t._v(" channelUID"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Command")]),t._v(" command"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("switch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("channelUID"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t    \t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" CHANNEL_TEMPERATURE"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n\t        \t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("command "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OnOffType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t        \t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// binding specific logic goes here")]),t._v("\n\t        \t\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SwitchState")]),t._v(" deviceSwitchState "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("convert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OnOffType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" command"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t        \t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateDeviceState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("deviceSwitchState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t        \t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t        \t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t    \t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n    \t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("statusUpdated")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThingStatus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ONLINE"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DeviceCommunicationException")]),t._v(" ex"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// catch exceptions and handle it in your binding")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("statusUpdated")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThingStatus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("OFFLINE"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThingStatusDetail")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("COMMUNICATION_ERROR"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ex"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMessage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"handling-refreshtype-command"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#handling-refreshtype-command","aria-hidden":"true"}},[this._v("#")]),this._v(" Handling RefreshType Command")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("If the framework requires the value of a channel, for example after bootup or because\na user-interface requested a refreshed value, if will send a "),e("code",[this._v("RefreshType")]),this._v(" command.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleCommand")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ChannelUID")]),t._v(" channelUID"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Command")]),t._v(" command"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("command "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RefreshType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        \n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateWeatherData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("switch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("channelUID"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" CHANNEL_TEMPERATURE"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("channelUID"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTemperature")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" CHANNEL_HUMIDITY"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("In this example, when a "),s("code",[t._v("RefreshType")]),t._v(" command is sent to the "),s("code",[t._v("ThingHandler")]),t._v(" it updates the weather data by executing an HTTP call in the "),s("code",[t._v("updateWeatherData")]),t._v(" method and sends a state update via the "),s("code",[t._v("updateState")]),t._v(" method.\nThis will update the state of the Item, which is linked to the channel for the given channel UID.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"updating-the-channel-state"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#updating-the-channel-state","aria-hidden":"true"}},[this._v("#")]),this._v(" Updating the Channel State")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("State updates are sent from the binding to inform the framework, that the state of a channel has been updated.\nFor this the binding developer can call a method from the "),e("code",[this._v("BaseThingHandler")]),this._v(" class like this:")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"channelId"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OnOffType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ON"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"polling-for-a-state"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#polling-for-a-state","aria-hidden":"true"}},[this._v("#")]),this._v(" Polling for a State")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("If no event mechanism is available, the binding can poll for the state.\nThe "),e("code",[this._v("BaseThingHandlerFactory")]),this._v(" has an accessible "),e("code",[this._v("ScheduledExecutorService")]),this._v(", which can be used to schedule a job.\nThe following code block shows how to start a polling job in the initialize method of a "),e("code",[this._v("ThingHandler")]),this._v(", which runs with an interval of 30 seconds:")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initialize")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Runnable")]),t._v(" runnable "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Runnable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// execute some binding specific polling code")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    pollingJob "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" scheduler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("scheduleAtFixedDelay")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("runnable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TimeUnit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("SECONDS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispose")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    pollingJob"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cancel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"trigger-a-channel"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#trigger-a-channel","aria-hidden":"true"}},[this._v("#")]),this._v(" Trigger a channel")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-java extra-class"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[this._v("triggerChannel")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[this._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[this._v('"channelId"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[this._v(")")]),this._v("\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("triggerChannel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"channelId"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"PRESSED"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"updating-the-thing-status"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#updating-the-thing-status","aria-hidden":"true"}},[this._v("#")]),this._v(" Updating the Thing Status")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateStatus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThingStatus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("OFFLINE"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThingStatusDetail")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("OFFLINE"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("COMMUNICATION_ERROR"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateStatus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThingStatus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("OFFLINE"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThingStatusDetail")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("OFFLINE"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("COMMUNICATION_ERROR"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"HTTP 403 - Access denied"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("After the thing is created, the framework calls the "),s("code",[t._v("initialize")]),t._v(" method of the handler.\nAt this time the state of the thing is "),s("em",[t._v("INTIALIZING")]),t._v(" as long as the binding sets it to something else.\nBecause of this the default implementation of the "),s("code",[t._v("initialize()")]),t._v(" method in the "),s("code",[t._v("BaseThingHandler")]),t._v(" just changes the status to "),s("em",[t._v("ONLINE")]),t._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("em",[this._v("Note:")]),this._v(" A binding should not set any other state than ONLINE, OFFLINE and UNKNOWN.\nAdditionally, REMOVED must be set after "),e("code",[this._v("handleRemoval()")]),this._v(" has completed the removal process.\nAll other states are managed by the framework.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('&#64;text/rate_limit ["60", "10", "@text/hour"]\n')])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("rate_limit=Device is blocked by remote service for {0} minutes.\nMaximum limit of {1} configuration changes per {2} has been exceeded.\nFor further info please refer to device vendor.\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"channel-links"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#channel-links","aria-hidden":"true"}},[this._v("#")]),this._v(" Channel Links")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Some bindings might want to start specific functionality for a channel only if an item is linked to the channel.\nThe "),e("code",[this._v("ThingHandler")]),this._v(" has two callback methods "),e("code",[this._v("channelLinked(ChannelUID channelUID)")]),this._v(" and "),e("code",[this._v("channelUnlinked(ChannelUID channelUID)")]),this._v(", which are called for every link that is added or removed to/from a channel.\nSo please be aware of the fact that both methods can be called multiple times.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The "),e("code",[this._v("channelLinked")]),this._v(" method is only called, if the thing handler has been initialized (status ONLINE/OFFLINE/UNKNOWN).\nTo actively check if a channel is linked, you can use the "),e("code",[this._v("isChannelLinked(ChannelUID channelUID)")]),this._v(" method of the "),e("code",[this._v("ThingHandlerCallback")]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"updating-the-thing-from-a-binding"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#updating-the-thing-from-a-binding","aria-hidden":"true"}},[this._v("#")]),this._v(" Updating the Thing from a Binding")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("It can happen that the binding wants to update the configuration or even the whole structure of a thing.\nIf the "),e("code",[this._v("BaseThingHandler")]),this._v(" class is used, it provides some helper methods for modifying the thing.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"updating-the-configuration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#updating-the-configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Updating the Configuration")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("If the configuration should be updated, then the binding developer can retrieve a copy of the current configuration by calling "),e("code",[this._v("editConfiguration()")]),this._v(".\nThe updated configuration can be stored as a whole by calling "),e("code",[this._v("updateConfiguration(Configuration)")]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Suppose that an external system causes an update of the configuration, which is read in as a "),e("code",[this._v("DeviceConfig")]),this._v(" instance.\nThe following code shows how to update configuration:")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("deviceConfigurationChanged")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DeviceConfig")]),t._v(" deviceConfig"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Configuration")]),t._v(" configuration "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("editConfiguration")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    configuration"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"parameter1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deviceConfig"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getValue1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    configuration"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"parameter2"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deviceConfig"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getValue2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateConfiguration")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("configuration"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"updating-thing-properties"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#updating-thing-properties","aria-hidden":"true"}},[this._v("#")]),this._v(" Updating Thing Properties")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("devicePropertiesChanged")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DeviceInfo")]),t._v(" deviceInfo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" properties "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("editProperties")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    properties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thing")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PROPERTY_SERIAL_NUMBER"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deviceInfo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSerialNumber")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    properties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thing")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PROPERTY_FIRMWARE_VERSION"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deviceInfo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getFirmwareVersion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateProperties")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("properties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("If only one property must be changed, there is also a convenient method "),e("code",[this._v("updateProperty(String name, String value)")]),this._v(".\nBoth methods will only inform the framework that the thing was modified, if at least one property was added, removed or updated.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"updating-the-thing-structure"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#updating-the-thing-structure","aria-hidden":"true"}},[this._v("#")]),this._v(" Updating the Thing Structure")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("thingStructureChanged")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThingBuilder")]),t._v(" thingBuilder "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("editThing")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Channel")]),t._v(" channel "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ChannelBuilder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ChannelUID")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bindingId:type:thingId:1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"String"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    thingBuilder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("withChannel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("channel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateThing")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("thingBuilder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"handling-thing-updates"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#handling-thing-updates","aria-hidden":"true"}},[this._v("#")]),this._v(" Handling Thing Updates")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("If the structure of a thing has been changed during runtime (after the thing was created), the binding is informed about this change in the ThingHandler within the "),e("code",[this._v("thingUpdated")]),this._v(" method.\nThe "),e("code",[this._v("BaseThingHandler")]),this._v(" has a default implementation for this method:")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("thingUpdated")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thing")]),t._v(" thing"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispose")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("thing "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" thing"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initialize")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("For configuration updates, which are triggered from the binding, like in the previous three section,\nthe framework does not call the "),e("code",[this._v("thingUpdated")]),this._v(" method to avoid infinite loops.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"bridges"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#bridges","aria-hidden":"true"}},[this._v("#")]),this._v(" Bridges")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("In the domain of an IoT system there are often hierarchical structures of devices and services.\nFor example, one device acts as a gateway that enables communication with other devices that use the same protocol.\nIn openHAB this kind of device or service is called "),s("em",[t._v("Bridge")]),t._v(".\nPhilips Hue is one example of a system that requires a bridge.\nThe Hue gateway is an IP device with an HTTP API, which communicates over the ZigBee protocol with the Hue bulbs.\nIn the openHAB model the Hue gateway is represented as a "),s("em",[t._v("Bridge")]),t._v(" with connected "),s("em",[t._v("Things")]),t._v(", that represent the Hue bulbs.\n"),s("em",[t._v("Bridge")]),t._v(" inherits from "),s("em",[t._v("Thing")]),t._v(", so that it also has "),s("em",[t._v("Channels")]),t._v(" and all other features of a thing, with the addition that it also holds a list of things.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("When implementing a binding with "),s("em",[t._v("Bridges")]),t._v(", the logic to communicate with the external system is often shared between the different "),s("code",[t._v("ThingHandler")]),t._v(" implementations.\nIn that case it makes sense to implement a handler for the "),s("em",[t._v("Bridge")]),t._v(" and delegate the actual command execution from the "),s("em",[t._v("ThingHandler")]),t._v(" to the "),s("em",[t._v("BridgeHandler")]),t._v(".\nTo access the "),s("em",[t._v("BridgeHandler")]),t._v(" from the "),s("em",[t._v("ThingHandler")]),t._v(", call "),s("code",[t._v("getBridge().getHandler()")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The following excerpt shows how the "),e("code",[this._v("HueLightHandler")]),this._v(" delegates the command for changing the light state to the "),e("code",[this._v("HueBridgeHandler")]),this._v(":")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleCommand")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ChannelUID")]),t._v(" channelUID"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Command")]),t._v(" command"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HueBridgeHandler")]),t._v(" hueBridgeHandler "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HueBridgeHandler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBridge")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getHandler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("switch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("channelUID"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" CHANNEL_ID_COLOR_TEMPERATURE"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StateUpdate")]),t._v(" lightState "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" lightStateConverter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toColorLightState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("command"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    \n            hueBridgeHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateLightState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLight")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" lightState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    \n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" CHANNEL_ID_COLOR"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" \n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Inside the "),e("code",[this._v("BridgeHandler")]),this._v(" the list of "),e("em",[this._v("Things")]),this._v(" can be retrieved via the "),e("code",[this._v("getThings()")]),this._v(" call.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"bridge-handler-implementation"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#bridge-handler-implementation","aria-hidden":"true"}},[this._v("#")]),this._v(" Bridge Handler Implementation")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("A "),e("code",[this._v("BridgeHandler")]),this._v(" handles the communication between the openHAB framework and a "),e("em",[this._v("bridge")]),this._v("  (a device that acts as a gateway to enable the communication with other devices) represented by a "),e("code",[this._v("Bridge")]),this._v(" instance.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("A bridge handler has the same properties as thing handler.\nTherefore, the "),e("code",[this._v("BridgeHandler")]),this._v(" interface extends the "),e("code",[this._v("ThingHandler")]),this._v(" interface.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"the-basebridgehandler"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#the-basebridgehandler","aria-hidden":"true"}},[this._v("#")]),this._v(" The BaseBridgeHandler")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("openHAB provides an abstract implementation of the "),e("code",[this._v("BridgeHandler")]),this._v(" interface named "),e("code",[this._v("BaseBridgeHandler")]),this._v(".\nIt is recommended to use this class, because it covers a lot of common logic.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"life-cycle"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#life-cycle","aria-hidden":"true"}},[this._v("#")]),this._v(" Life cycle")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[t._v("A "),s("code",[t._v("BridgeHandler")]),t._v(" of a bridge is initialized before "),s("code",[t._v("ThingHandler")]),t._v("s of its child things are initialized.")]),t._v(" "),s("li",[t._v("A "),s("code",[t._v("BridgeHandler")]),t._v(" is disposed after all "),s("code",[t._v("ThingHandler")]),t._v("s of its child things are disposed.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"handler-initialization-notification"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#handler-initialization-notification","aria-hidden":"true"}},[this._v("#")]),this._v(" Handler initialization notification")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("A "),s("code",[t._v("BridgeHandler")]),t._v(" is notified about the initialization and disposal of child things.\nTherefore, the "),s("code",[t._v("BridgeHandler")]),t._v(" interface provides the two methods "),s("code",[t._v("childHandlerInitialized(ThingHandler, Thing)")]),t._v(" and "),s("code",[t._v("childHandlerDisposed(ThingHandler, Thing)")]),t._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"config-status-provider"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#config-status-provider","aria-hidden":"true"}},[this._v("#")]),this._v(" Config Status Provider")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("For this purpose the handler of the entity implements the interface "),e("code",[this._v("org.eclipse.smarthome.config.core.status.ConfigStatusProvider")]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"providing-the-configuration-status"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#providing-the-configuration-status","aria-hidden":"true"}},[this._v("#")]),this._v(" Providing the Configuration Status")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("A "),e("em",[this._v("ThingHandler")]),this._v(" as handler for the thing entity can provide the configuration status of the thing by implementing the "),e("code",[this._v("org.eclipse.smarthome.config.core.status.ConfigStatusProvider")]),this._v(" interface.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("For things that are created by sub-classes of the "),e("code",[this._v("BaseThingHandlerFactory")]),this._v(" the provider is already automatically registered as an OSGi service if the concrete thing handler implements the configuration status provider interface.\nCurrently the framework provides two base thing handler implementations for the configuration status provider interface:")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[s("code",[t._v("org.eclipse.smarthome.core.thing.binding.ConfigStatusThingHandler")]),t._v(" extends the "),s("code",[t._v("BaseThingHandler")]),t._v(" and is to be used if the configuration status is to be provided for thing entities")]),t._v(" "),s("li",[s("code",[t._v("org.eclipse.smarthome.core.thing.binding.ConfigStatusBridgeHandler")]),t._v(" extends the "),s("code",[t._v("BaseBridgeHandler")]),t._v(" and is to be used if the configuration status is to be provided for bridge entities")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Sub-classes of these handlers must only override the operation "),e("code",[this._v("getConfigStatus")]),this._v(" to provide the configuration status in form of a collection of "),e("code",[this._v("org.eclipse.smarthome.config.core.status.ConfigStatusMessage")]),this._v("s.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"internationalizing"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#internationalizing","aria-hidden":"true"}},[this._v("#")]),this._v(" Internationalizing")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("For this purpose there must be an i18n properties file inside the bundle of the configuration status provider that has a message declared for the message key of the "),e("code",[this._v("ConfigStatusMessage")]),this._v(".\nThe actual message key is built by the operation "),e("code",[this._v("withMessageKeySuffix(String)")]),this._v(" of the messages builder in the manner that the given message key suffix is appended to "),e("em",[this._v('config-status."config-status-message-type."')]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("config-status.information.any-suffix")]),this._v(" "),e("li",[this._v("config-status.warning.any-suffix")]),this._v(" "),e("li",[this._v("config-status.error.any-suffix")]),this._v(" "),e("li",[this._v("config-status.pending.any-suffix")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"handling-thing-bridge-removal"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#handling-thing-bridge-removal","aria-hidden":"true"}},[this._v("#")]),this._v(" Handling Thing / Bridge Removal")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("If a thing should be removed, the framework informs the binding about the removal request by calling "),e("code",[this._v("handleRemoval")]),this._v(" at the thing/bridge handler.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The thing will not be removed from the runtime until the binding confirms the deletion by setting the thing status to "),e("code",[this._v("REMOVED")]),this._v(".\nIf no special removal handling is required by the binding, you do not have to care about removal because the default implementation of this method in the "),e("code",[this._v("BaseThingHandler")]),this._v(" class just calls "),e("code",[this._v("updateStatus(ThingStatus.REMOVED)")]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("However, for some radio-based devices it is needed to communicate with the device in order to unpair it safely.\nAfter the device was successfully unpaired, the binding must inform the framework that the thing was removed by setting the thing status to "),e("code",[this._v("REMOVED")]),this._v(".")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("After the removal was requested (i.e. the thing is in  "),s("code",[t._v("REMOVING")]),t._v(" state), it cannot be changed back anymore to "),s("code",[t._v("ONLINE")]),t._v("/"),s("code",[t._v("OFFLINE")]),t._v("/"),s("code",[t._v("UNKNOWN")]),t._v(" by the binding.\nThe binding may only initiate the status transition to "),s("code",[t._v("REMOVED")]),t._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"actions-bound-to-a-thing"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#actions-bound-to-a-thing","aria-hidden":"true"}},[this._v("#")]),this._v(" Actions bound to a Thing")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("Reboot / Restart device")]),this._v(" "),e("li",[this._v("Start searching for new lights for a Hue lights bridge")]),this._v(" "),e("li",[this._v("Send message (via E-Mail / SMS Gateway service / Instant Messanger)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("If you implement the "),e("code",[this._v("ThingActions")]),this._v(" interface, you can tell the framework about your Thing related actions.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("You start things off by implementing "),e("code",[this._v("ThingActions")]),this._v(" and annotate your class with "),e("code",[this._v("@ThingActionsScope")]),this._v(":")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ThingActionsScope")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mqtt"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Your bindings id is usually the scope")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@NonNullByDefault")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MQTTActions")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThingActions")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Nullable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AbstractBrokerHandler")]),t._v(" handler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setThingHandler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Nullable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThingHandler")]),t._v(" handler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" handler "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AbstractBrokerHandler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" handler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Nullable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThingHandler")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getThingHandler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" handler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The second step is to return this class in your Thing handlers "),e("code",[this._v("getServices()")]),this._v(" method:")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyThingHandler")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BaseThingHandler")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Collection")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThingHandlerService")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getServices")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Collections")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("singleton")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MQTTActions")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("As you can see in the above "),e("code",[this._v("MqttActions")]),this._v(" implementation, the framework will call you back with the "),e("code",[this._v("ThingHandler")]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("You are now free to specify as many actions as you want in "),e("code",[this._v("MqttActions")]),this._v(".")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RuleAction")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("label "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@text/actionLabel"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" description "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@text/actionDesc"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("publishMQTT")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ActionInput")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"topic"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" label "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@text/actionInputTopicLabel"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" description "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@text/actionInputTopicDesc"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Nullable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" topic"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ActionInput")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"value"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" label "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@text/actionInputValueLabel"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" description "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@text/actionInputValueDesc"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Nullable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("publishMQTT")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Nullable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThingActions")]),t._v(" actions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Nullable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" topic"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Nullable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("actions "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MQTTActions")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MQTTActions")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" actions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("publishMQTT")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("topic"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IllegalArgumentException")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Instance is not an MQTTActions class."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Each parameter of an action member method must be annotated with "),e("code",[this._v("@ActionInput")]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("If you return values, you do so by returning a "),e("code",[this._v("Map<String,Object>")]),this._v(" and annotate the method itself with as many "),e("code",[this._v("@ActionOutput")]),this._v("s as you will return map entries.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"firmware-information-firmware-update"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#firmware-information-firmware-update","aria-hidden":"true"}},[this._v("#")]),this._v(" Firmware information / Firmware update")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"implementing-a-discovery-service"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#implementing-a-discovery-service","aria-hidden":"true"}},[this._v("#")]),this._v(" Implementing a Discovery Service")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("A discovery service provides discovery results.\nThe following table gives an overview about the main parts of a "),e("code",[this._v("DiscoveryResult")]),this._v(":")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("table",[s("thead",[s("tr",[s("th",[t._v("Field")]),t._v(" "),s("th",[t._v("Description")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("thingUID")])]),t._v(" "),s("td",[t._v("The "),s("code",[t._v("thingUID")]),t._v(" is the unique identifier of the specific discovered thing (e.g. a device's serial number). It  "),s("em",[t._v("must not")]),t._v(" be constructed out of properties, that can change (e.g. IP addresses). A typical "),s("code",[t._v("thingUID")]),t._v(" could look like this: "),s("code",[t._v("hue:bridge:001788141f1a")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("thingTypeUID")])]),t._v(" "),s("td",[t._v("Contrary to the "),s("code",[t._v("thingUID")]),t._v(" is the "),s("code",[t._v("thingTypeUID")]),t._v(" that specifies the type the discovered thing belongs to. It could be constructed from e.g. a product number. A typical "),s("code",[t._v("thingTypeUID")]),t._v(" could be the following: "),s("code",[t._v("hue:bridge")]),t._v(".")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("bridgeUID")])]),t._v(" "),s("td",[t._v("If the discovered thing belongs to a bridge, the "),s("code",[t._v("bridgeUID")]),t._v(" contains the UID of that bridge.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("properties")])]),t._v(" "),s("td",[t._v("The "),s("code",[t._v("properties")]),t._v(" of a "),s("code",[t._v("DiscoveryResult")]),t._v(" contain the configuration for the newly created thing.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("label")])]),t._v(" "),s("td",[t._v("The human readable representation of the discovery result. Do not put IP/MAC addresses or similar into the label but use the special "),s("code",[t._v("representationProperty")]),t._v(" instead.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("representationProperty")])]),t._v(" "),s("td",[t._v("The name of one of the properties which discriminates the discovery result best against other results of the same type. Typically this is a serial number, IP or MAC address. The representationProperty often matches a configuration parameter and is also explicitly given in the thing-type definition.")])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("To simplify the implementation of own discovery services, an abstract base class "),s("code",[t._v("AbstractDiscoveryService")]),t._v(" implements the "),s("code",[t._v("DiscoveryService")]),t._v(", that must only be extended.\nSubclasses of "),s("code",[t._v("AbstractDiscoveryService")]),t._v(" do not need to handle the "),s("code",[t._v("DiscoveryListeners")]),t._v(" themselves, they can use the methods "),s("code",[t._v("thingDiscovered")]),t._v(" and "),s("code",[t._v("thingRemoved")]),t._v(" to notify the registered listeners.\nMost of the descriptions in this chapter refer to the "),s("code",[t._v("AbstractDiscoveryService")]),t._v(".")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("For UPnP and mDNS there already are generic discovery services available.\nBindings only need to implement a "),s("code",[t._v("UpnpDiscoveryParticipant")]),t._v(" resp. "),s("code",[t._v("mDNSDiscoveryParticipant")]),t._v(".\nFor details refer to the chapters "),s("a",{attrs:{href:"#upnp-discovery"}},[t._v("UPnP Discovery")]),t._v(" and "),s("a",{attrs:{href:"#mdns-discovery"}},[t._v("mDNS Discovery")]),t._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The following example is taken from the "),e("code",[this._v("HueLightDiscoveryService")]),this._v(", it calls "),e("code",[this._v("thingDiscovered")]),this._v(" for each found light.\nIt uses the "),e("code",[this._v("DiscoveryResultBuilder")]),this._v(" to create the discovery result.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onLightAddedInternal")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FullLight")]),t._v(" light"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThingUID")]),t._v(" thingUID "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getThingUID")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("light"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("thingUID "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThingUID")]),t._v(" bridgeUID "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" hueBridgeHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getThing")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUID")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" properties "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HashMap")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            properties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("LIGHT_ID"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" light"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DiscoveryResult")]),t._v(" discoveryResult "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DiscoveryResultBuilder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("thingUID"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("withProperties")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("properties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("withBridge")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bridgeUID"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("withLabel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("light"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("thingDiscovered")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("discoveryResult"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            logger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("debug")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"discovered unsupported light of type '{}' with id {}\"")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" light"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getModelID")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" light"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The discovery service needs to provide the list of supported thing types, that can be found by the discovery service.\nThis list will be given to the constructor of "),e("code",[this._v("AbstractDiscoveryService")]),this._v(" and can be requested by using "),e("code",[this._v("DiscoveryService#getSupportedThingTypes")]),this._v(" method.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"registering-as-an-osgi-service"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#registering-as-an-osgi-service","aria-hidden":"true"}},[this._v("#")]),this._v(" Registering as an OSGi service")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The "),e("code",[this._v("Discovery")]),this._v(" class of a binding which implements "),e("code",[this._v("AbstractDiscoveryService")]),this._v(" should be annotated with")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("service "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DiscoveryService")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" immediate "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" configurationPid "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"discovery.<bindingID>"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("where "),e("code",[this._v("<bindingID>")]),this._v(" is the id of the binding, i.e. "),e("code",[this._v("astro")]),this._v(" for the Astro binding.\nSuch a registered service will be picked up automatically by the framework.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"background-discovery"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#background-discovery","aria-hidden":"true"}},[this._v("#")]),this._v(" Background Discovery")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("If the implemented discovery service enables background discovery, the "),s("code",[t._v("AbstractDiscoveryService")]),t._v(" class automatically starts it.\nIf background discovery is enabled, the framework calls "),s("code",[t._v("AbstractDiscoveryService#startBackgroundDiscovery")]),t._v(" when the binding is activated and "),s("code",[t._v("AbstractDiscoveryService#stopBackgroundDiscovery")]),t._v(" when the component is deactivated.\nThe default implementations of both methods are empty and could be overridden by the binding developer.\nDepending on the concrete implementation the discovery service might start and stop a scheduler in these method or register a listener for an external protocol.\nThe "),s("code",[t._v("thingDiscovered")]),t._v(" method can be used to notify about a newly discovered thing.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("startBackgroundDiscovery")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        logger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("debug")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Start WeMo device background discovery"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("wemoDiscoveryJob "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" wemoDiscoveryJob"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isCancelled")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            wemoDiscoveryJob "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" scheduler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("scheduleWithFixedDelay")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("wemoDiscoveryRunnable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" refreshInterval"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TimeUnit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("SECONDS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stopBackgroundDiscovery")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        logger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("debug")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Stop WeMo device background discovery"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("wemoDiscoveryJob "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("wemoDiscoveryJob"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isCancelled")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            wemoDiscoveryJob"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cancel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            wemoDiscoveryJob "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"active-scan"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#active-scan","aria-hidden":"true"}},[this._v("#")]),this._v(" Active Scan")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("If the user triggers an active scan for a binding or specific set of thing types, the method "),e("code",[this._v("startScan")]),this._v(" of each discovery service which supports these thing type is called.\nWithin these methods the things can be discovered.\nThe abstract base class automatically starts a thread, so the implementation of this method can be long-running.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The following example implementation for "),e("code",[this._v("startScan")]),this._v(" is taken from the "),e("code",[this._v("HueLightDiscoveryService")]),this._v(", that triggers a scan for known and also for new lights of the hue bridge.\nAlready discovered things are identified by the ThingUID the DiscoveryResult was created with, and won't appear in the inbox again.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("startScan")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FullLight")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" lights "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" hueBridgeHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getFullLights")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lights "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FullLight")]),t._v(" l "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" lights"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onLightAddedInternal")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("l"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// search for unpaired lights")]),t._v("\n        hueBridgeHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("startSearch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"re-discovered-results-and-things"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#re-discovered-results-and-things","aria-hidden":"true"}},[this._v("#")]),this._v(" Re-Discovered Results and Things")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The "),e("code",[this._v("getThingUID")]),this._v(" method of the discovery service should create a consistent UID every time the same thing gets discovered.\nThis way existing discovery results and existing things with this UID will be updated with the properties from the current scan.\nWith this, dynamic discoveries (like UPnP or mDNS) can re-discover existing things and update communication properties like host names or TCP ports.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"remove-older-results"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#remove-older-results","aria-hidden":"true"}},[this._v("#")]),this._v(" Remove older results")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Normally, older discovery results already in the inbox are left untouched by a newly triggered scan.\nIf this behavior is not appropriate for the implemented discovery service, one can override the method "),e("code",[this._v("stopScan")]),this._v(" to call "),e("code",[this._v("removeOlderResults")]),this._v(" as shown in the following example from the Hue binding:")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("synchronized")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stopScan")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stopScan")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeOlderResults")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTimestampOfLastScan")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"upnp-discovery"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#upnp-discovery","aria-hidden":"true"}},[this._v("#")]),this._v(" UPnP Discovery")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("UPnP discovery is implemented in the framework as "),e("code",[this._v("UpnpDiscoveryService")]),this._v(".\nIt is widely used in bindings.\nTo facilitate the development, binding developers only need to implement a "),e("code",[this._v("UpnpDiscoveryParticipant")]),this._v(".\nHere the developer only needs to implement three simple methods:")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[s("code",[t._v("getSupportedThingTypeUIDs")]),t._v(" - Returns the list of thing type UIDs that this participant supports.\nThe discovery service uses this method of all registered discovery participants to return the list of currently supported thing type UIDs.")]),t._v(" "),s("li",[s("code",[t._v("getThingUID")]),t._v(" - Creates a thing UID out of the UPnP result or returns "),s("code",[t._v("null")]),t._v(" if this is not possible.\nThis method is called from the discovery service during result creation to provide a unique thing UID for the result.")]),t._v(" "),s("li",[s("code",[t._v("createResult")]),t._v(" - Creates the "),s("code",[t._v("DiscoveryResult")]),t._v(" out of the UPnP result.\nThis method is called from the discovery service to create the actual discovery result.\nIt uses the "),s("code",[t._v("getThingUID")]),t._v(" method to create the thing UID of the result.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The following example shows the implementation of the UPnP discovery participant for the Hue binding, the "),e("code",[this._v("HueBridgeDiscoveryParticipant")]),this._v(".")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HueBridgeDiscoveryParticipant")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UpnpDiscoveryParticipant")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Set")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThingTypeUID")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSupportedThingTypeUIDs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Collections")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("singleton")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("THING_TYPE_BRIDGE"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DiscoveryResult")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createResult")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RemoteDevice")]),t._v(" device"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThingUID")]),t._v(" uid "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getThingUID")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("device"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("uid "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" properties "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HashMap")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            properties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("HOST"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" device"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDetails")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBaseURL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getHost")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            properties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("SERIAL_NUMBER"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" device"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDetails")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSerialNumber")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DiscoveryResult")]),t._v(" result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DiscoveryResultBuilder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("uid"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("withProperties")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("properties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("withLabel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("device"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDetails")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getFriendlyName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("withRepresentationProperty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("SERIAL_NUMBER"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThingUID")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getThingUID")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RemoteDevice")]),t._v(" device"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DeviceDetails")]),t._v(" details "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" device"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDetails")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("details "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ModelDetails")]),t._v(" modelDetails "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" details"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getModelDetails")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("modelDetails "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" modelName "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" modelDetails"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getModelName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("modelName "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("modelName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("startsWith")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Philips hue bridge"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThingUID")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("THING_TYPE_BRIDGE"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" details"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSerialNumber")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"mdns-discovery"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mdns-discovery","aria-hidden":"true"}},[this._v("#")]),this._v(" mDNS Discovery")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("mDNS discovery is implemented in the framework as "),e("code",[this._v("MDNSDiscoveryService")]),this._v(".\nTo facilitate the development, binding developers only need to implement a "),e("code",[this._v("MDNSDiscoveryParticipant")]),this._v(".\nHere the developer only needs to implement four simple methods:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("code",[this._v("getSupportedThingTypeUIDs")]),this._v(" - Returns the list of thing type UIDs that this participant supports.\nThe discovery service uses this method of all registered discovery participants to return the list of currently supported thing type UIDs.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("code",[this._v("getThingUID")]),this._v(" - Creates a thing UID out of the mDNS service info or returns "),e("code",[this._v("null")]),this._v(" if this is not possible.\nThis method is called from the discovery service during result creation to provide a unique thing UID for the result.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("code",[this._v("createResult")]),this._v(" - Creates the "),e("code",[this._v("DiscoveryResult")]),this._v(" out of the mDNS result.\nThis method is called from the discovery service to create the actual discovery result.\nIt uses the "),e("code",[this._v("getThingUID")]),this._v(" method to create the thing UID of the result.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"discovery-that-is-bound-to-a-thing"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#discovery-that-is-bound-to-a-thing","aria-hidden":"true"}},[this._v("#")]),this._v(" Discovery that is bound to a Thing")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"frequently-asked-questions-faq"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#frequently-asked-questions-faq","aria-hidden":"true"}},[this._v("#")]),this._v(" Frequently asked questions / FAQ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"include-the-binding-in-the-build"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#include-the-binding-in-the-build","aria-hidden":"true"}},[this._v("#")]),this._v(" Include the Binding in the Build")])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[this._v("If you have a dependency on a transport bundle (e.g. upnp, mdns or serial) or an external library,\nmake sure to add a line for this dependency in the "),e("code",[this._v("/src/main/feature/feature.xml")]),this._v(" file in your binding folder. See the other bindings as an example.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("Please make sure you add the above entries at their alphabetically correct position!")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("mvn clean install\n")])])])}],a=s(0),r=Object(a.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),s("p",[t._v("This chapter covers everything to know about binding development.\nIt makes sense to briefly read over all sections to make you familiar with what the framework has to offer.")]),t._v(" "),t._m(2),t._v(" "),s("p",[t._v("During development you might come back with specific questions.")]),t._v(" "),s("p"),t._m(3),s("p"),t._v(" "),t._m(4),t._v(" "),s("p",[t._v("Every binding needs to define a "),s("code",[t._v("binding.xml")]),t._v(" file.\nFind more information in the respective "),s("router-link",{attrs:{to:"./binding-xml.html"}},[t._v("binding XML reference")]),t._v(".")],1),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),s("p",[t._v("Find more information in the respective "),s("router-link",{attrs:{to:"./thing-xml.html"}},[t._v("Thing & Channel XML reference")]),t._v(".")],1),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._m(15),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),t._m(19),t._v(" "),s("p",[t._v("The communication between the framework and the ThingHandler is bidirectional.")]),t._v(" "),t._m(20),t._v(" "),t._m(21),t._v(" "),s("p",[t._v("The overall structure looks like this:")]),t._v(" "),t._m(22),t._m(23),t._v(" "),t._m(24),t._v(" "),t._m(25),t._v(" "),s("p",[t._v("The startup of a handler is divided in two essential steps:")]),t._v(" "),t._m(26),t._v(" "),t._m(27),t._v(" "),t._m(28),t._v(" "),t._m(29),t._v(" "),s("p",[t._v("The "),s("code",[t._v("ThingManager")]),t._v(" determines if the "),s("code",[t._v("Thing")]),t._v(" is initializable or not.\nA "),s("code",[t._v("Thing")]),t._v(" is considered as "),s("em",[t._v("initializable")]),t._v(" if all "),s("em",[t._v("required")]),t._v(" configuration parameters (cf. property "),s("em",[t._v("parameter.required")]),t._v(" in "),s("router-link",{attrs:{to:"./config-xml.html"}},[t._v("Configuration Description")]),t._v(") are available.\nIf so, the method "),s("code",[t._v("ThingHandler.initialize()")]),t._v(" is called.")],1),t._v(" "),s("p",[t._v("Only Things with status (cf. "),s("router-link",{attrs:{to:"./../../concepts/things.html#thing-status"}},[t._v("Thing Status")]),t._v(") "),s("em",[t._v("UNKNOWN")]),t._v(", "),s("em",[t._v("ONLINE")]),t._v(" or "),s("em",[t._v("OFFLINE")]),t._v(" are considered as "),s("em",[t._v("initialized")]),t._v(" by the framework and therefore it is the handler's duty to assign one of these states sooner or later.\nTo achieve that, the status must be reported to the framework via the callback or "),s("code",[t._v("BaseThingHandler.updateStatus(...)")]),t._v(" for convenience.\nFurthermore, the framework expects "),s("code",[t._v("initialize()")]),t._v(" to be non-blocking and to return quickly.\nFor longer running initializations, the implementation has to take care of scheduling a separate job which must guarantee to set the status eventually.\nAlso, please note that the framework expects the "),s("code",[t._v("initialize()")]),t._v(" method to handle anticipated error situations gracefully and set the thing to "),s("em",[t._v("OFFLINE")]),t._v(" with the corresponding status detail (e.g. "),s("em",[t._v("COMMUNICATION_ERROR")]),t._v(" or "),s("em",[t._v("CONFIGURATION_ERROR")]),t._v(" including a meaningful description) instead of throwing exceptions.")],1),t._v(" "),t._m(30),t._v(" "),t._m(31),t._v(" "),t._m(32),t._v(" "),s("p",[t._v("The shutdown of a handler is also divided in two essential steps:")]),t._v(" "),t._m(33),t._v(" "),t._m(34),t._v(" "),s("p",[t._v("After the handler is disposed, the framework will not call the handler anymore.")]),t._v(" "),t._m(35),t._v(" "),t._m(36),t._v(" "),t._m(37),t._v(" "),t._m(38),t._v(" "),t._m(39),t._v(" "),t._m(40),t._v(" "),t._m(41),t._v(" "),s("p",[t._v("For example, the Yahoo Weather binding allows configuration of the location and the refresh frequency.")]),t._v(" "),t._m(42),t._v(" "),s("p",[s("em",[t._v("Things")]),t._v(" can have properties.\nIf you would like to add meta data to your thing, e.g. the vendor of the thing, then you can define your own thing properties by simply adding them to the thing type definition.\nThe properties section "),s("router-link",{attrs:{to:"./thing-definition.html#Properties"}},[t._v("here")]),t._v(" explains how to specify such properties.")],1),t._v(" "),s("p",[t._v("To retrieve the properties one can call the operation "),s("code",[t._v("getProperties")]),t._v(" of the corresponding "),s("code",[t._v("org.eclipse.smarthome.core.thing.type.ThingType")]),t._v(" instance.\nIf a thing will be created for this thing type then its properties will be automatically copied into the new thing instance.\nTherefore the "),s("code",[t._v("org.eclipse.smarthome.core.thing.Thing")]),t._v(" interface also provides the "),s("code",[t._v("getProperties")]),t._v(" operation to retrieve the defined properties.\nIn contrast to the "),s("code",[t._v("getProperties")]),t._v(" operation of the thing type instance the result of the things "),s("code",[t._v("getProperties")]),t._v(" operation will also contain the properties updated during runtime (cp. the thing handler "),s("router-link",{attrs:{to:"./thing-handler.html"}},[t._v("documentation")]),t._v(").")],1),t._v(" "),t._m(43),t._v(" "),t._m(44),t._v(" "),s("p",[t._v("The ThingHandler implementation must be prepared to")]),t._v(" "),t._m(45),t._v(" "),s("p",[t._v("If an exception is thrown in the method, it will be caught by the framework and logged as an error.\nSo it is better to handle communication errors within the binding and to update the thing status accordingly.")]),t._v(" "),t._m(46),t._v(" "),t._m(47),t._m(48),t._v(" "),t._m(49),t._v(" "),t._m(50),t._m(51),t._v(" "),t._m(52),t._v(" "),t._m(53),t._v(" "),t._m(54),s("p",[t._v("The call will be delegated to the framework, which changes the state of all bound items.\nIt is binding specific when the channel should be updated.\nIf the device or service supports an event mechanism the ThingHandler should make use of it and update the state every time when the device changes its state.")]),t._v(" "),t._m(55),t._v(" "),t._m(56),t._v(" "),t._m(57),s("p",[t._v("Of course, the polling job must be cancelled in the dispose method:")]),t._v(" "),t._m(58),s("p",[t._v("Even if the state has not changed since the last update, the binding should inform the framework, because it indicates that the value is still present.")]),t._v(" "),t._m(59),t._v(" "),s("p",[t._v("The binding can inform the framework, that a channel has been triggered.\nFor this the binding developer can call a method from the BaseThingHandler class like this:")]),t._v(" "),t._m(60),s("p",[t._v("If an event payload is needed, use the overloaded version:")]),t._v(" "),t._m(61),s("p",[t._v("The call will be delegated to the framework.\nIt is binding specific when the channel should be triggered.")]),t._v(" "),t._m(62),t._v(" "),s("p",[t._v("The "),s("em",[t._v("ThingHandler")]),t._v(" must also manage the thing status (see also: "),s("router-link",{attrs:{to:"./../../concepts/things.html#thing-status"}},[t._v("Thing Status Concept")]),t._v(").\nIf the device or service is not working correctly, the binding should change the status to "),s("em",[t._v("OFFLINE")]),t._v(" and back to "),s("em",[t._v("ONLINE")]),t._v(", if it is working again.\nThe status can be updated via an inherited method from the BaseThingHandler class by calling:")],1),t._v(" "),t._m(63),s("p",[t._v("The second argument of the method takes a "),s("code",[t._v("ThingStatusDetail")]),t._v(" enumeration value, which further specifies the current status situation.\nA complete list of all thing statuses and thing status details is listed in the "),s("router-link",{attrs:{to:"./../../concepts/things.html#thing-status"}},[t._v("Thing Status")]),t._v(" chapter.")],1),t._v(" "),s("p",[t._v("The binding should also provide additional status description, if available.\nThis description might contain technical information (e.g. an HTTP status code, or any other protocol specific information, which helps to identify the current problem):")]),t._v(" "),t._m(64),t._m(65),t._v(" "),t._m(66),t._v(" "),s("p",[t._v("Furthermore bindings can specify a localized description of the thing status by providing the reference of the localization string, e.g @text/rate_limit.\nThe corresponding handler is able to provide placeholder values as a JSON-serialized array of strings:")]),t._v(" "),t._m(67),t._m(68),t._m(69),t._v(" "),t._m(70),t._v(" "),t._m(71),t._v(" "),t._m(72),t._v(" "),t._m(73),t._v(" "),t._m(74),t._v(" "),s("p",[t._v("Usually the configuration is maintained by the user and the binding is informed about the updated configuration.\nBut if the configuration can also be changed in the external system, the binding should reflect this change and notify the framework about it.")]),t._v(" "),t._m(75),t._v(" "),t._m(76),t._v(" "),t._m(77),t._m(78),t._v(" "),s("p",[t._v("Thing properties can be updated in the same way as the configuration.\nThe following example shows how to modify two properties of a thing:")]),t._v(" "),t._m(79),t._m(80),t._v(" "),s("p",[t._v("Thing handler implementations must not rely on properties to be persisted as not all providers support that.")]),t._v(" "),t._m(81),t._v(" "),s("p",[t._v("The binding also has the possibility to change the thing structure by adding or removing channels.\nThe following code shows how to use the ThingBuilder to add one channel to the thing:")]),t._v(" "),t._m(82),t._m(83),t._v(" "),t._m(84),t._v(" "),t._m(85),s("p",[t._v("If your binding contains resource-intensive logic in your initialize method, you should think of implementing the method by yourself and figuring out what is the best way to handle the change.")]),t._v(" "),t._m(86),t._v(" "),t._m(87),t._v(" "),t._m(88),t._v(" "),s("p",[t._v("We have a FAQ, dicussing "),s("router-link",{attrs:{to:"./faq.html#structuring-things-and-thing-types"}},[t._v("Thing, Bridge and Channel modelling")]),t._v(".")],1),t._v(" "),t._m(89),t._v(" "),t._m(90),t._v(" "),t._m(91),t._m(92),t._v(" "),t._m(93),t._v(" "),t._m(94),t._v(" "),t._m(95),t._v(" "),t._m(96),t._v(" "),t._m(97),t._v(" "),t._m(98),t._v(" "),s("p",[t._v("A "),s("code",[t._v("BridgeHandler")]),t._v(" has the same life cycle than a "),s("code",[t._v("ThingHandler")]),t._v(" (created by a "),s("code",[t._v("ThingHandlerFactory")]),t._v(", well defined life cycle by handler methods "),s("code",[t._v("initialize()")]),t._v(" and "),s("code",[t._v("dispose()")]),t._v(", see chapter "),s("router-link",{attrs:{to:"./thing-handler.html#life-cycle"}},[t._v("Life Cycle")]),t._v(").\nA bridge acts as a gateway in order to provide access to other devices, the "),s("em",[t._v("child things")]),t._v(".\nHence, the life cycle of a child handler depends on the life cycle of a bridge handler.\nBridge and child handlers are subject to the following restrictions:")],1),t._v(" "),t._m(99),t._v(" "),t._m(100),t._v(" "),t._m(101),t._v(" "),s("p",[t._v("These methods can be used to allocate and deallocate resources for child things.")]),t._v(" "),t._m(102),t._v(" "),s("p",[t._v("Each entity that has a configuration can provide its current configuration status to provide further information, especially in an error case.")]),t._v(" "),s("p",[t._v("This information is available to user-interfaces to present configuration errors to the user.")]),t._v(" "),t._m(103),t._v(" "),t._m(104),t._v(" "),t._m(105),t._v(" "),t._m(106),t._v(" "),t._m(107),t._v(" "),t._m(108),t._v(" "),t._m(109),t._v(" "),s("p",[t._v("The framework will take care of internationalizing messagess.")]),t._v(" "),t._m(110),t._v(" "),s("p",[t._v("As a result depending on the type of the message the final constructed message keys are:")]),t._v(" "),t._m(111),t._v(" "),t._m(112),t._v(" "),t._m(113),t._v(" "),t._m(114),t._v(" "),t._m(115),t._v(" "),t._m(116),t._v(" "),t._m(117),t._v(" "),s("p",[t._v("Quite often the device or service you expose via openHAB Things allows certain actions to be performed.")]),t._v(" "),s("p",[t._v("Examples are:")]),t._v(" "),t._m(118),t._v(" "),t._m(119),t._v(" "),s("p",[t._v("Please note that for actions not related to Things you will instead implement an "),s("code",[t._v("ActionHandler")]),t._v(" as described in the developing "),s("router-link",{attrs:{to:"./../module-types/"}},[t._v("Module Types")]),t._v(" chapter.")],1),t._v(" "),t._m(120),t._v(" "),t._m(121),t._m(122),t._v(" "),t._m(123),t._m(124),t._v(" "),t._m(125),t._v(" "),s("p",[t._v('In the following example we provide a "publishMQTT" action.\nAn action must be annotated with '),s("code",[t._v("@RuleAction")]),t._v(", a label and a description must be provided.\nIn this case we refer to translation, see "),s("router-link",{attrs:{to:"./utils/i18n.html"}},[t._v("i18n")]),t._v(" support, instead of directly providing a string.")],1),t._v(" "),t._m(126),s("p",[t._v("Each member method also requires a static method with the same name.\nThis is to support the old DSL rules engine and make the action available there.")]),t._v(" "),t._m(127),t._v(" "),t._m(128),t._v(" "),t._m(129),t._v(" "),s("p",[t._v("TODO")]),t._v(" "),t._m(130),t._v(" "),s("p",[t._v("Bindings can implement the "),s("code",[t._v("DiscoveryService")]),t._v(" interface and register it as an OSGi service to inform the framework about devices and services, that can be added as things to the system (see also "),s("router-link",{attrs:{to:"./../../concepts/discovery.html"}},[t._v("Inbox & Discovery Concept")]),t._v(").")],1),t._v(" "),t._m(131),t._v(" "),t._m(132),t._v(" "),t._m(133),t._v(" "),t._m(134),t._v(" "),t._m(135),t._v(" "),t._m(136),t._m(137),t._v(" "),t._m(138),t._v(" "),t._m(139),t._v(" "),t._m(140),t._m(141),t._v(" "),t._m(142),t._v(" "),t._m(143),t._v(" "),s("p",[t._v("The following example shows the implementation of the above mentioned methods in the Wemo binding.")]),t._v(" "),t._m(144),t._m(145),t._v(" "),t._m(146),t._v(" "),t._m(147),t._v(" "),t._m(148),t._m(149),t._v(" "),t._m(150),t._v(" "),t._m(151),t._v(" "),t._m(152),t._v(" "),t._m(153),t._m(154),t._v(" "),t._m(155),t._v(" "),t._m(156),t._v(" "),t._m(157),t._v(" "),t._m(158),t._m(159),t._v(" "),t._m(160),t._v(" "),s("ul",[s("li",[s("code",[t._v("getServiceType")]),t._v(" - Defines the "),s("a",{attrs:{href:"http://www.dns-sd.org/ServiceTypes.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("mDNS service type"),s("OutboundLink")],1),t._v(".")]),t._v(" "),t._m(161),t._v(" "),t._m(162),t._v(" "),t._m(163)]),t._v(" "),t._m(164),t._v(" "),s("p",[t._v("TODO")]),t._v(" "),t._m(165),t._v(" "),s("p",[t._v("Various binding related questions are answered in our "),s("router-link",{attrs:{to:"./faq.html"}},[t._v("Binding development FAQ")]),t._v(".")],1),t._v(" "),t._m(166),t._v(" "),s("p",[t._v("Once you are happy with your implementation, you need to integrate it in the Maven build and add it to the official distro.")]),t._v(" "),s("ul",[s("li",[t._v("Add a new line in the "),s("a",{attrs:{href:"https://github.com/openhab/openhab2-addons/blob/master/bundles/pom.xml",target:"_blank",rel:"noopener noreferrer"}},[t._v("bundle pom.xml"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("li",[t._v("Add a new line in the "),s("a",{attrs:{href:"https://github.com/openhab/openhab2-addons/blob/master/bom/openhab-addons/pom.xml",target:"_blank",rel:"noopener noreferrer"}},[t._v("binding pom.xml"),s("OutboundLink")],1),t._v(".")]),t._v(" "),t._m(167),t._v(" "),s("li",[t._v("Add your binding to the "),s("a",{attrs:{href:"https://github.com/openhab/openhab2-addons/blob/master/CODEOWNERS",target:"_blank",rel:"noopener noreferrer"}},[t._v("CODEOWNERS"),s("OutboundLink")],1),t._v(" file so that you get notified by Github when someone adds a pull request towards your binding.")])]),t._v(" "),t._m(168),t._v(" "),s("p",[t._v("Before you create a pull request on GitHub, you should now run")]),t._v(" "),t._m(169),s("p",[t._v("from the repository root to ensure that the build works smoothly (that step takes about 30 minutes).")]),t._v(" "),s("p",[t._v("The build includes "),s("a",{attrs:{href:"https://github.com/openhab/static-code-analysis",target:"_blank",rel:"noopener noreferrer"}},[t._v("Tooling for static code analysis"),s("OutboundLink")],1),t._v(" that will validate your code against the openHAB Coding Guidelines and some additional best practices.\nPlease fix all the priority 1 issues and all issues with priority 2 and 3 that are relevant (if you have any doubt don't hesitate to ask).")]),t._v(" "),s("p",[t._v("You can always run the above command from within your bindings directory to speed the build up and fix and check reported errors.")]),t._v(" "),s("p",[t._v("Re-run the build to confirm that the checks are passing.\nIf it does, it is time to "),s("router-link",{attrs:{to:"./../contributing/contributing.html"}},[t._v("contribute your work")]),t._v("!")],1),t._v(" "),s("DocPreviousVersions"),t._v(" "),s("EditPageLink")],1)},n,!1,null,null,null);e.default=r.exports}}]);