<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Coding Guidelines | openHAB</title>
    <meta name="description" content="openHAB - a vendor and technology agnostic open source automation software for your home">
    <link rel="stylesheet" href="/v2.5/fonts/fonts.css">
  <link rel="icon" href="/v2.5/favicon.ico">
  <link rel="shortcut icon" href="/v2.5/favicon.ico">
  <link rel="apple-touch-icon" href="/v2.5/apple-icon.png">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://www.openhab.org/og-image.png">
    <meta property="og:title" content="Coding Guidelines"><meta property="og:description" content="a vendor and technology agnostic open source automation software for your home">
    <link rel="preload" href="/v2.5/assets/css/0.styles.17119d73.css" as="style"><link rel="preload" href="/v2.5/assets/js/app.6e1f6232.js" as="script"><link rel="preload" href="/v2.5/assets/js/527.205984e3.js" as="script"><link rel="preload" href="/v2.5/assets/js/32.7c8f01a5.js" as="script"><link rel="preload" href="/v2.5/assets/js/33.df59480d.js" as="script">
    <link rel="stylesheet" href="/v2.5/assets/css/0.styles.17119d73.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/v2.5/" class="home-link router-link-active"><img src="/v2.5/openhab-logo.png" alt="openHAB" class="logo"> <span class="site-name can-hide">openHAB</span></a> <div class="links" style="max-width:nullpx;"><form id="search-form" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/v2.5/blog/" class="nav-link">Blog</a></div><div class="nav-item"><a href="/v2.5/download/" class="nav-link">Download</a></div><div class="nav-item"><a href="/v2.5/docs/" class="nav-link router-link-active">Documentation</a></div><div class="nav-item"><a href="/v2.5/addons/" class="nav-link">Add-ons</a></div><div class="nav-item"><a href="/v2.5/community/" class="nav-link">Community</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">About</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Get Involved</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/v2.5/about/who-we-are.html" class="nav-link">Who We Are</a></li><li class="dropdown-subitem"><a href="/v2.5/about/contributing.html" class="nav-link">Contribute</a></li><li class="dropdown-subitem"><a href="/v2.5/about/events.html" class="nav-link">Events</a></li></ul></li><li class="dropdown-item"><h4>Support openHAB</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://openhabfoundation.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Foundation
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="/v2.5/about/donate.html" class="nav-link">Donate</a></li></ul></li><li class="dropdown-item"><h4>Resources</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/v2.5/about/showcase.html" class="nav-link">Showcase/How-tos</a></li><li class="dropdown-subitem"><a href="/v2.5/privacy.html" class="nav-link">Privacy Policy</a></li><li class="dropdown-subitem"><a href="https://www.myopenhab.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  myopenHAB
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/openhab" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/v2.5/blog/" class="nav-link">Blog</a></div><div class="nav-item"><a href="/v2.5/download/" class="nav-link">Download</a></div><div class="nav-item"><a href="/v2.5/docs/" class="nav-link router-link-active">Documentation</a></div><div class="nav-item"><a href="/v2.5/addons/" class="nav-link">Add-ons</a></div><div class="nav-item"><a href="/v2.5/community/" class="nav-link">Community</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">About</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Get Involved</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/v2.5/about/who-we-are.html" class="nav-link">Who We Are</a></li><li class="dropdown-subitem"><a href="/v2.5/about/contributing.html" class="nav-link">Contribute</a></li><li class="dropdown-subitem"><a href="/v2.5/about/events.html" class="nav-link">Events</a></li></ul></li><li class="dropdown-item"><h4>Support openHAB</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://openhabfoundation.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Foundation
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="/v2.5/about/donate.html" class="nav-link">Donate</a></li></ul></li><li class="dropdown-item"><h4>Resources</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/v2.5/about/showcase.html" class="nav-link">Showcase/How-tos</a></li><li class="dropdown-subitem"><a href="/v2.5/privacy.html" class="nav-link">Privacy Policy</a></li><li class="dropdown-subitem"><a href="https://www.myopenhab.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  myopenHAB
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/openhab" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>Welcome to openHAB</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/v2.5/docs/" class="sidebar-link">Introduction</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Concepts</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/v2.5/docs/concepts/" class="sidebar-link">Concepts Overview</a></li><li><a href="/v2.5/docs/concepts/things.html" class="sidebar-link">Things</a></li><li><a href="/v2.5/docs/concepts/items.html" class="sidebar-link">Items</a></li><li><a href="/v2.5/docs/concepts/discovery.html" class="sidebar-link">Thing Discovery</a></li><li><a href="/v2.5/docs/concepts/audio.html" class="sidebar-link">Audio &amp; Voice</a></li><li><a href="/v2.5/docs/concepts/units-of-measurement.html" class="sidebar-link">Units Of Measurement</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Installation Guide</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/v2.5/docs/installation/" class="sidebar-link">Installation Overview</a></li><li><a href="/v2.5/docs/installation/linux.html" class="sidebar-link">Linux</a></li><li><a href="/v2.5/docs/installation/windows.html" class="sidebar-link">Windows</a></li><li><a href="/v2.5/docs/installation/macos.html" class="sidebar-link">macOS</a></li><li><a href="/v2.5/docs/installation/openhabian.html" class="sidebar-link">openHABian</a></li><li><a href="/v2.5/docs/installation/rasppi.html" class="sidebar-link">Raspberry Pi</a></li><li><a href="/v2.5/docs/installation/pine.html" class="sidebar-link">PINE A64</a></li><li><a href="/v2.5/docs/installation/docker.html" class="sidebar-link">Docker</a></li><li><a href="/v2.5/docs/installation/synology.html" class="sidebar-link">Synology DiskStation</a></li><li><a href="/v2.5/docs/installation/qnap.html" class="sidebar-link">QNAP NAS</a></li><li><a href="/v2.5/docs/installation/security.html" class="sidebar-link">Security</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>New User Tutorial</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/v2.5/docs/tutorial/" class="sidebar-link">Tutorial Overview</a></li><li><a href="/v2.5/docs/tutorial/1sttimesetup.html" class="sidebar-link">First-time setup of openHAB</a></li><li><a href="/v2.5/docs/tutorial/uis.html" class="sidebar-link">openHAB UIs</a></li><li><a href="/v2.5/docs/tutorial/configuration.html" class="sidebar-link">Configuration of openHAB</a></li><li><a href="/v2.5/docs/tutorial/sitemap.html" class="sidebar-link">Creating a sitemap</a></li><li><a href="/v2.5/docs/tutorial/rules.html" class="sidebar-link">Working with rules and scripts</a></li><li><a href="/v2.5/docs/tutorial/logs.html" class="sidebar-link">Looking to the logs</a></li><li><a href="/v2.5/docs/tutorial/persistence.html" class="sidebar-link">Persistence</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Configuration Guide</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/v2.5/docs/configuration/" class="sidebar-link">Configuration Overview</a></li><li><a href="/v2.5/docs/configuration/addons.html" class="sidebar-link">Installation of Add-ons</a></li><li><a href="/v2.5/docs/configuration/things.html" class="sidebar-link">Things</a></li><li><a href="/v2.5/docs/configuration/items.html" class="sidebar-link">Items</a></li><li><a href="/v2.5/docs/configuration/sitemaps.html" class="sidebar-link">Sitemaps</a></li><li><a href="/v2.5/docs/configuration/persistence.html" class="sidebar-link">Persistence</a></li><li><a href="/v2.5/docs/configuration/rules-dsl.html" class="sidebar-link">Rules</a></li><li><a href="/v2.5/docs/configuration/transformations.html" class="sidebar-link">Transformation Services</a></li><li><a href="/v2.5/docs/configuration/actions.html" class="sidebar-link">Actions</a></li><li><a href="/v2.5/docs/configuration/iconsets/classic/" class="sidebar-link">Icons</a></li><li><a href="/v2.5/docs/configuration/jsr223.html" class="sidebar-link">JSR223 Scripting</a></li><li><a href="/v2.5/docs/configuration/services.html" class="sidebar-link">Services</a></li><li><a href="/v2.5/docs/configuration/multimedia.html" class="sidebar-link">Multimedia</a></li><li><a href="/v2.5/docs/configuration/migration/" class="sidebar-link">Migration from 1.x</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Interfaces and Ecosystem</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/v2.5/docs/configuration/packages.html" class="sidebar-link">Initial Setup - Package Selection</a></li><li><a href="/v2.5/docs/configuration/editors.html" class="sidebar-link">Editors</a></li><li><a href="/v2.5/docs/configuration/homebuilder.html" class="sidebar-link">Home Builder</a></li><li><a href="/v2.5/docs/configuration/paperui.html" class="sidebar-link">Paper UI</a></li><li><a href="/v2.5/docs/configuration/ui/habmin/" class="sidebar-link">HABmin</a></li><li><a href="/v2.5/docs/configuration/ui/habot/" class="sidebar-link">HABot</a></li><li><a href="/v2.5/docs/configuration/habpanel.html" class="sidebar-link">HABPanel</a></li><li><a href="/v2.5/docs/configuration/ui/basic/" class="sidebar-link">Basic UI</a></li><li><a href="/v2.5/docs/configuration/ui/classic/" class="sidebar-link">Classic UI</a></li><li><a href="/v2.5/docs/configuration/rules-ng.html" class="sidebar-link">Next-Gen Rules</a></li><li><a href="/v2.5/docs/configuration/eclipseiotmarket.html" class="sidebar-link">Eclipse IoT Marketplace</a></li><li><a href="/v2.5/docs/configuration/restdocs.html" class="sidebar-link">REST API</a></li><li><a href="/v2.5/docs/apps/android.html" class="sidebar-link">Android App</a></li><li><a href="/v2.5/docs/apps/ios.html" class="sidebar-link">iOS App</a></li><li><a href="/v2.5/docs/apps/windows.html" class="sidebar-link">Windows 10 App</a></li><li><a href="/v2.5/docs/ecosystem/alexa/" class="sidebar-link">Amazon Alexa</a></li><li><a href="/v2.5/docs/ecosystem/google-assistant/" class="sidebar-link">Google Assistant</a></li><li><a href="/v2.5/addons/integrations/homekit/" class="sidebar-link">Apple HomeKit</a></li><li><a href="/v2.5/docs/ecosystem/ifttt/" class="sidebar-link">IFTTT</a></li><li><a href="/v2.5/docs/ecosystem/mycroft/" class="sidebar-link">Mycroft.AI</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Administration Guide</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/v2.5/docs/administration/" class="sidebar-link">Advanced Functionality and Administrative Tasks</a></li><li><a href="/v2.5/docs/administration/console.html" class="sidebar-link">The Console</a></li><li><a href="/v2.5/docs/administration/runtime.html" class="sidebar-link">Runtime Commands</a></li><li><a href="/v2.5/docs/administration/bundles.html" class="sidebar-link">Bundle Management</a></li><li><a href="/v2.5/docs/administration/logging.html" class="sidebar-link">Logging</a></li><li><a href="/v2.5/docs/administration/jsondb.html" class="sidebar-link">JsonDB Storage</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>Developer Guide</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/v2.5/docs/developer/" class="sidebar-link">Overview &amp; Introduction </a></li><li><a href="/v2.5/docs/developer/guidelines.html" class="active sidebar-link">Coding Guidelines</a></li><li><a href="/v2.5/docs/developer/bindings/" class="sidebar-link">Bindings</a></li><li><a href="/v2.5/docs/developer/module-types/" class="sidebar-link">Automation Modules</a></li><li><a href="/v2.5/docs/developer/transformations/" class="sidebar-link">Transformations / Profiles</a></li><li><a href="/v2.5/docs/developer/ioservices/" class="sidebar-link">IO Services</a></li><li><a href="/v2.5/docs/developer/persistence/" class="sidebar-link">Persistence Service</a></li><li><a href="/v2.5/docs/developer/audio/" class="sidebar-link">Audio &amp; Voice</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Developer Appendix</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/v2.5/docs/developer/buildsystem.html" class="sidebar-link">Build System</a></li><li><a href="/v2.5/docs/developer/osgi/osgi.html" class="sidebar-link">OSGi</a></li><li><a href="/v2.5/docs/developer/utils/tools.html" class="sidebar-link">Framework Tools</a></li><li><a href="/v2.5/docs/developer/utils/i18n.html" class="sidebar-link">Internationalization</a></li><li><a href="/v2.5/docs/developer/utils/events.html" class="sidebar-link">Event Bus</a></li><li><a href="/v2.5/docs/developer/tests.html" class="sidebar-link">Writing tests</a></li><li><a href="/v2.5/docs/developer/contributing.html" class="sidebar-link">Contribution</a></li><li><a href="/v2.5/docs/developer/governance.html" class="sidebar-link">Governance</a></li><li><a href="/v2.5/docs/developer/legacy/compatibilitylayer.html" class="sidebar-link">Compatibility Layer</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="coding-guidelines"><a href="#coding-guidelines" aria-hidden="true" class="header-anchor">#</a> Coding Guidelines</h1> <p>The following guidelines apply to all (Java) code of the openHAB project.
They must be followed to ensure a consistent code base for easy readability and maintainability.
Exceptions can certainly be made, but they should be discussed and approved by a project maintainer upfront.</p> <p>Note that this list also serves as a checklist for code reviews on pull requests.
To speed up the contribution process, we therefore advice to go through this checklist yourself before creating a pull request.</p> <p>If you are just keen on binding development, you may skip this document first and come back later.</p> <p></p><div class="table-of-contents"><ul><li><a href="#a-directory-and-file-layout">A. Directory and File Layout</a></li><li><a href="#b-code-formatting-rules-style">B. Code formatting rules &amp; style</a><ul><li><a href="#code-format">Code format</a></li><li><a href="#java-coding-style">Java Coding Style</a></li></ul></li><li><a href="#c-documentation">C. Documentation</a></li><li><a href="#d-language-levels-and-libraries">D. Language Levels and Libraries</a></li><li><a href="#e-runtime-behavior">E. Runtime Behavior</a></li><li><a href="#f-logging">F. Logging</a></li><li><a href="#g-other-code-attributions">G. Other code attributions</a></li><li><a href="#guideline-details">Guideline details</a><ul><li><a href="#static-code-analysis">Static Code Analysis</a></li><li><a href="#null-annotations">Null Annotations</a></li><li><a href="#default-libraries">Default Libraries</a></li></ul></li></ul></div><p></p> <h2 id="a-directory-and-file-layout"><a href="#a-directory-and-file-layout" aria-hidden="true" class="header-anchor">#</a> A. Directory and File Layout</h2> <p>The structure of a binding follows the structure of a typical OSGi bundle project.</p> <div class="language- extra-class"><pre class="language-text"><code>|- src/main
|---- feature
|-------- feature.xml   Your OSGI feature file
|---- java             Your Java code
|-------- org/openhab/[...]
|- src/main/resources/ESH-INF
|---- binding
|-------- binding.xml      Binding name, description, author and other meta data
|---- config              Configuration description files when not in things files
|-------- *.xml
|---- i18n                Your localized binding texts
|-------- *_&lt;local&gt;.properties
|---- thing               One or more xml files with thing descriptions
|-------- *.xml
|- src/test
|---- java             It's easy to write unit tests and fellow developers will thank you
|-------- org/openhab/[...]
|---- resources        Any resource files used in your unit tests, like test data
|-------- [...]
|- NOTICE                 License information
|                         3rd party content has to be given in the NOTICE file
|- pom.xml                Build system file: Describe your dependencies here
|- README.md              The file describing your binding
</code></pre></div><ul><li>Every Java file must have a license header. You can run <code>mvn license:format</code> on the root of the repo to automatically add missing headers.</li></ul> <h2 id="b-code-formatting-rules-style"><a href="#b-code-formatting-rules-style" aria-hidden="true" class="header-anchor">#</a> B. Code formatting rules &amp; style</h2> <h3 id="code-format"><a href="#code-format" aria-hidden="true" class="header-anchor">#</a> Code format</h3> <p>In order to keep the code layout consistent, code formatting rules have been defined.
Rules are enforced as part of the build process using <a href="https://github.com/diffplug/spotless" target="_blank" rel="noopener noreferrer">Spotless Maven Plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>To check if your code is following the code style run <code>mvn spotless:check</code>. If Maven prints <code>[INFO] Spotless check skipped</code> then run <code>mvn spotless:check -Dspotless.check.skip=false</code> instead as the check isn't mandatory yet.
To reformat you code run <code>mvn spotless:apply</code></p> <p>Code styles files are located in here: <a href="https://github.com/openhab/static-code-analysis/tree/master/codestyle/src/main/resources" target="_blank" rel="noopener noreferrer">https://github.com/openhab/static-code-analysis/tree/master/codestyle/src/main/resources<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="java-code"><a href="#java-code" aria-hidden="true" class="header-anchor">#</a> Java Code</h4> <p>The rules are defined using the Eclipse Java Formatter definitions. There are plugins available for several IDEs that support these definitons.</p> <ul><li>Official <a href="/v2.5/docs/developer/ide.html">openHAB Eclipse IDE setup</a> is preconfigured</li> <li>Eclipse standalone installation
<ul><li>You can manually import <a href="https://raw.githubusercontent.com/openhab/static-code-analysis/master/codestyle/src/main/resources/openhab_codestyle.xml" target="_blank" rel="noopener noreferrer">openhab_codestyle.xml<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> via <code>Eclipse Preferences -&gt; Java -&gt; Code Style -&gt; Formatter</code> and <a href="https://raw.githubusercontent.com/openhab/static-code-analysis/master/codestyle/src/main/resources/openhab.importorder" target="_blank" rel="noopener noreferrer">openhab.importorder<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> via <code>Eclipse Preferences -&gt; Java -&gt; Code Style -&gt; Organize Imports</code></li></ul></li> <li>IntelliJ using plugin <a href="https://plugins.jetbrains.com/plugin/6546-eclipse-code-formatter" target="_blank" rel="noopener noreferrer">https://plugins.jetbrains.com/plugin/6546-eclipse-code-formatter<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <ul><li>Same files as for the Eclipse standalone installation. Be sure to follow <em>all</em> the plugin configuration steps.</li></ul></li></ul> <h4 id="xml-files"><a href="#xml-files" aria-hidden="true" class="header-anchor">#</a> XML files</h4> <ul><li>Maven <code>pom.xml</code> files shall have 2 space indentation</li> <li>Other <code>xml</code> files shall have 1 tab indentation</li> <li>Line length shall be 120 characters</li></ul> <p>The rules are defined at <a href="https://github.com/openhab/static-code-analysis/tree/master/codestyle/src/main/resources" target="_blank" rel="noopener noreferrer">https://github.com/openhab/static-code-analysis/tree/master/codestyle/src/main/resources<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for the Eclipse WTP formatter, but will have to be manually entered into your IDE.</p> <h3 id="java-coding-style"><a href="#java-coding-style" aria-hidden="true" class="header-anchor">#</a> Java Coding Style</h3> <ul><li>The <a href="http://java.about.com/od/javasyntax/a/nameconventions.htm" target="_blank" rel="noopener noreferrer">Java naming conventions<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> should be used for source files.</li> <li>Generics must be used where applicable. See example below:</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">boolean</span> <span class="token function">isEqual</span><span class="token punctuation">(</span><span class="token class-name">GenericsType</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> g1<span class="token punctuation">,</span> <span class="token class-name">GenericsType</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> g2<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> g1<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>g2<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>Code MUST not show any warnings.
Warnings that cannot be circumvented should be suppressed by using the <code>@SuppressWarnings</code> annotation.</li> <li>Your classes are generally organised within an internal package</li></ul> <div class="language-java extra-class"><pre class="language-java"><code>org<span class="token punctuation">.</span>openhab<span class="token punctuation">.</span>binding<span class="token punctuation">.</span>coolbinding<span class="token punctuation">.</span>internal
org<span class="token punctuation">.</span>openhab<span class="token punctuation">.</span>binding<span class="token punctuation">.</span>coolbinding<span class="token punctuation">.</span>internal<span class="token punctuation">.</span>handler
org<span class="token punctuation">.</span>openhab<span class="token punctuation">.</span>binding<span class="token punctuation">.</span>coolbinding<span class="token punctuation">.</span>internal<span class="token punctuation">.</span>discovery
</code></pre></div><p>Remember that classes that are meant to be used by scripts or other bindings must be non internal.</p> <ul><li>Every class, except data-transfer-objects (DTO), must be annotated with <code>@NonNullByDefault</code>.
For details see <a href="#null-annotations">Null annotation</a>.</li> <li>OSGi Declarative Services annotations are to be used</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span><span class="token punctuation">(</span>service<span class="token operator">=</span><span class="token class-name">MyCoolService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyCoolService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Reference</span>
    <span class="token keyword">private</span> <span class="token annotation punctuation">@NonNullByDefault</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token class-name">ItemRegistry</span> itemRegistry<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="c-documentation"><a href="#c-documentation" aria-hidden="true" class="header-anchor">#</a> C. Documentation</h2> <p>JavaDoc is required to describe the purpose and usage of every:</p> <ul><li>class,</li> <li>interface,</li> <li>enumeration (except inner classes and enums),</li> <li>constant, field and method with visibility of default, protected or public.</li></ul> <p>An @author tag is required within the JavaDoc for every author who made a substantial contribution to the file.
New @author tags should be placed below the older ones.
Data-transfer-objects (DTOs map from Json/XML to Java classes) do not require JavaDoc.</p> <h2 id="d-language-levels-and-libraries"><a href="#d-language-levels-and-libraries" aria-hidden="true" class="header-anchor">#</a> D. Language Levels and Libraries</h2> <ol><li>openHAB generally targets the long time supported Java 8 and Java 11 releases with the following restrictions:</li></ol> <ul><li>To allow optimized runtimes, the set of Java packages to be used is further restricted to <a href="https://www.oracle.com/technetwork/java/embedded/resources/tech/compact-profiles-overview-2157132.html" target="_blank" rel="noopener noreferrer">Compact Profile 2<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</li></ul> <ol start="2"><li>The <a href="https://osgi.org/download/r7/osgi.core-7.0.0.pdf" target="_blank" rel="noopener noreferrer">OSGi Core Release 7<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> with <a href="https://osgi.org/download/r7/osgi.cmpn-7.0.0.pdf" target="_blank" rel="noopener noreferrer">OSGI Compendium Release 7<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is targeted, and newer features should not be used.</li> <li><a href="http://slf4j.org" target="_blank" rel="noopener noreferrer">slf4j<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is used for logging.</li></ol> <p>You might also have the need to use other libraries for specific use cases like XML processing, networking etc.
See <a href="#default-libraries">Default libraries</a> for more details.</p> <h2 id="e-runtime-behavior"><a href="#e-runtime-behavior" aria-hidden="true" class="header-anchor">#</a> E. Runtime Behavior</h2> <ol><li>Overridden methods from abstract classes or interfaces are expected to return fast unless otherwise stated in their JavaDoc.
Expensive operations should therefore rather be scheduled as a job.</li> <li>Creation of threads must be avoided.
Instead, resort into using existing schedulers which use pre-configured thread pools.
If there is no suitable scheduler available, start a discussion in the forum about it rather than creating a thread by yourself.
For periodically executed jobs that do not require a fixed rate <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledExecutorService.html#scheduleWithFixedDelay(java.lang.Runnable,%20long,%20long,%20java.util.concurrent.TimeUnit)" target="_blank" rel="noopener noreferrer">scheduleWithFixedDelay<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> should be preferred over <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledExecutorService.html#scheduleAtFixedRate(java.lang.Runnable,%20long,%20long,%20java.util.concurrent.TimeUnit)" target="_blank" rel="noopener noreferrer">scheduleAtFixedRate<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</li> <li>Bundles need to cleanly start and stop without throwing exceptions or malfunctioning.
This can be tested by manually starting and stopping the bundle from the console (<code>stop &lt;bundle-id&gt;</code> resp. <code>start &lt;bundle-id&gt;</code>).</li> <li>Bundles must not require any substantial CPU time.
Test this e.g. using &quot;top&quot; or VisualVM and compare CPU utilization with your bundle stopped vs. started.</li></ol> <h2 id="f-logging"><a href="#f-logging" aria-hidden="true" class="header-anchor">#</a> F. Logging</h2> <p>This section explains some logging usage patterns.
The logger that is used allows logging at multiple severity levels (trace, info, debug, warn, error).
Most of the time, a level of <code>warn</code> or <code>debug</code> will be used.
Please remember that every logging statement adds to code size and runtime cost.</p> <ul><li>Loggers should be <a href="http://slf4j.org/faq.html#declared_static" target="_blank" rel="noopener noreferrer">non-static<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, <code>final</code> when ever possible and have the name <code>logger</code>.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">MyCoolClass</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">MyCoolClass</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>Parametrized logging must be used (instead of string concatenation).</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">void</span> <span class="token function">myFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> someValue <span class="token operator">=</span> <span class="token string">&quot;abc&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> someInt <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Current value is {} and int is {}&quot;</span><span class="token punctuation">,</span> someValue<span class="token punctuation">,</span> someInt<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>Exceptions with stacktraces in the log are considered to be bugs in your binding that should be reported and fixed.
If you add an exception as a last parameter to the logging, the stack trace will be printed.
Configuration errors by users should only print log messages about what's wrong. In that case you would use <code>e.getMessage()</code>.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">void</span> <span class="token function">myFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        logger<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&quot;Explain what went wrong and how to avoid it. You can have arguments {}.&quot;</span><span class="token punctuation">,</span> someVariable<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>Logging is not a replacement for using the debugger.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">void</span> <span class="token function">myFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    logger<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">&quot;Enter myfun&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// DONT, DONT, really DONT do that</span>
    <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">&quot;Leave myfun&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// DONT, DONT, really DONT do that</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>Logging is not a replacement to use respective <code>update*</code> methods of the framework</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">void</span> <span class="token function">myFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;And now the thing goes online&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// DONT, DONT, really DONT do that</span>
    <span class="token function">updateState</span><span class="token punctuation">(</span><span class="token class-name">ThingState</span><span class="token punctuation">.</span>ONLINE<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Logging levels should focus on the system itself and describe its state.
As every bundle is only one out of many, logging should be done very scarce.
It should be up to the user to increase the logging level for specific bundles, packages or classes if necessary.
This means in detail:</p> <ul><li><p><code>error</code> logging should only be used</p> <ul><li>to inform the user that something is tremendously wrong in the setup, the system cannot function normally anymore, and there is a need for immediate action.</li> <li>in case some code fails irrecoverably and the user should report it as a severe bug.</li></ul></li> <li><p><code>warn</code> logging should only be used</p> <ul><li>to inform the user that something seems to be wrong in the overall setup, but the system can nonetheless function as normal,</li> <li>in recoverable situations when a section of code that is not accessed under normal operating conditions is reached.</li></ul></li> <li><p><code>info</code> logging should be used sparsely.
e.g. a newly started component or a user file that has been loaded.</p></li> <li><p><code>debug</code> logging should be used for detailed logging</p> <ul><li>to give the user debug information in cases of unexpected behavior.</li> <li>to log exceptions in case of temporary problems, like connection problems.
In case of such exceptions this should be reflected in an updated state of the binding.</li></ul></li> <li><p><code>trace</code> logging should be used for verbose debug logging.
For example printing output values that can be large, but can help when debugging changed external apis.</p></li></ul> <p>In general bindings should NOT log to error/warn if e.g. connections are dropped -
this is considered to be an external problem and from a system perspective to be a normal and expected situation.
The correct way to inform users about such events is to update the Thing status accordingl</p> <p>Note that all events (including Thing status events) are anyhow already logged.</p> <h2 id="g-other-code-attributions"><a href="#g-other-code-attributions" aria-hidden="true" class="header-anchor">#</a> G. Other code attributions</h2> <p>If you copy code from somewhere make sure that the license is compatible to the Eclipse License version 2.
This includes the Apache license, the Eclipse license v1, the MIT and BSD license.</p> <p>You may also use Stackoverflow snippets, because they are automatically MIT licensed.</p> <p>Please make sure to not remove author attributions or modify the license header in code files that you have copied.
Add the filename, author and license to the NOTICE file of your addon (except for short snippets, eg from Stackoverflow etc).</p> <h2 id="guideline-details"><a href="#guideline-details" aria-hidden="true" class="header-anchor">#</a> Guideline details</h2> <p>This sections provides some background and more detailed information about parts of the guideline.</p> <h3 id="static-code-analysis"><a href="#static-code-analysis" aria-hidden="true" class="header-anchor">#</a> Static Code Analysis</h3> <p>The openHAB Maven build includes <a href="https://github.com/openhab/static-code-analysis" target="_blank" rel="noopener noreferrer">tooling for static code analysis<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> that will validate your code against the Coding Guidelines and some additional best practices.
Information about the checks can be found <a href="https://github.com/openhab/static-code-analysis/blob/master/docs/included-checks.md" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>The tool will generate an individual report for each bundle that you can find in <code>path/to/bundle/target/code-analysis/report.html</code> file and a report for the whole build that contains links to the individual reports in the <code>target/summary_report.html</code>.
The tool categorizes the found issues by priority: 1(error),2(warning) or 3(info).
If any error is found within your code the Maven build will end with failure.</p> <p>You will receive detailed information (path to the file, line and message) listing all problems with Priority 1 and 2 on the console.</p> <h3 id="null-annotations"><a href="#null-annotations" aria-hidden="true" class="header-anchor">#</a> Null Annotations</h3> <p><a href="https://wiki.eclipse.org/JDT_Core/Null_Analysis" target="_blank" rel="noopener noreferrer">Null annotations<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> are used from the Eclipse JDT project.</p> <p>Those annotations help the compiler and our static code analyser to figure out if a potential null pointer access would happen in your code.</p> <p>Classes (except data transfer objects (DTO)) must be annotated with <code>@NonNullByDefault</code>:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@NonNullByDefault</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><p>This forces you to think about every field in your class if it can be null at any point, or should rather be default initialized.
If you have fields that are neither marked as nullable, nor are initialized, the code will not compile.</p> <p>Fields that can be null are to be annotated like this:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">MyType</span> myField<span class="token punctuation">;</span>
</code></pre></div><p>The compiler will force you to check if <code>myField</code> is null, before using it:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">myFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">final</span> <span class="token class-name">MyType</span> myField <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>myField<span class="token punctuation">;</span> <span class="token comment">// You need a local copy of the field for thread safety.</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>myField <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        myField<span class="token punctuation">.</span><span class="token function">soSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Methods should be annotated as follows:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">MyReturnType</span> <span class="token function">myMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>If you reference an OSGi service, OSGi will already make sure that the field is non-null.
The compiler doesn't know about that fact though.
You must therefore disable null-checks for such references:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Reference</span>
<span class="token keyword">private</span> <span class="token annotation punctuation">@NonNullByDefault</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token class-name">MyService</span> injectedService<span class="token punctuation">;</span>
</code></pre></div><h3 id="default-libraries"><a href="#default-libraries" aria-hidden="true" class="header-anchor">#</a> Default Libraries</h3> <p>In order to not have every binding use a different library, the following packages are available by default:</p> <p>For XML Processing</p> <ul><li>com.thoughtworks.xstream</li> <li>com.thoughtworks.xstream.annotations</li> <li>com.thoughtworks.xstream.converters</li> <li><a href="http://com.thoughtworks.xstream.io" target="_blank" rel="noopener noreferrer">com.thoughtworks.xstream.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>com.thoughtworks.xstream.io.xml</li></ul> <p>For JSON Processing</p> <ul><li>com.google.gson.*</li></ul> <p>For HTTP Operations</p> <ul><li>org.eclipse.jetty.client.*</li> <li>org.eclipse.jetty.client.api.*</li> <li>org.eclipse.jetty.http.*</li> <li>org.eclipse.jetty.util.*</li></ul> <p>Note: HttpClient instances should be obtained by the handler factory through the HttpClientFactory service and unless there are specific configuration requirements, the shared instance should be used.</p> <p>For Web Socket Operations</p> <ul><li>org.eclipse.jetty.websocket.client</li> <li>org.eclipse.jetty.websocket.api</li></ul> <p>Note: WebSocketClient instances should be obtained by the handler factory through the WebSocketClientFactory service and unless there are specific configuration requirements, the shared instance should be used.</p> <p>Additionally these libraries are allowed</p> <ul><li>Apache Commons IO</li> <li>Apache Commons Lang</li></ul> <div class="page-versions"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Version: 2.5</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><a href="https://www.openhab.org/docs/developer/guidelines.html">latest</a></li><li class="dropdown-item"><a class="current">2.5</a></li></ul></div></div> <div class="editLink"><em>Caught a mistake or want to contribute to the documentation? <a target="_blank" href="https://github.com/openhab/openhab-docs/edit/master/developers/guidelines.md">Edit this page on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></em> <!----></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        
        <a href="/v2.5/docs/developer/" class="prev router-link-active">
          Overview &amp; Introduction 
        </a></span> <span class="next"><a href="/v2.5/docs/developer/bindings/">
          Bindings
        </a>
        
      </span></p></div> <footer><div class="social-icons"><a href="https://twitter.com/openhab" target="_blank"><svg class="social-icon twitter"><path d="M32 7.075c-1.175 0.525-2.444 0.875-3.769 1.031 1.356-0.813 2.394-2.1 2.887-3.631-1.269 0.75-2.675 1.3-4.169 1.594-1.2-1.275-2.906-2.069-4.794-2.069-3.625 0-6.563 2.938-6.563 6.563 0 0.512 0.056 1.012 0.169 1.494-5.456-0.275-10.294-2.888-13.531-6.862-0.563 0.969-0.887 2.1-0.887 3.3 0 2.275 1.156 4.287 2.919 5.463-1.075-0.031-2.087-0.331-2.975-0.819 0 0.025 0 0.056 0 0.081 0 3.181 2.263 5.838 5.269 6.437-0.55 0.15-1.131 0.231-1.731 0.231-0.425 0-0.831-0.044-1.237-0.119 0.838 2.606 3.263 4.506 6.131 4.563-2.25 1.762-5.075 2.813-8.156 2.813-0.531 0-1.050-0.031-1.569-0.094 2.913 1.869 6.362 2.95 10.069 2.95 12.075 0 18.681-10.006 18.681-18.681 0-0.287-0.006-0.569-0.019-0.85 1.281-0.919 2.394-2.075 3.275-3.394z"></path></svg></a> <a href="https://github.com/openhab" target="_blank"><svg class="social-icon github"><path d="M10.369 24.837c0 0.125-0.144 0.225-0.325 0.225-0.206 0.019-0.35-0.081-0.35-0.225 0-0.125 0.144-0.225 0.325-0.225 0.188-0.019 0.35 0.081 0.35 0.225zM8.425 24.556c-0.044 0.125 0.081 0.269 0.269 0.306 0.162 0.063 0.35 0 0.387-0.125s-0.081-0.269-0.269-0.325c-0.162-0.044-0.344 0.019-0.387 0.144zM11.188 24.45c-0.181 0.044-0.306 0.163-0.287 0.306 0.019 0.125 0.181 0.206 0.369 0.163 0.181-0.044 0.306-0.163 0.287-0.288-0.019-0.119-0.188-0.2-0.369-0.181zM15.3 0.5c-8.669 0-15.3 6.581-15.3 15.25 0 6.931 4.362 12.863 10.594 14.95 0.8 0.144 1.081-0.35 1.081-0.756 0-0.387-0.019-2.525-0.019-3.837 0 0-4.375 0.938-5.294-1.863 0 0-0.713-1.819-1.737-2.288 0 0-1.431-0.981 0.1-0.962 0 0 1.556 0.125 2.412 1.613 1.369 2.413 3.662 1.719 4.556 1.306 0.144-1 0.55-1.694 1-2.106-3.494-0.387-7.019-0.894-7.019-6.906 0-1.719 0.475-2.581 1.475-3.681-0.162-0.406-0.694-2.081 0.162-4.244 1.306-0.406 4.313 1.688 4.313 1.688 1.25-0.35 2.594-0.531 3.925-0.531s2.675 0.181 3.925 0.531c0 0 3.006-2.1 4.313-1.688 0.856 2.169 0.325 3.838 0.163 4.244 1 1.106 1.613 1.969 1.613 3.681 0 6.031-3.681 6.512-7.175 6.906 0.575 0.494 1.063 1.431 1.063 2.9 0 2.106-0.019 4.712-0.019 5.225 0 0.406 0.288 0.9 1.081 0.756 6.25-2.075 10.488-8.006 10.488-14.938 0-8.669-7.031-15.25-15.7-15.25zM6.075 22.056c-0.081 0.063-0.063 0.206 0.044 0.325 0.1 0.1 0.244 0.144 0.325 0.063 0.081-0.063 0.063-0.206-0.044-0.325-0.1-0.1-0.244-0.144-0.325-0.063zM5.4 21.55c-0.044 0.081 0.019 0.181 0.144 0.244 0.1 0.063 0.225 0.044 0.269-0.044 0.044-0.081-0.019-0.181-0.144-0.244-0.125-0.038-0.225-0.019-0.269 0.044zM7.425 23.775c-0.1 0.081-0.063 0.269 0.081 0.387 0.144 0.144 0.325 0.163 0.406 0.063 0.081-0.081 0.044-0.269-0.081-0.387-0.138-0.144-0.325-0.163-0.406-0.063zM6.713 22.856c-0.1 0.063-0.1 0.225 0 0.369s0.269 0.206 0.35 0.144c0.1-0.081 0.1-0.244 0-0.387-0.088-0.144-0.25-0.206-0.35-0.125z"></path></svg></a> <a href="https://www.youtube.com/channel/UC7OK88DW0La_BJlcXZg8ydQ" target="_blank"><svg class="social-icon youtube"><path d="M31.681 9.6c0 0-0.313-2.206-1.275-3.175-1.219-1.275-2.581-1.281-3.206-1.356-4.475-0.325-11.194-0.325-11.194-0.325h-0.012c0 0-6.719 0-11.194 0.325-0.625 0.075-1.987 0.081-3.206 1.356-0.963 0.969-1.269 3.175-1.269 3.175s-0.319 2.588-0.319 5.181v2.425c0 2.587 0.319 5.181 0.319 5.181s0.313 2.206 1.269 3.175c1.219 1.275 2.819 1.231 3.531 1.369 2.563 0.244 10.881 0.319 10.881 0.319s6.725-0.012 11.2-0.331c0.625-0.075 1.988-0.081 3.206-1.356 0.962-0.969 1.275-3.175 1.275-3.175s0.319-2.587 0.319-5.181v-2.425c-0.006-2.588-0.325-5.181-0.325-5.181zM12.694 20.15v-8.994l8.644 4.513-8.644 4.481z"></path></svg></a></div> <div class="legal"><span class="copyright">Copyright  2019 by the openHAB Community and the openHAB Foundation e.V.</span> <br> <span class="legal-links"><a href="/v2.5/privacy.html">Privacy policy</a> |
    <a href="/v2.5/imprint.html">Imprint</a></span></div> <img src="/openhab-logo-square.png" class="footer-logo"></footer></div> <!----></div></div>
    <script src="/v2.5/assets/js/app.6e1f6232.js" defer></script><script src="/v2.5/assets/js/527.205984e3.js" defer></script><script src="/v2.5/assets/js/32.7c8f01a5.js" defer></script><script src="/v2.5/assets/js/33.df59480d.js" defer></script>
  </body>
</html>
