(window.webpackJsonp=window.webpackJsonp||[]).push([[252],{849:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[a("hr"),t._v(" "),a("hr"),t._v(" "),t._m(0),t._v(" "),a("p",[t._v("This binding allows you to integrate modules(at the Moment AM, EM and JRM) of PHC, without the PHC control (STM), in openHAB.")]),t._v(" "),a("p",[t._v("The serial protocol is mainly extracted, with thanks to the developers from the projects "),a("a",{attrs:{href:"https://sourceforge.net/projects/phctoudp/",target:"_blank",rel:"noopener noreferrer"}},[t._v("PHCtoUDP"),a("OutboundLink")],1),t._v(" and "),a("a",{attrs:{href:"https://sourceforge.net/projects/openhc/?source=directory",target:"_blank",rel:"noopener noreferrer"}},[t._v("OpenHC"),a("OutboundLink")],1),t._v(".")]),t._v(" "),t._m(1),t._v(" "),a("p",[t._v("The Bridge manages the communication between the things and the modules via a serial port (RS485). It represents the STM.\nAt the Moment you can only use one Bridge (like one STM).")]),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),a("p",[t._v("The binding was tested with QinHeng Electronics HL-340 USB-Serial adapter (RS485) and the Digitus DA-70157 (FTDI/FT323RL) on Raspbian Ubilinux (Up Board) and Windows 10:")]),t._v(" "),t._m(5),t._v(" "),a("p",[t._v("Sometimes it is a bit slowly and you have to switch two times for reaction, but all in all it works ok.\nI'm trying to get a faster solution for communication in the next few weeks.")]),t._v(" "),a("p",[t._v("For all devices running with Linux that use the ch341 driver (HL-340), the new version (ch34x) is needed.\nA guide how to install this can be found here: "),a("a",{attrs:{href:"https://github.com/aperepel/raspberrypi-ch340-driver",target:"_blank",rel:"noopener noreferrer"}},[t._v("CH340/341 UART Driver for Raspberry Pi"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("p",[t._v("If you don´t have the same kernel as used in the guide you have to compile the module yourself. In the guide is described a specific way for the Raspberry Pi. With another Linux version you can go the normal way with linux-headers.")]),t._v(" "),a("p",[t._v("In Linux amongst others the user 'openhab' must be added to the group 'dialout': "),a("code",[t._v("sudo usermod -a -G dialout openhab")]),t._v(" For more information read the "),a("a",{attrs:{href:"https://www.openhab.org/docs/installation/linux.html#recommended-additional-setup-steps",target:"_blank",rel:"noopener noreferrer"}},[t._v("installation guide"),a("OutboundLink")],1),t._v(".")]),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),a("p",[t._v("Not implemented yet.")]),t._v(" "),t._m(9),t._v(" "),a("p",[t._v("A thing accords with a module in the PHC software and the channels (with linked items) accord with the inputs and outputs.\nPlease note, if you define the things manually (not in the UI) that the ThingID always have to be the address.")]),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),a("p",[t._v(".things")]),t._v(" "),t._m(17),a("p",[t._v(".items")]),t._v(" "),t._m(18),a("DocPreviousVersions"),t._v(" "),a("EditPageLink")],1)},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"phc-binding"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#phc-binding","aria-hidden":"true"}},[this._v("#")]),this._v(" PHC Binding")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"bridge"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bridge","aria-hidden":"true"}},[this._v("#")]),this._v(" Bridge")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"configurations"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#configurations","aria-hidden":"true"}},[this._v("#")]),this._v(" Configurations")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("Serial Port:")]),this._v(" Type the serial port of the RS485 adaptor, e.g. COM3 (Windows) or /dev/ttyUSB0 (Linux).")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"serial-communication"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#serial-communication","aria-hidden":"true"}},[this._v("#")]),this._v(" Serial Communication")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("table",[a("thead",[a("tr",[a("th",[t._v("Device/OS")]),t._v(" "),a("th",[t._v("adaptor")]),t._v(" "),a("th",[t._v("result")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("Windows 10")]),t._v(" "),a("td",[t._v("HL-340")]),t._v(" "),a("td",[t._v("ok")])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[t._v("FTDI")]),t._v(" "),a("td",[t._v("good")])]),t._v(" "),a("tr",[a("td",[t._v("Raspberry Pi 3B/Jessie")]),t._v(" "),a("td",[t._v("HL-340")]),t._v(" "),a("td",[t._v("not reliable")])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[t._v("FTDI")]),t._v(" "),a("td",[t._v("doesn´t work")])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[t._v("on board")]),t._v(" "),a("td",[t._v("bad")])]),t._v(" "),a("tr",[a("td",[t._v("Up Board/ubilinux(Jessie)")]),t._v(" "),a("td",[t._v("HL-340")]),t._v(" "),a("td",[t._v("not reliable")])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[t._v("FTDI")]),t._v(" "),a("td",[t._v("ok")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"supported-things"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#supported-things","aria-hidden":"true"}},[this._v("#")]),this._v(" Supported Things")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[a("p",[a("strong",[t._v("AM module:")]),t._v(" This represents the AM module with 8 outgoing channels (relays).")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("EM module:")]),t._v(" This represents the EM module with 16 incoming (switches) and 8 outgoing (for a LED in the switch) channels.")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("JRM module:")]),t._v(" This represents the JRM module with 4 channels for Shutters.")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"discovery"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#discovery","aria-hidden":"true"}},[this._v("#")]),this._v(" Discovery")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"thing-configuration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#thing-configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Thing Configuration")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"parameters"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#parameters","aria-hidden":"true"}},[this._v("#")]),this._v(" Parameters")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("p",[s("strong",[this._v("Address:")]),this._v(" Type the address of the module like the DIP switches (you can also find in the PHC software) of the module, e.g. 10110. (mandatory)")])]),this._v(" "),s("li",[s("p",[s("strong",[this._v("UpDownTime[1-4] (only JRM):")]),this._v(" (advanced) The time in seconds that the shutter needs to move up or down. The default, if no value is specified, is 30 seconds.")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"channels"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#channels","aria-hidden":"true"}},[this._v("#")]),this._v(" Channels")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("table",[a("thead",[a("tr",[a("th",[t._v("Thing Type")]),t._v(" "),a("th",[t._v("Channel-Group Id")]),t._v(" "),a("th",[t._v("Channels")]),t._v(" "),a("th",[t._v("Item Type")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("AM")]),t._v(" "),a("td",[t._v("am")]),t._v(" "),a("td",[t._v("00-07")]),t._v(" "),a("td",[t._v("Switch")])]),t._v(" "),a("tr",[a("td",[t._v("EM")]),t._v(" "),a("td",[t._v("em")]),t._v(" "),a("td",[t._v("00-15")]),t._v(" "),a("td",[t._v("Switch(read only)")])]),t._v(" "),a("tr",[a("td",[t._v("EM")]),t._v(" "),a("td",[t._v("emLed")]),t._v(" "),a("td",[t._v("00-07")]),t._v(" "),a("td",[t._v("Switch")])]),t._v(" "),a("tr",[a("td",[t._v("JRM")]),t._v(" "),a("td",[t._v("jrm")]),t._v(" "),a("td",[t._v("00-03")]),t._v(" "),a("td",[t._v("Rollershutter")])]),t._v(" "),a("tr",[a("td",[t._v("JRM")]),t._v(" "),a("td",[t._v("jrmT")]),t._v(" "),a("td",[t._v("00-03")]),t._v(" "),a("td",[t._v("Number")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("Channel UID:")]),this._v(" "),s("code",[this._v("phc:<Thing Type>:<ThingID>:<Channel Group>#<Channel>")]),this._v(" e.g. "),s("code",[this._v("phc:AM:01101:am#03")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[a("strong",[t._v("am:")]),t._v(" Outgoing switch channels (relay).")]),t._v(" "),a("li",[a("strong",[t._v("em:")]),t._v(" Incoming channels.")]),t._v(" "),a("li",[a("strong",[t._v("emLed:")]),t._v(" Outgoing switch channels e.g. for LEDs in light shutters.")]),t._v(" "),a("li",[a("strong",[t._v("jrm:")]),t._v(" Outgoing shutter channels.")]),t._v(" "),a("li",[a("strong",[t._v("jrmT:")]),t._v(" Time for shutter channels in seconds with an accuracy of 1/10 seconds. These channels are used instead of the configuration parameters. If you send the time via this channel, the Binding uses this time till you send another. After reboot the config parameter is used by default.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"full-example"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#full-example","aria-hidden":"true"}},[this._v("#")]),this._v(" Full Example")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-dsl"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("Bridge")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("phc"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("bridge"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("demo")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("port"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"/dev/ttyUSB0"')]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// The ThingID have to be the address.")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("Thing")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("AM")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("10110")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("address"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"01101"')]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("Thing")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("EM")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("00110")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("address"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"00110"')]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("Thing")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("JRM")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("10111")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("address"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"10111"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" upDownTime3"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"60"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" upDownTime4"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"20"')]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-dsl"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("//AM Module")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("Switch")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Switch_1")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("channel"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"phc:AM:01101:am#00"')]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("Switch")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Switch_2")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("channel"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"phc:AM:01101:am#01"')]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("Switch")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Switch_3")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("channel"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"phc:AM:01101:am#02"')]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("Switch")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Switch_8")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("channel"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"phc:AM:01101:am#07"')]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("//JRM Module")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("Rollershutter")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Shutter_1")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("channel"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"phc:JRM:10111:jrm#00"')]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("Rollershutter")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Shutter_2")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("channel"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"phc:JRM:10111:jrm#01"')]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("Rollershutter")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Shutter_3")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("channel"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"phc:JRM:10111:jrm#02"')]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("Rollershutter")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Shutter_4")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("channel"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"phc:JRM:10111:jrm#03"')]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("Number")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("ShutterTime_1")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("channel"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"phc:JRM:10111:jrmT#00"')]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// EM Module")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("Switch")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("InputLed_1")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("channel"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"phc:EM:00110:emLed#03"')]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("Switch")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Input_1")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("channel"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"phc:EM:00110:em#00"')]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("Switch")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Input_2")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("channel"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"phc:EM:00110:em#01"')]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("Switch")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Input_3")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("channel"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"phc:EM:00110:em#01"')]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("Switch")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Input_16")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("channel"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"phc:EM:00110:em#15"')]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])}],!1,null,null,null);e.options.__file="readme.md";s.default=e.exports}}]);