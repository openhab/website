<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker | openHAB</title>
    <meta name="description" content="openHAB - a vendor and technology agnostic open source automation software for your home">
    <link rel="stylesheet" href="/v2.4/fonts/fonts.css">
  <link rel="icon" href="/v2.4/favicon.ico">
  <link rel="shortcut icon" href="/v2.4/favicon.ico">
  <link rel="apple-touch-icon" href="/v2.4/apple-icon.png">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://www.openhab.org/og-image.png">
    <meta property="og:title" content="Docker"><meta property="og:description" content="a vendor and technology agnostic open source automation software for your home">
    <link rel="preload" href="/v2.4/assets/css/0.styles.a3a5c47b.css" as="style"><link rel="preload" href="/v2.4/assets/js/app.1cb1e7e9.js" as="script"><link rel="preload" href="/v2.4/assets/js/464.6b811266.js" as="script"><link rel="preload" href="/v2.4/assets/js/6.b424a272.js" as="script"><link rel="preload" href="/v2.4/assets/js/7.dad7d623.js" as="script">
    <link rel="stylesheet" href="/v2.4/assets/css/0.styles.a3a5c47b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/v2.4/" class="home-link router-link-active"><img src="/v2.4/openhab-logo.png" alt="openHAB" class="logo"> <span class="site-name can-hide">openHAB</span></a> <div class="links" style="max-width:nullpx;"><form id="search-form" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/v2.4/blog/" class="nav-link">Blog</a></div><div class="nav-item"><a href="/v2.4/download/" class="nav-link">Download</a></div><div class="nav-item"><a href="/v2.4/docs/" class="nav-link router-link-active">Documentation</a></div><div class="nav-item"><a href="/v2.4/addons/" class="nav-link">Add-ons</a></div><div class="nav-item"><a href="/v2.4/community/" class="nav-link">Community</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">About</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Get Involved</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/v2.4/about/who-we-are.html" class="nav-link">Who We Are</a></li><li class="dropdown-subitem"><a href="/v2.4/about/contributing.html" class="nav-link">Contribute</a></li><li class="dropdown-subitem"><a href="/v2.4/about/events.html" class="nav-link">Events</a></li></ul></li><li class="dropdown-item"><h4>Support openHAB</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://openhabfoundation.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Foundation
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="/v2.4/about/donate.html" class="nav-link">Donate</a></li></ul></li><li class="dropdown-item"><h4>Resources</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/v2.4/about/showcase.html" class="nav-link">Showcase/How-tos</a></li><li class="dropdown-subitem"><a href="/v2.4/privacy.html" class="nav-link">Privacy Policy</a></li><li class="dropdown-subitem"><a href="https://www.myopenhab.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  myopenHAB
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/openhab" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/v2.4/blog/" class="nav-link">Blog</a></div><div class="nav-item"><a href="/v2.4/download/" class="nav-link">Download</a></div><div class="nav-item"><a href="/v2.4/docs/" class="nav-link router-link-active">Documentation</a></div><div class="nav-item"><a href="/v2.4/addons/" class="nav-link">Add-ons</a></div><div class="nav-item"><a href="/v2.4/community/" class="nav-link">Community</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">About</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Get Involved</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/v2.4/about/who-we-are.html" class="nav-link">Who We Are</a></li><li class="dropdown-subitem"><a href="/v2.4/about/contributing.html" class="nav-link">Contribute</a></li><li class="dropdown-subitem"><a href="/v2.4/about/events.html" class="nav-link">Events</a></li></ul></li><li class="dropdown-item"><h4>Support openHAB</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://openhabfoundation.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Foundation
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="/v2.4/about/donate.html" class="nav-link">Donate</a></li></ul></li><li class="dropdown-item"><h4>Resources</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/v2.4/about/showcase.html" class="nav-link">Showcase/How-tos</a></li><li class="dropdown-subitem"><a href="/v2.4/privacy.html" class="nav-link">Privacy Policy</a></li><li class="dropdown-subitem"><a href="https://www.myopenhab.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  myopenHAB
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/openhab" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>Welcome to openHAB</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/v2.4/docs/" class="sidebar-link">Introduction</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Concepts</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/v2.4/docs/concepts/" class="sidebar-link">Concepts Overview</a></li><li><a href="/v2.4/docs/concepts/things.html" class="sidebar-link">Things</a></li><li><a href="/v2.4/docs/concepts/items.html" class="sidebar-link">Items</a></li><li><a href="/v2.4/docs/concepts/discovery.html" class="sidebar-link">Thing Discovery</a></li><li><a href="/v2.4/docs/concepts/audio.html" class="sidebar-link">Audio &amp; Voice</a></li><li><a href="/v2.4/docs/concepts/units-of-measurement.html" class="sidebar-link">Units Of Measurement</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>Installation Guide</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/v2.4/docs/installation/" class="sidebar-link">Installation Overview</a></li><li><a href="/v2.4/docs/installation/linux.html" class="sidebar-link">Linux</a></li><li><a href="/v2.4/docs/installation/windows.html" class="sidebar-link">Windows</a></li><li><a href="/v2.4/docs/installation/macos.html" class="sidebar-link">macOS</a></li><li><a href="/v2.4/docs/installation/openhabian.html" class="sidebar-link">openHABian</a></li><li><a href="/v2.4/docs/installation/rasppi.html" class="sidebar-link">Raspberry Pi</a></li><li><a href="/v2.4/docs/installation/pine.html" class="sidebar-link">PINE A64</a></li><li><a href="/v2.4/docs/installation/docker.html" class="active sidebar-link">Docker</a></li><li><a href="/v2.4/docs/installation/synology.html" class="sidebar-link">Synology DiskStation</a></li><li><a href="/v2.4/docs/installation/qnap.html" class="sidebar-link">QNAP NAS</a></li><li><a href="/v2.4/docs/installation/security.html" class="sidebar-link">Security</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>New User Tutorial</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/v2.4/docs/tutorial/" class="sidebar-link">Tutorial Overview</a></li><li><a href="/v2.4/docs/tutorial/1sttimesetup.html" class="sidebar-link">First-time setup of openHAB</a></li><li><a href="/v2.4/docs/tutorial/uis.html" class="sidebar-link">openHAB UIs</a></li><li><a href="/v2.4/docs/tutorial/configuration.html" class="sidebar-link">Configuration of openHAB</a></li><li><a href="/v2.4/docs/tutorial/sitemap.html" class="sidebar-link">Creating a sitemap</a></li><li><a href="/v2.4/docs/tutorial/rules.html" class="sidebar-link">Working with rules and scripts</a></li><li><a href="/v2.4/docs/tutorial/logs.html" class="sidebar-link">Looking to the logs</a></li><li><a href="/v2.4/docs/tutorial/persistence.html" class="sidebar-link">Persistence</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Configuration Guide</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/v2.4/docs/configuration/" class="sidebar-link">Configuration Overview</a></li><li><a href="/v2.4/docs/configuration/addons.html" class="sidebar-link">Installation of Add-ons</a></li><li><a href="/v2.4/docs/configuration/things.html" class="sidebar-link">Things</a></li><li><a href="/v2.4/docs/configuration/items.html" class="sidebar-link">Items</a></li><li><a href="/v2.4/docs/configuration/sitemaps.html" class="sidebar-link">Sitemaps</a></li><li><a href="/v2.4/docs/configuration/persistence.html" class="sidebar-link">Persistence</a></li><li><a href="/v2.4/docs/configuration/rules-dsl.html" class="sidebar-link">Rules</a></li><li><a href="/v2.4/docs/configuration/transformations.html" class="sidebar-link">Transformation Services</a></li><li><a href="/v2.4/docs/configuration/actions.html" class="sidebar-link">Actions</a></li><li><a href="/v2.4/docs/configuration/iconsets/classic/" class="sidebar-link">Icons</a></li><li><a href="/v2.4/docs/configuration/jsr223.html" class="sidebar-link">JSR223 Scripting</a></li><li><a href="/v2.4/docs/configuration/services.html" class="sidebar-link">Services</a></li><li><a href="/v2.4/docs/configuration/multimedia.html" class="sidebar-link">Multimedia</a></li><li><a href="/v2.4/docs/configuration/migration/" class="sidebar-link">Migration from 1.x</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Interfaces and Ecosystem</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/v2.4/docs/configuration/packages.html" class="sidebar-link">Initial Setup - Package Selection</a></li><li><a href="/v2.4/docs/configuration/editors.html" class="sidebar-link">Editors</a></li><li><a href="/v2.4/docs/configuration/homebuilder.html" class="sidebar-link">Home Builder</a></li><li><a href="/v2.4/docs/configuration/paperui.html" class="sidebar-link">Paper UI</a></li><li><a href="/v2.4/docs/configuration/ui/habmin/" class="sidebar-link">HABmin</a></li><li><a href="/v2.4/docs/configuration/ui/habot/" class="sidebar-link">HABot</a></li><li><a href="/v2.4/docs/configuration/habpanel.html" class="sidebar-link">HABPanel</a></li><li><a href="/v2.4/docs/configuration/ui/basic/" class="sidebar-link">Basic UI</a></li><li><a href="/v2.4/docs/configuration/ui/classic/" class="sidebar-link">Classic UI</a></li><li><a href="/v2.4/docs/configuration/rules-ng.html" class="sidebar-link">Next-Gen Rules</a></li><li><a href="/v2.4/docs/configuration/eclipseiotmarket.html" class="sidebar-link">Eclipse IoT Marketplace</a></li><li><a href="/v2.4/docs/configuration/restdocs.html" class="sidebar-link">REST API</a></li><li><a href="/v2.4/docs/apps/android.html" class="sidebar-link">Android App</a></li><li><a href="/v2.4/docs/apps/ios.html" class="sidebar-link">iOS App</a></li><li><a href="/v2.4/docs/apps/windows.html" class="sidebar-link">Windows 10 App</a></li><li><a href="/v2.4/docs/ecosystem/alexa/" class="sidebar-link">Amazon Alexa</a></li><li><a href="/v2.4/docs/ecosystem/google-assistant/" class="sidebar-link">Google Assistant</a></li><li><a href="/v2.4/addons/integrations/homekit/" class="sidebar-link">Apple HomeKit</a></li><li><a href="/v2.4/docs/ecosystem/ifttt/" class="sidebar-link">IFTTT</a></li><li><a href="/v2.4/docs/ecosystem/mycroft/" class="sidebar-link">Mycroft.AI</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Administration Guide</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/v2.4/docs/administration/" class="sidebar-link">Advanced Functionality and Administrative Tasks</a></li><li><a href="/v2.4/docs/administration/console.html" class="sidebar-link">The Console</a></li><li><a href="/v2.4/docs/administration/runtime.html" class="sidebar-link">Runtime Commands</a></li><li><a href="/v2.4/docs/administration/bundles.html" class="sidebar-link">Bundle Management</a></li><li><a href="/v2.4/docs/administration/logging.html" class="sidebar-link">Logging</a></li><li><a href="/v2.4/docs/administration/jsondb.html" class="sidebar-link">JsonDB Storage</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Developer Guide</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/v2.4/docs/developer/" class="sidebar-link">Development Overview</a></li><li><a href="/v2.4/docs/developer/contributing/contributing.html" class="sidebar-link">Contribution</a></li><li><a href="/v2.4/docs/developer/prerequisites/osgi.html" class="sidebar-link">OSGi</a></li><li><a href="/v2.4/docs/developer/prerequisites/osgids.html" class="sidebar-link">OSGi Declarative Services</a></li><li><a href="/v2.4/docs/developer/prerequisites/configadmin.html" class="sidebar-link">Configuration Admin</a></li><li><a href="/v2.4/docs/developer/prerequisites/osgitasks.html" class="sidebar-link">Coding tasks for OSGi</a></li><li><a href="/v2.4/docs/developer/prerequisites/eventadmin.html" class="sidebar-link">Event Admin</a></li><li><a href="/v2.4/docs/developer/prerequisites/tycho.html" class="sidebar-link">Tycho</a></li><li><a href="/v2.4/docs/developer/prerequisites/equinox.html" class="sidebar-link">Equinox</a></li><li><a href="/v2.4/docs/developer/prerequisites/targetplatform.html" class="sidebar-link">Target platform</a></li><li><a href="/v2.4/docs/developer/development/ide.html" class="sidebar-link">IDE setup</a></li><li><a href="/v2.4/docs/developer/development/guidelines.html" class="sidebar-link">Coding Guidelines</a></li><li><a href="/v2.4/docs/developer/development/conventions.html" class="sidebar-link">Conventions</a></li><li><a href="/v2.4/docs/developer/development/bindings.html" class="sidebar-link">Developing bindings</a></li><li><a href="/v2.4/docs/developer/development/logging.html" class="sidebar-link">Logging</a></li><li><a href="/v2.4/docs/developer/development/evolution.html" class="sidebar-link">Evolution</a></li><li><a href="/v2.4/docs/developer/development/compatibilitylayer.html" class="sidebar-link">Compatibility</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="openhab-2-inside-a-docker-container"><a href="#openhab-2-inside-a-docker-container" aria-hidden="true" class="header-anchor">#</a> openHAB 2 inside a Docker Container</h1> <p>Docker is the most popular among a collection of tools that provide containerization.
Containerization allows one to run a server in its own isolated environment without the overhead of running a full virtual machine.</p> <p>This page is structured as follows:</p> <p></p><div class="table-of-contents"><ul><li><a href="#why-docker">Why Docker?</a></li><li><a href="#about-the-openhab-installed-in-the-image">About the openHAB installed in the Image</a></li><li><a href="#installation-through-docker">Installation through Docker</a><ul><li><a href="#obtaining-the-official-image-from-dockerhub">Obtaining the Official image from DockerHub</a></li><li><a href="#create-the-openhab-user">Create the openhab user</a></li><li><a href="#create-the-openhab-conf-userdata-and-addon-directories">Create the openHAB conf, userdata, and addon directories</a></li><li><a href="#running-the-container-as-a-service-managed-by-docker">Running the Container as a Service Managed by Docker</a></li><li><a href="#running-the-container-as-a-service-controlled-by-systemd">Running the Container as a Service Controlled by Systemd</a></li></ul></li><li><a href="#explanation-of-arguments-passed-to-docker">Explanation of Arguments Passed to Docker</a></li><li><a href="#environment-variables">Environment Variables</a></li><li><a href="#updating-the-image">Updating the Image</a></li></ul></div><p></p> <h2 id="why-docker"><a href="#why-docker" aria-hidden="true" class="header-anchor">#</a> Why Docker?</h2> <p>There are several reasons one would want to run openHAB in a Docker container.
These include:</p> <ul><li>easily test out different versions</li> <li>run multiple instances side by side</li> <li>easily map the OH ports to other ports without modifying configs</li> <li>isolate OH from the rest of your server environment (e.g. configure the container's networking so the only way it can be accessed is through a reverse proxy)</li> <li>orchestration and automated deployment of OH and related servers</li></ul> <p>However, this flexibility comes at a cost.
For example, because openHAB is running in its own container with only enough installed to run openHAB, the Exec binding is very likely to be useless to you because the container will not have access to the programs and files you need.</p> <h2 id="about-the-openhab-installed-in-the-image"><a href="#about-the-openhab-installed-in-the-image" aria-hidden="true" class="header-anchor">#</a> About the openHAB installed in the Image</h2> <p>Inside the Docker Image, openHAB is installed to <code>/openhab</code>.
The install is a manual installation so all of the files are located here.
This is also set as the home directory of the <code>openhab</code> user.</p> <p>The Image has a very minimal installation of Linux with no services running and just enough installed to allow openHAB to run.</p> <p>At the time of this writing, the official image uses the latest snapshot version of openHAB 2.</p> <h2 id="installation-through-docker"><a href="#installation-through-docker" aria-hidden="true" class="header-anchor">#</a> Installation through Docker</h2> <h3 id="obtaining-the-official-image-from-dockerhub"><a href="#obtaining-the-official-image-from-dockerhub" aria-hidden="true" class="header-anchor">#</a> Obtaining the Official image from DockerHub</h3> <p><a href="https://hub.docker.com/r/openhab/openhab/" target="_blank" rel="noopener noreferrer">Docker Hub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> has the basic information necessary to acquire and run the Docker image.
Please review those instructions before continuing to select the correct image for your machine and download the image.</p> <h3 id="create-the-openhab-user"><a href="#create-the-openhab-user" aria-hidden="true" class="header-anchor">#</a> Create the openhab user</h3> <p>Just because one is running in an isolated container does not mean running as root is recommended.
So first create an <code>openhab</code> user configured to be a system user with no home and no shell.
This can be done on Ubuntu and Raspbian with the command:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">useradd</span> -r -s /sbin/nologin openhab
</code></pre></div><p>Add your regular user to the <code>openhab</code> group.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">usermod</span> -a -G openhab <span class="token operator">&lt;</span>user<span class="token operator">&gt;</span>
</code></pre></div><h3 id="create-the-openhab-conf-userdata-and-addon-directories"><a href="#create-the-openhab-conf-userdata-and-addon-directories" aria-hidden="true" class="header-anchor">#</a> Create the openHAB conf, userdata, and addon directories</h3> <p>These directories will be mounted into the running Docker container and are where the configurations and persistence data will be stored.
Note that the software running inside a Docker container cannot follow the symbolic links located in a mounted volume.
Make sure the <code>openhab</code> user owns these directories.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">mkdir</span> /opt/openhab
<span class="token function">mkdir</span> /opt/openhab/conf
<span class="token function">mkdir</span> /opt/openhab/userdata
<span class="token function">mkdir</span> /opt/openhab/addons
<span class="token function">chown</span> -R openhab:openhab /opt/openhab
</code></pre></div><h3 id="running-the-container-as-a-service-managed-by-docker"><a href="#running-the-container-as-a-service-managed-by-docker" aria-hidden="true" class="header-anchor">#</a> Running the Container as a Service Managed by Docker</h3> <p>Note, always review the README on <a href="https://hub.docker.com/r/openhab/openhab/" target="_blank" rel="noopener noreferrer">Docker Hub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for the most up to date set of recommended arguments and environment variables.
Services can be run an maintained on a Linux machine one of two ways, using Docker or using the system's built in service management (e.g. systemd).
If using docker to manage the service, run the following command:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker run \
        --name openhab \
        --net<span class="token operator">=</span>host \
        --tty \
        -v /etc/localtime:/etc/localtime:ro \
        -v /etc/timezone:/etc/timezone:ro \
        -v /opt/openhab/conf:/openhab/conf \
        -v /opt/openhab/userdata:/openhab/userdata \
        -v /opt/openhab/addons:/openhab/addons\
        -d \
        -e USER_ID<span class="token operator">=</span><span class="token operator">&lt;</span>uid<span class="token operator">&gt;</span> \
        -e GROUP_ID<span class="token operator">=</span><span class="token operator">&lt;</span>gid<span class="token operator">&gt;</span> \
        --restart<span class="token operator">=</span>always \
        openhab/openhab:<span class="token operator">&lt;</span>version<span class="token operator">&gt;</span>-<span class="token operator">&lt;</span>architecture<span class="token operator">&gt;</span>-<span class="token operator">&lt;</span>distributions<span class="token operator">&gt;</span>
</code></pre></div><p>Where</p> <ul><li><code>&lt;uid&gt;</code> is the user ID number for the <code>openhab</code> user which you can obtain using the command <code>id openhab</code>,</li> <li><code>&lt;gid&gt;</code> is the group ID number for the <code>openhab</code> user,</li> <li><code>&lt;version&gt;</code> is the version of openHAB,</li> <li><code>&lt;architecture&gt;</code> is the architecture of your system and</li> <li><code>&lt;distributions&gt;</code> is the base system (debian or alpine).</li></ul> <p>It is important that the ID number is passed in.
The ID for the <code>openhab</code> user inside the container will not match the ID of the user on your host system and file permissions may be a bit odd (e.g. why does www-data own my openHAB config files?).</p> <p>See below for an explanation of the fields passed to Docker and potential additional fields.</p> <p>Once it successfully runs (it should be listed with a CREATED time that does not include &quot;restarting&quot; when running <code>docker ps</code>):</p> <ul><li>To stop the service run <code>docker stop openhab</code>.</li> <li>To restart the service run <code>docker restart openhab</code></li> <li>To start the service run <code>docker start openhab</code></li></ul> <p>To change the runtime parameters stop the container then execute the long command above with the new parameters.</p> <h3 id="running-the-container-as-a-service-controlled-by-systemd"><a href="#running-the-container-as-a-service-controlled-by-systemd" aria-hidden="true" class="header-anchor">#</a> Running the Container as a Service Controlled by Systemd</h3> <p>Note, always review the README on <a href="https://hub.docker.com/r/openhab/openhab/" target="_blank" rel="noopener noreferrer">Docker Hub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for the most up to date set of recommended arguments and environment variables.
If running on a Systemd based Linux distro (Ubuntu 16.1 to be specific).
The following openhab2.service file will start a new openHAB 2 container every time it starts the service and destroy that container when the service stops.
What that means is any data that you want to preserve between restarts of openHAB 2 (e.g. configuration, databases, etc.) must be mounted from your host file system into the container.</p> <p>Creating a new container on every run greatly simplifies the upgrade and update process.
It also ensures that you start with a fresh install every time you run which can avoid some problems.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>Unit<span class="token punctuation">]</span>
Description<span class="token operator">=</span>openHAB 2
Requires<span class="token operator">=</span>docker.service
After<span class="token operator">=</span>docker.service

<span class="token punctuation">[</span>Service<span class="token punctuation">]</span>
Restart<span class="token operator">=</span>always
ExecStart<span class="token operator">=</span>/usr/bin/docker run --name<span class="token operator">=</span>%n --net<span class="token operator">=</span>host --tty \
  -v /etc/localtime:/etc/localtime:ro \
  -v /etc/timezone:/etc/timezone:ro \
  -v /opt/openhab/conf:/openhab/conf \
  -v /opt/openhab/userdata:/openhab/userdata \
  -v /opt/openhab/addons:/openhab/addons \
  -v /opt/openhab/.java:/openhab/.java \
  --device<span class="token operator">=</span>/dev/ttyUSB0 \
  -e USER_ID<span class="token operator">=</span><span class="token operator">&lt;</span>uid_of_openhab<span class="token operator">&gt;</span> \
  -e GROUP_ID<span class="token operator">=</span><span class="token operator">&lt;</span>gid_of_openhab<span class="token operator">&gt;</span> \
  openhab/openhab:<span class="token operator">&lt;</span>version<span class="token operator">&gt;</span>-<span class="token operator">&lt;</span>architecture<span class="token operator">&gt;</span>-<span class="token operator">&lt;</span>distributions<span class="token operator">&gt;</span>
ExecStop<span class="token operator">=</span>/usr/bin/docker stop -t 2 %n <span class="token punctuation">;</span> /usr/bin/docker <span class="token function">rm</span> -f %n

<span class="token punctuation">[</span>Install<span class="token punctuation">]</span>
WantedBy<span class="token operator">=</span>multi-user.target
</code></pre></div><p>Where <code>&lt;uid&gt;</code> is the user ID number for the <code>openhab</code> user which you can obtain using the command <code>id openhab</code>, <code>&lt;version&gt;</code> is the version of openHAB, <code>&lt;architecture&gt;</code> is the architecture of your system and <code>&lt;distributions&gt;</code> is the base system (debian or alpine).
It is important that the ID number is passed in.
The ID for the <code>openhab</code> user inside the container will not match the ID of the user on your host system and file permissions may be a bit odd (e.g. why does www-data own my openHAB config files?).</p> <p>Place this openhab2.service file into <code>/etc/systemd/system</code>.</p> <p>Then run <code>sudo systemctl enable openhab2.service</code>.</p> <p>Finally run <code>sudo systemctl start openhab2.service</code> to start openHAB running.</p> <h2 id="explanation-of-arguments-passed-to-docker"><a href="#explanation-of-arguments-passed-to-docker" aria-hidden="true" class="header-anchor">#</a> Explanation of Arguments Passed to Docker</h2> <p>Note, always review the README on <a href="https://hub.docker.com/r/openhab/openhab/" target="_blank" rel="noopener noreferrer">Docker Hub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for the most up to date set of recommended arguments and environment variables.</p> <ul><li><code>/usr/bin/docker run</code> : create a new container from the passed in Image (last argument)</li> <li><code>--name=openhab</code> : give the container a human remember able name</li> <li><code>--net=host</code> : by default Docker will place a container into its own network stack. However, openHAB 2 requires UPnP discovery so this parameter makes the Docker container use the host's network stack.</li> <li><code>--tty</code> : allocate a pseudo-TTY, required by the Karaf Console</li> <li><code>-v /etc/localtime:/etc/localtime:ro</code> : ties the time of the container to the host's time, read only so the container cannot change the host's time</li> <li><code>-v /etc/timezone:/etc/timezone:ro</code> : ties the timezone of the container to the host's time zone, read only so the container cannot change the host's time zone</li> <li><code>-v /opt/openhab/conf:/openhab/conf</code> : location of the conf folder for openHAB configurations (NOTE: you must create these folders on the host before running the container)</li> <li><code>-v /opt/openhab/userdata:/openhab/userdata</code> : location for logs, cache, persistence databases, etc.</li> <li><code>-v /opt/openhab/addons:/openhab/addons</code> : only needed if installing addons unavailable via PaperUI or the Karaf Console</li> <li><code>-v /opt/openhab/.java:/openhab/.java</code> : needed by the Nest binding (and others?), location of the security token</li> <li><code>--user=&lt;uid&gt;</code> : sets the user that runs the processes inside the container to match the uid passed, makes sure the <code>openhab</code> user can read and write to all needed files</li> <li><code>--device=/dev/ttyUSB0</code> : location of my zwave controller, change and/or add more --device tags to pass all your devices needed by openHAB to the container</li> <li><code>--restart=always</code> : if the container crashes or the system reboots the container is restarted</li> <li><code>openhab/openhab:&lt;version&gt;-&lt;architecture&gt;-&lt;distributions&gt;</code> : name of the Docker Image</li> <li><code>start_debug.sh</code> : You can start the container with the command <code>docker run -it openhab/openhab:&lt;version&gt;-&lt;architecture&gt;-&lt;distributions&gt; ./start_debug.sh</code> to get into the debug shell. You might need to mount additional volumes and parameters as described above.</li></ul> <h2 id="environment-variables"><a href="#environment-variables" aria-hidden="true" class="header-anchor">#</a> Environment Variables</h2> <ul><li><code>EXTRA_JAVA_OPTS</code>=&quot;&quot;</li> <li><code>LC_ALL</code>=en_US.UTF-8</li> <li><code>LANG</code>=en_US.UTF-8</li> <li><code>LANGUAGE</code>=en_US.UTF-8</li> <li><code>OPENHAB_HTTP_PORT</code>=8080</li> <li><code>OPENHAB_HTTPS_PORT</code>=8443</li> <li><code>USER_ID</code>=9001</li></ul> <p>By default the openHAB user in the container is running with:</p> <ul><li><code>uid=9001(openhab) gid=9001(openhab) groups=9001(openhab)</code></li></ul> <h2 id="updating-the-image"><a href="#updating-the-image" aria-hidden="true" class="header-anchor">#</a> Updating the Image</h2> <p>Stop the container:</p> <p><code>docker stop openhab</code> or <code>sudo systemctl stop openhab</code></p> <p>Delete the container:</p> <p><code>docker rm openhab</code></p> <p>Pull down the latest image:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker pull openhab/openhab:<span class="token operator">&lt;</span>version<span class="token operator">&gt;</span>-<span class="token operator">&lt;</span>architecture<span class="token operator">&gt;</span>-<span class="token operator">&lt;</span>distributions<span class="token operator">&gt;</span>
</code></pre></div><p>where <code>&lt;version&gt;</code> is the version of openHAB, <code>&lt;architecture&gt;</code> is your architecture and <code>&lt;distributions&gt;</code> is the base system (debian or alpine).</p> <p>Restart the container using the full command above.</p> <p>The Docker image will automatically perform an upgrade on your mapped in userdata folder whenever it detects that your userdata version and the image's version differ.
It determines the versions are different by comparing userdata/etc/version.properties.
Any changes between the two files will trigger and upgrade.</p> <p>The upgrade process first creates a backup of the entire mapped in userdata folder (skipping the backup folder) and places it as a dated tar file into userdata/backup.
It then performs all the same steps that the upgrade script and which are performed by an apt-get/yum upgrade.</p> <div class="page-versions"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Version: 2.4</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><a href="https://www.openhab.org/docs/installation/docker.html">latest</a></li><li class="dropdown-item"><a class="current">2.4</a></li></ul></div></div> <div class="editLink"><em>Caught a mistake or want to contribute to the documentation? <a target="_blank" href="https://github.com/openhab/openhab-docs/edit/master/installation/docker.md">Edit this page on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></em> <!----></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/v2.4/docs/installation/pine.html" class="prev">
          PINE A64
        </a></span> <span class="next"><a href="/v2.4/docs/installation/synology.html">
          Synology DiskStation
        </a>
        →
      </span></p></div> <footer><div class="social-icons"><a href="https://twitter.com/openhab" target="_blank"><svg class="social-icon twitter"><path d="M32 7.075c-1.175 0.525-2.444 0.875-3.769 1.031 1.356-0.813 2.394-2.1 2.887-3.631-1.269 0.75-2.675 1.3-4.169 1.594-1.2-1.275-2.906-2.069-4.794-2.069-3.625 0-6.563 2.938-6.563 6.563 0 0.512 0.056 1.012 0.169 1.494-5.456-0.275-10.294-2.888-13.531-6.862-0.563 0.969-0.887 2.1-0.887 3.3 0 2.275 1.156 4.287 2.919 5.463-1.075-0.031-2.087-0.331-2.975-0.819 0 0.025 0 0.056 0 0.081 0 3.181 2.263 5.838 5.269 6.437-0.55 0.15-1.131 0.231-1.731 0.231-0.425 0-0.831-0.044-1.237-0.119 0.838 2.606 3.263 4.506 6.131 4.563-2.25 1.762-5.075 2.813-8.156 2.813-0.531 0-1.050-0.031-1.569-0.094 2.913 1.869 6.362 2.95 10.069 2.95 12.075 0 18.681-10.006 18.681-18.681 0-0.287-0.006-0.569-0.019-0.85 1.281-0.919 2.394-2.075 3.275-3.394z"></path></svg></a> <a href="https://github.com/openhab" target="_blank"><svg class="social-icon github"><path d="M10.369 24.837c0 0.125-0.144 0.225-0.325 0.225-0.206 0.019-0.35-0.081-0.35-0.225 0-0.125 0.144-0.225 0.325-0.225 0.188-0.019 0.35 0.081 0.35 0.225zM8.425 24.556c-0.044 0.125 0.081 0.269 0.269 0.306 0.162 0.063 0.35 0 0.387-0.125s-0.081-0.269-0.269-0.325c-0.162-0.044-0.344 0.019-0.387 0.144zM11.188 24.45c-0.181 0.044-0.306 0.163-0.287 0.306 0.019 0.125 0.181 0.206 0.369 0.163 0.181-0.044 0.306-0.163 0.287-0.288-0.019-0.119-0.188-0.2-0.369-0.181zM15.3 0.5c-8.669 0-15.3 6.581-15.3 15.25 0 6.931 4.362 12.863 10.594 14.95 0.8 0.144 1.081-0.35 1.081-0.756 0-0.387-0.019-2.525-0.019-3.837 0 0-4.375 0.938-5.294-1.863 0 0-0.713-1.819-1.737-2.288 0 0-1.431-0.981 0.1-0.962 0 0 1.556 0.125 2.412 1.613 1.369 2.413 3.662 1.719 4.556 1.306 0.144-1 0.55-1.694 1-2.106-3.494-0.387-7.019-0.894-7.019-6.906 0-1.719 0.475-2.581 1.475-3.681-0.162-0.406-0.694-2.081 0.162-4.244 1.306-0.406 4.313 1.688 4.313 1.688 1.25-0.35 2.594-0.531 3.925-0.531s2.675 0.181 3.925 0.531c0 0 3.006-2.1 4.313-1.688 0.856 2.169 0.325 3.838 0.163 4.244 1 1.106 1.613 1.969 1.613 3.681 0 6.031-3.681 6.512-7.175 6.906 0.575 0.494 1.063 1.431 1.063 2.9 0 2.106-0.019 4.712-0.019 5.225 0 0.406 0.288 0.9 1.081 0.756 6.25-2.075 10.488-8.006 10.488-14.938 0-8.669-7.031-15.25-15.7-15.25zM6.075 22.056c-0.081 0.063-0.063 0.206 0.044 0.325 0.1 0.1 0.244 0.144 0.325 0.063 0.081-0.063 0.063-0.206-0.044-0.325-0.1-0.1-0.244-0.144-0.325-0.063zM5.4 21.55c-0.044 0.081 0.019 0.181 0.144 0.244 0.1 0.063 0.225 0.044 0.269-0.044 0.044-0.081-0.019-0.181-0.144-0.244-0.125-0.038-0.225-0.019-0.269 0.044zM7.425 23.775c-0.1 0.081-0.063 0.269 0.081 0.387 0.144 0.144 0.325 0.163 0.406 0.063 0.081-0.081 0.044-0.269-0.081-0.387-0.138-0.144-0.325-0.163-0.406-0.063zM6.713 22.856c-0.1 0.063-0.1 0.225 0 0.369s0.269 0.206 0.35 0.144c0.1-0.081 0.1-0.244 0-0.387-0.088-0.144-0.25-0.206-0.35-0.125z"></path></svg></a> <a href="https://www.youtube.com/channel/UC7OK88DW0La_BJlcXZg8ydQ" target="_blank"><svg class="social-icon youtube"><path d="M31.681 9.6c0 0-0.313-2.206-1.275-3.175-1.219-1.275-2.581-1.281-3.206-1.356-4.475-0.325-11.194-0.325-11.194-0.325h-0.012c0 0-6.719 0-11.194 0.325-0.625 0.075-1.987 0.081-3.206 1.356-0.963 0.969-1.269 3.175-1.269 3.175s-0.319 2.588-0.319 5.181v2.425c0 2.587 0.319 5.181 0.319 5.181s0.313 2.206 1.269 3.175c1.219 1.275 2.819 1.231 3.531 1.369 2.563 0.244 10.881 0.319 10.881 0.319s6.725-0.012 11.2-0.331c0.625-0.075 1.988-0.081 3.206-1.356 0.962-0.969 1.275-3.175 1.275-3.175s0.319-2.587 0.319-5.181v-2.425c-0.006-2.588-0.325-5.181-0.325-5.181zM12.694 20.15v-8.994l8.644 4.513-8.644 4.481z"></path></svg></a></div> <div class="legal"><span class="copyright">Copyright © 2018 by the openHAB Community and the openHAB Foundation e.V.</span> <br> <span class="legal-links"><a href="/v2.4/privacy.html">Privacy policy</a> |
    <a href="/v2.4/imprint.html">Imprint</a></span></div> <img src="/openhab-logo-square.png" class="footer-logo"></footer></div> <!----></div></div>
    <script src="/v2.4/assets/js/464.6b811266.js" defer></script><script src="/v2.4/assets/js/6.b424a272.js" defer></script><script src="/v2.4/assets/js/7.dad7d623.js" defer></script><script src="/v2.4/assets/js/app.1cb1e7e9.js" defer></script>
  </body>
</html>
