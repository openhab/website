<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Modbus - Bindings (1.x) | openHAB</title>
    <meta name="description" content="The binding supports both TCP and Serial slaves. RTU, ASCII and BIN variants of Serial Modbus are supported.">
    <link rel="stylesheet" href="/v2.4/fonts/fonts.css">
  <link rel="icon" href="/v2.4/favicon.ico">
  <link rel="shortcut icon" href="/v2.4/favicon.ico">
  <link rel="apple-touch-icon" href="/v2.4/apple-icon.png">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://www.openhab.org/og-image.png">
    <meta property="og:title" content="Modbus - Bindings"><meta property="og:description" content="The binding supports both TCP and Serial slaves. RTU, ASCII and BIN variants of Serial Modbus are supported.">
    <link rel="preload" href="/v2.4/assets/css/0.styles.a3a5c47b.css" as="style"><link rel="preload" href="/v2.4/assets/js/app.1cb1e7e9.js" as="script"><link rel="preload" href="/v2.4/assets/js/206.314e047a.js" as="script"><link rel="preload" href="/v2.4/assets/js/5.97efa724.js" as="script"><link rel="preload" href="/v2.4/assets/js/6.b424a272.js" as="script"><link rel="preload" href="/v2.4/assets/js/7.dad7d623.js" as="script">
    <link rel="stylesheet" href="/v2.4/assets/css/0.styles.a3a5c47b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/v2.4/" class="home-link router-link-active"><img src="/v2.4/openhab-logo.png" alt="openHAB" class="logo"> <span class="site-name can-hide">openHAB</span></a> <div class="links" style="max-width:nullpx;"><form id="search-form" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/v2.4/blog/" class="nav-link">Blog</a></div><div class="nav-item"><a href="/v2.4/download/" class="nav-link">Download</a></div><div class="nav-item"><a href="/v2.4/docs/" class="nav-link">Documentation</a></div><div class="nav-item"><a href="/v2.4/addons/" class="nav-link router-link-active">Add-ons</a></div><div class="nav-item"><a href="/v2.4/community/" class="nav-link">Community</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">About</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Get Involved</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/v2.4/about/who-we-are.html" class="nav-link">Who We Are</a></li><li class="dropdown-subitem"><a href="/v2.4/about/contributing.html" class="nav-link">Contribute</a></li><li class="dropdown-subitem"><a href="/v2.4/about/events.html" class="nav-link">Events</a></li></ul></li><li class="dropdown-item"><h4>Support openHAB</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://openhabfoundation.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Foundation
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="/v2.4/about/donate.html" class="nav-link">Donate</a></li></ul></li><li class="dropdown-item"><h4>Resources</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/v2.4/about/showcase.html" class="nav-link">Showcase/How-tos</a></li><li class="dropdown-subitem"><a href="/v2.4/privacy.html" class="nav-link">Privacy Policy</a></li><li class="dropdown-subitem"><a href="https://www.myopenhab.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  myopenHAB
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/openhab" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/v2.4/blog/" class="nav-link">Blog</a></div><div class="nav-item"><a href="/v2.4/download/" class="nav-link">Download</a></div><div class="nav-item"><a href="/v2.4/docs/" class="nav-link">Documentation</a></div><div class="nav-item"><a href="/v2.4/addons/" class="nav-link router-link-active">Add-ons</a></div><div class="nav-item"><a href="/v2.4/community/" class="nav-link">Community</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">About</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Get Involved</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/v2.4/about/who-we-are.html" class="nav-link">Who We Are</a></li><li class="dropdown-subitem"><a href="/v2.4/about/contributing.html" class="nav-link">Contribute</a></li><li class="dropdown-subitem"><a href="/v2.4/about/events.html" class="nav-link">Events</a></li></ul></li><li class="dropdown-item"><h4>Support openHAB</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://openhabfoundation.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Foundation
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="/v2.4/about/donate.html" class="nav-link">Donate</a></li></ul></li><li class="dropdown-item"><h4>Resources</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/v2.4/about/showcase.html" class="nav-link">Showcase/How-tos</a></li><li class="dropdown-subitem"><a href="/v2.4/privacy.html" class="nav-link">Privacy Policy</a></li><li class="dropdown-subitem"><a href="https://www.myopenhab.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  myopenHAB
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/openhab" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading open"><span>Bindings</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/v2.4/addons/bindings/airquality/" class="sidebar-link">Air Quality</a></li><li><a href="/v2.4/addons/bindings/airvisualnode/" class="sidebar-link">AirVisual Node</a></li><li><a href="/v2.4/addons/bindings/akm8681/" class="sidebar-link">AKM868</a></li><li><a href="/v2.4/addons/bindings/alarmdecoder1/" class="sidebar-link">Alarm Decoder</a></li><li><a href="/v2.4/addons/bindings/allplay/" class="sidebar-link">AllPlay</a></li><li><a href="/v2.4/addons/bindings/amazondashbutton/" class="sidebar-link">Amazon Dash Button</a></li><li><a href="/v2.4/addons/bindings/amazonechocontrol/" class="sidebar-link">Amazon Echo Control</a></li><li><a href="/v2.4/addons/bindings/anel1/" class="sidebar-link">Anel NET-PwrCtrl</a></li><li><a href="/v2.4/addons/bindings/asterisk1/" class="sidebar-link">Asterisk</a></li><li><a href="/v2.4/addons/bindings/astro/" class="sidebar-link">Astro</a></li><li><a href="/v2.4/addons/bindings/atlona/" class="sidebar-link">Atlona</a></li><li><a href="/v2.4/addons/bindings/autelis/" class="sidebar-link">Autelis Pool Control</a></li><li><a href="/v2.4/addons/bindings/avmfritz/" class="sidebar-link">AVM FRITZ!</a></li><li><a href="/v2.4/addons/bindings/wemo/" class="sidebar-link">Belkin Wemo</a></li><li><a href="/v2.4/addons/bindings/benqprojector1/" class="sidebar-link">BenQ Projector</a></li><li><a href="/v2.4/addons/bindings/bigassfan/" class="sidebar-link">BigAssFan</a></li><li><a href="/v2.4/addons/bindings/bluetooth/" class="sidebar-link">Bluetooth</a></li><li><a href="/v2.4/addons/bindings/boschindego/" class="sidebar-link">Bosch Indego</a></li><li><a href="/v2.4/addons/bindings/bosesoundtouch/" class="sidebar-link">Bose SoundTouch</a></li><li><a href="/v2.4/addons/bindings/bticino1/" class="sidebar-link">Bticino</a></li><li><a href="/v2.4/addons/bindings/caldav-command1/" class="sidebar-link">CalDAV Command</a></li><li><a href="/v2.4/addons/bindings/caldav-personal1/" class="sidebar-link">CalDAV Personal</a></li><li><a href="/v2.4/addons/bindings/cardio2e1/" class="sidebar-link">Cardio2e</a></li><li><a href="/v2.4/addons/bindings/myq1/" class="sidebar-link">Chamberlain MyQ</a></li><li><a href="/v2.4/addons/bindings/chromecast/" class="sidebar-link">Chromecast</a></li><li><a href="/v2.4/addons/bindings/cm11a/" class="sidebar-link">Cm11a (X10 controller)</a></li><li><a href="/v2.4/addons/bindings/comfoair1/" class="sidebar-link">ComfoAir</a></li><li><a href="/v2.4/addons/bindings/configadmin1/" class="sidebar-link">ConfigAdmin</a></li><li><a href="/v2.4/addons/bindings/coolmasternet/" class="sidebar-link">CoolMasterNet</a></li><li><a href="/v2.4/addons/bindings/cups1/" class="sidebar-link">CUPS</a></li><li><a href="/v2.4/addons/bindings/dlinksmarthome/" class="sidebar-link">D-Link Smart Home</a></li><li><a href="/v2.4/addons/bindings/daikin1/" class="sidebar-link">Daikin</a></li><li><a href="/v2.4/addons/bindings/davis1/" class="sidebar-link">Davis</a></li><li><a href="/v2.4/addons/bindings/ddwrt1/" class="sidebar-link">DD-WRT</a></li><li><a href="/v2.4/addons/bindings/denon1/" class="sidebar-link">Denon</a></li><li><a href="/v2.4/addons/bindings/denonmarantz/" class="sidebar-link">Denon / Marantz</a></li><li><a href="/v2.4/addons/bindings/digitalstrom/" class="sidebar-link">digitalSTROM</a></li><li><a href="/v2.4/addons/bindings/diyonxbee1/" class="sidebar-link">DIYOnXBee</a></li><li><a href="/v2.4/addons/bindings/dmx/" class="sidebar-link">DMX</a></li><li><a href="/v2.4/addons/bindings/deconz/" class="sidebar-link">Dresden Elektronik deCONZ</a></li><li><a href="/v2.4/addons/bindings/dscalarm/" class="sidebar-link">DSC Alarm</a></li><li><a href="/v2.4/addons/bindings/dsmr/" class="sidebar-link">DSMR</a></li><li><a href="/v2.4/addons/bindings/ebus1/" class="sidebar-link">eBUS</a></li><li><a href="/v2.4/addons/bindings/ecobee1/" class="sidebar-link">Ecobee</a></li><li><a href="/v2.4/addons/bindings/ecotouch1/" class="sidebar-link">EcoTouch</a></li><li><a href="/v2.4/addons/bindings/ekey1/" class="sidebar-link">ekey</a></li><li><a href="/v2.4/addons/bindings/energenie1/" class="sidebar-link">Energenie</a></li><li><a href="/v2.4/addons/bindings/enocean/" class="sidebar-link">EnOcean</a></li><li><a href="/v2.4/addons/bindings/enphaseenergy1/" class="sidebar-link">Enphase Energy</a></li><li><a href="/v2.4/addons/bindings/epsonprojector1/" class="sidebar-link">Epson Projector</a></li><li><a href="/v2.4/addons/bindings/evohome/" class="sidebar-link">evohome</a></li><li><a href="/v2.4/addons/bindings/exec/" class="sidebar-link">Exec</a></li><li><a href="/v2.4/addons/bindings/expire1/" class="sidebar-link">Expire</a></li><li><a href="/v2.4/addons/bindings/fatekplc1/" class="sidebar-link">Fatek PLC</a></li><li><a href="/v2.4/addons/bindings/feed/" class="sidebar-link">Feed</a></li><li><a href="/v2.4/addons/bindings/feican/" class="sidebar-link">Feican</a></li><li><a href="/v2.4/addons/bindings/fht1/" class="sidebar-link">FHT</a></li><li><a href="/v2.4/addons/bindings/folding/" class="sidebar-link">Folding@home</a></li><li><a href="/v2.4/addons/bindings/freebox/" class="sidebar-link">Freebox</a></li><li><a href="/v2.4/addons/bindings/freeswitch1/" class="sidebar-link">FreeSWITCH</a></li><li><a href="/v2.4/addons/bindings/fritzaha1/" class="sidebar-link">Fritz AHA</a></li><li><a href="/v2.4/addons/bindings/fritzbox1/" class="sidebar-link">Fritz!Box</a></li><li><a href="/v2.4/addons/bindings/fritzboxtr0641/" class="sidebar-link">Fritzbox (using TR064 protocol)</a></li><li><a href="/v2.4/addons/bindings/fronius/" class="sidebar-link">Fronius</a></li><li><a href="/v2.4/addons/bindings/frontiersiliconradio1/" class="sidebar-link">Frontier Silicon Radio</a></li><li><a href="/v2.4/addons/bindings/fsinternetradio/" class="sidebar-link">FS Internet Radio</a></li><li><a href="/v2.4/addons/bindings/fs201/" class="sidebar-link">FS20</a></li><li><a href="/v2.4/addons/bindings/ftpupload/" class="sidebar-link">FTP Upload</a></li><li><a href="/v2.4/addons/bindings/garadget1/" class="sidebar-link">Garadget</a></li><li><a href="/v2.4/addons/bindings/gardena/" class="sidebar-link">Gardena</a></li><li><a href="/v2.4/addons/bindings/gc100ir1/" class="sidebar-link">Global Cache IR</a></li><li><a href="/v2.4/addons/bindings/globalcache/" class="sidebar-link">GlobalCache</a></li><li><a href="/v2.4/addons/bindings/gpio1/" class="sidebar-link">GPIO</a></li><li><a href="/v2.4/addons/bindings/gpstracker/" class="sidebar-link">GPSTracker</a></li><li><a href="/v2.4/addons/bindings/groheondus/" class="sidebar-link">GROHE ONDUS</a></li><li><a href="/v2.4/addons/bindings/omnilink1/" class="sidebar-link">HAI/Leviton Omni and Lumina</a></li><li><a href="/v2.4/addons/bindings/hdanywhere/" class="sidebar-link">HDanywhere</a></li><li><a href="/v2.4/addons/bindings/heatmiser1/" class="sidebar-link">Heatmiser</a></li><li><a href="/v2.4/addons/bindings/helios/" class="sidebar-link">Helios</a></li><li><a href="/v2.4/addons/bindings/hms1/" class="sidebar-link">HMS</a></li><li><a href="/v2.4/addons/bindings/homematic/" class="sidebar-link">Homematic</a></li><li><a href="/v2.4/addons/bindings/horizon1/" class="sidebar-link">Horizon mediabox</a></li><li><a href="/v2.4/addons/bindings/http1/" class="sidebar-link">HTTP</a></li><li><a href="/v2.4/addons/bindings/hdpowerview/" class="sidebar-link">Hunter Douglas PowerView</a></li><li><a href="/v2.4/addons/bindings/hyperion/" class="sidebar-link">Hyperion</a></li><li><a href="/v2.4/addons/bindings/icloud/" class="sidebar-link">iCloud</a></li><li><a href="/v2.4/addons/bindings/iec6205621meter1/" class="sidebar-link">IEC 62056-21 Meter</a></li><li><a href="/v2.4/addons/bindings/ihc1/" class="sidebar-link">IHC / ELKO</a></li><li><a href="/v2.4/addons/bindings/innogysmarthome/" class="sidebar-link">innogy SmartHome</a></li><li><a href="/v2.4/addons/bindings/insteonhub1/" class="sidebar-link">Insteon Hub</a></li><li><a href="/v2.4/addons/bindings/insteonplm1/" class="sidebar-link">Insteon PLM</a></li><li><a href="/v2.4/addons/bindings/intertechno1/" class="sidebar-link">Intertechno</a></li><li><a href="/v2.4/addons/bindings/ipp/" class="sidebar-link">IPP</a></li><li><a href="/v2.4/addons/bindings/ipx8001/" class="sidebar-link">IPX800</a></li><li><a href="/v2.4/addons/bindings/irtrans/" class="sidebar-link">IRtrans</a></li><li><a href="/v2.4/addons/bindings/isy1/" class="sidebar-link">ISY</a></li><li><a href="/v2.4/addons/bindings/jeelink/" class="sidebar-link">Jeelink</a></li><li><a href="/v2.4/addons/bindings/jointspace1/" class="sidebar-link">jointSPACE</a></li><li><a href="/v2.4/addons/bindings/keba/" class="sidebar-link">Keba</a></li><li><a href="/v2.4/addons/bindings/km200/" class="sidebar-link">KM200</a></li><li><a href="/v2.4/addons/bindings/knx/" class="sidebar-link">KNX</a></li><li><a href="/v2.4/addons/bindings/kodi/" class="sidebar-link">Kodi</a></li><li><a href="/v2.4/addons/bindings/konnected/" class="sidebar-link">Konnected</a></li><li><a href="/v2.4/addons/bindings/kostalinverter/" class="sidebar-link">Kostal Inverter</a></li><li><a href="/v2.4/addons/bindings/koubachi1/" class="sidebar-link">Koubachi</a></li><li><a href="/v2.4/addons/bindings/lametrictime/" class="sidebar-link">LaMetric</a></li><li><a href="/v2.4/addons/bindings/lcn1/" class="sidebar-link">LCN</a></li><li><a href="/v2.4/addons/bindings/leapmotion/" class="sidebar-link">Leap Motion</a></li><li><a href="/v2.4/addons/bindings/lgtv1/" class="sidebar-link">LG TV</a></li><li><a href="/v2.4/addons/bindings/lgtvserial/" class="sidebar-link">LG TV control using serial protocol</a></li><li><a href="/v2.4/addons/bindings/lgwebos/" class="sidebar-link">LG webOS</a></li><li><a href="/v2.4/addons/bindings/lifx/" class="sidebar-link">LIFX</a></li><li><a href="/v2.4/addons/bindings/lightwaverf1/" class="sidebar-link">LightwaveRF</a></li><li><a href="/v2.4/addons/bindings/lirc/" class="sidebar-link">LIRC</a></li><li><a href="/v2.4/addons/bindings/logreader/" class="sidebar-link">Log Reader</a></li><li><a href="/v2.4/addons/bindings/harmonyhub/" class="sidebar-link">Logitech Harmony Hub</a></li><li><a href="/v2.4/addons/bindings/squeezebox/" class="sidebar-link">Logitech Squeezebox</a></li><li><a href="/v2.4/addons/bindings/loxone/" class="sidebar-link">Loxone</a></li><li><a href="/v2.4/addons/bindings/lutron/" class="sidebar-link">Lutron</a></li><li><a href="/v2.4/addons/bindings/mailcontrol1/" class="sidebar-link">MailControl</a></li><li><a href="/v2.4/addons/bindings/max/" class="sidebar-link">MAX!</a></li><li><a href="/v2.4/addons/bindings/maxcube1/" class="sidebar-link">MAX!Cube</a></li><li><a href="/v2.4/addons/bindings/maxcul1/" class="sidebar-link">MAX!CUL</a></li><li><a href="/v2.4/addons/bindings/mcp23017/" class="sidebar-link">MCP23017</a></li><li><a href="/v2.4/addons/bindings/mcp230171/" class="sidebar-link">MCP23017</a></li><li><a href="/v2.4/addons/bindings/mcp34241/" class="sidebar-link">MCP3424</a></li><li><a href="/v2.4/addons/bindings/meteoblue/" class="sidebar-link">meteoblue</a></li><li><a href="/v2.4/addons/bindings/meteostick/" class="sidebar-link">Meteostick</a></li><li><a href="/v2.4/addons/bindings/miele/" class="sidebar-link">Miele@home</a></li><li><a href="/v2.4/addons/bindings/milight/" class="sidebar-link">Milight/Easybulb/Limitless</a></li><li><a href="/v2.4/addons/bindings/minecraft/" class="sidebar-link">Minecraft</a></li><li><a href="/v2.4/addons/bindings/mios1/" class="sidebar-link">MiOS Bridge</a></li><li><a href="/v2.4/addons/bindings/mochadx101/" class="sidebar-link">Mochad X10</a></li><li><a href="/v2.4/addons/bindings/modbus/" class="sidebar-link">Modbus</a></li><li><a href="/v2.4/addons/bindings/mpd1/" class="sidebar-link">MPD</a></li><li><a href="/v2.4/addons/bindings/mqtt/" class="sidebar-link">MQTT</a></li><li><a href="/v2.4/addons/bindings/mystromecopower1/" class="sidebar-link">Mystrom Eco Power</a></li><li><a href="/v2.4/addons/bindings/neato/" class="sidebar-link">Neato</a></li><li><a href="/v2.4/addons/bindings/neeo/" class="sidebar-link">NEEO</a></li><li><a href="/v2.4/addons/bindings/neohub1/" class="sidebar-link">NeoHub</a></li><li><a href="/v2.4/addons/bindings/nest/" class="sidebar-link">Nest</a></li><li><a href="/v2.4/addons/bindings/netatmo/" class="sidebar-link">Netatmo</a></li><li><a href="/v2.4/addons/bindings/network/" class="sidebar-link">Network</a></li><li><a href="/v2.4/addons/bindings/networkhealth1/" class="sidebar-link">Network Health</a></li><li><a href="/v2.4/addons/bindings/networkupstools1/" class="sidebar-link">Network UPS Tools</a></li><li><a href="/v2.4/addons/bindings/nibeheatpump/" class="sidebar-link">Nibe Heatpump</a></li><li><a href="/v2.4/addons/bindings/nibeuplink/" class="sidebar-link">NibeUplink</a></li><li><a href="/v2.4/addons/bindings/nikohomecontrol/" class="sidebar-link">Niko Home Control</a></li><li><a href="/v2.4/addons/bindings/nikobus1/" class="sidebar-link">Nikobus</a></li><li><a href="/v2.4/addons/bindings/novelanheatpump1/" class="sidebar-link">Novelan/Luxtronic Heat Pump</a></li><li><a href="/v2.4/addons/bindings/ntp/" class="sidebar-link">NTP</a></li><li><a href="/v2.4/addons/bindings/nuki/" class="sidebar-link">Nuki</a></li><li><a href="/v2.4/addons/bindings/oceanic/" class="sidebar-link">Oceanic</a></li><li><a href="/v2.4/addons/bindings/onebusaway/" class="sidebar-link">OneBusAway</a></li><li><a href="/v2.4/addons/bindings/onewire/" class="sidebar-link">OneWire</a></li><li><a href="/v2.4/addons/bindings/onewiregpio/" class="sidebar-link">OneWire GPIO</a></li><li><a href="/v2.4/addons/bindings/onkyo/" class="sidebar-link">Onkyo</a></li><li><a href="/v2.4/addons/bindings/openenergymonitor1/" class="sidebar-link">Open Energy Monitor</a></li><li><a href="/v2.4/addons/bindings/openuv/" class="sidebar-link">Open UV</a></li><li><a href="/v2.4/addons/bindings/openpaths1/" class="sidebar-link">OpenPaths</a></li><li><a href="/v2.4/addons/bindings/opensprinkler/" class="sidebar-link">OpenSprinkler</a></li><li><a href="/v2.4/addons/bindings/openweathermap/" class="sidebar-link">OpenWeatherMap</a></li><li><a href="/v2.4/addons/bindings/orvibo/" class="sidebar-link">Orvibo</a></li><li><a href="/v2.4/addons/bindings/mqttitude1/" class="sidebar-link">OwnTracks (formerly MQTTitude)</a></li><li><a href="/v2.4/addons/bindings/owserver1/" class="sidebar-link">OWServer</a></li><li><a href="/v2.4/addons/bindings/panasonictv1/" class="sidebar-link">Panasonic TV</a></li><li><a href="/v2.4/addons/bindings/panstamp1/" class="sidebar-link">panStamp</a></li><li><a href="/v2.4/addons/bindings/pentair/" class="sidebar-link">Pentair Pool</a></li><li><a href="/v2.4/addons/bindings/phc/" class="sidebar-link">PHC</a></li><li><a href="/v2.4/addons/bindings/hue/" class="sidebar-link">Philips Hue</a></li><li><a href="/v2.4/addons/bindings/sapp1/" class="sidebar-link">Picnet Sapp</a></li><li><a href="/v2.4/addons/bindings/piface1/" class="sidebar-link">Piface</a></li><li><a href="/v2.4/addons/bindings/pilight1/" class="sidebar-link">pilight</a></li><li><a href="/v2.4/addons/bindings/pioneeravr/" class="sidebar-link">Pioneer AVR</a></li><li><a href="/v2.4/addons/bindings/plcbus1/" class="sidebar-link">PLCBus</a></li><li><a href="/v2.4/addons/bindings/plclogo/" class="sidebar-link">PLCLogo</a></li><li><a href="/v2.4/addons/bindings/plex1/" class="sidebar-link">Plex</a></li><li><a href="/v2.4/addons/bindings/plugwise/" class="sidebar-link">Plugwise</a></li><li><a href="/v2.4/addons/bindings/powerdoglocalapi1/" class="sidebar-link">PowerDog Local API</a></li><li><a href="/v2.4/addons/bindings/powermax/" class="sidebar-link">Powermax</a></li><li><a href="/v2.4/addons/bindings/primare1/" class="sidebar-link">Primare</a></li><li><a href="/v2.4/addons/bindings/pulseaudio/" class="sidebar-link">Pulseaudio</a></li><li><a href="/v2.4/addons/bindings/rpircswitch1/" class="sidebar-link">Raspberry Pi RC Switch</a></li><li><a href="/v2.4/addons/bindings/regoheatpump/" class="sidebar-link">RegoHeatPump</a></li><li><a href="/v2.4/addons/bindings/rfxcom/" class="sidebar-link">RFXCOM</a></li><li><a href="/v2.4/addons/bindings/rme/" class="sidebar-link">RME</a></li><li><a href="/v2.4/addons/bindings/robonect/" class="sidebar-link">Robonect</a></li><li><a href="/v2.4/addons/bindings/rotelra1x/" class="sidebar-link">Rotel Amplifier</a></li><li><a href="/v2.4/addons/bindings/russound/" class="sidebar-link">Russound</a></li><li><a href="/v2.4/addons/bindings/rwesmarthome1/" class="sidebar-link">RWE SmartHome</a></li><li><a href="/v2.4/addons/bindings/sagercaster1/" class="sidebar-link">Sager Weathercaster</a></li><li><a href="/v2.4/addons/bindings/sallegra1/" class="sidebar-link">Sallegra</a></li><li><a href="/v2.4/addons/bindings/samsungac1/" class="sidebar-link">Samsung Air Conditioner</a></li><li><a href="/v2.4/addons/bindings/samsungtv/" class="sidebar-link">Samsung TV</a></li><li><a href="/v2.4/addons/bindings/satel/" class="sidebar-link">Satel Integra Alarm System</a></li><li><a href="/v2.4/addons/bindings/seneye/" class="sidebar-link">Seneye</a></li><li><a href="/v2.4/addons/bindings/sensebox/" class="sidebar-link">senseBox</a></li><li><a href="/v2.4/addons/bindings/serial1/" class="sidebar-link">Serial</a></li><li><a href="/v2.4/addons/bindings/serialbutton/" class="sidebar-link">Serial Button</a></li><li><a href="/v2.4/addons/bindings/silvercrestwifisocket/" class="sidebar-link">Silvercrest Wifi Plug</a></li><li><a href="/v2.4/addons/bindings/sleepiq/" class="sidebar-link">SleepIQ</a></li><li><a href="/v2.4/addons/bindings/smaenergymeter/" class="sidebar-link">SMA Energy Meter</a></li><li><a href="/v2.4/addons/bindings/smarthomatic1/" class="sidebar-link">Smarthomatic</a></li><li><a href="/v2.4/addons/bindings/smartmeter/" class="sidebar-link">SmartMeter</a></li><li><a href="/v2.4/addons/bindings/snmp1/" class="sidebar-link">SNMP</a></li><li><a href="/v2.4/addons/bindings/solarlog/" class="sidebar-link">Solar-Log</a></li><li><a href="/v2.4/addons/bindings/solaredge/" class="sidebar-link">SolarEdge</a></li><li><a href="/v2.4/addons/bindings/somfytahoma/" class="sidebar-link">Somfy Tahoma</a></li><li><a href="/v2.4/addons/bindings/urtsi/" class="sidebar-link">Somfy URTSI II</a></li><li><a href="/v2.4/addons/bindings/sonance1/" class="sidebar-link">Sonance</a></li><li><a href="/v2.4/addons/bindings/sonos/" class="sidebar-link">Sonos</a></li><li><a href="/v2.4/addons/bindings/sonyaudio/" class="sidebar-link">SonyAudio</a></li><li><a href="/v2.4/addons/bindings/souliss1/" class="sidebar-link">Souliss</a></li><li><a href="/v2.4/addons/bindings/stiebelheatpump1/" class="sidebar-link">Stiebel Eltron LWZ</a></li><li><a href="/v2.4/addons/bindings/swegonventilation1/" class="sidebar-link">Swegon Ventilation</a></li><li><a href="/v2.4/addons/bindings/synopanalyzer/" class="sidebar-link">Synop Analyzer</a></li><li><a href="/v2.4/addons/bindings/systeminfo/" class="sidebar-link">Systeminfo</a></li><li><a href="/v2.4/addons/bindings/tacmi1/" class="sidebar-link">TACmi</a></li><li><a href="/v2.4/addons/bindings/tado/" class="sidebar-link">tado°</a></li><li><a href="/v2.4/addons/bindings/tankerkoenig/" class="sidebar-link">Tankerkönig</a></li><li><a href="/v2.4/addons/bindings/tcp1/" class="sidebar-link">TCP &amp; UDP</a></li><li><a href="/v2.4/addons/bindings/tellstick/" class="sidebar-link">Tellstick</a></li><li><a href="/v2.4/addons/bindings/tesla/" class="sidebar-link">Tesla</a></li><li><a href="/v2.4/addons/bindings/tinkerforge1/" class="sidebar-link">TinkerForge</a></li><li><a href="/v2.4/addons/bindings/tivo1/" class="sidebar-link">TiVo</a></li><li><a href="/v2.4/addons/bindings/toon/" class="sidebar-link">Toon</a></li><li><a href="/v2.4/addons/bindings/tplinksmarthome/" class="sidebar-link">TP-Link Smart Home</a></li><li><a href="/v2.4/addons/bindings/tradfri/" class="sidebar-link">TRÅDFRI</a></li><li><a href="/v2.4/addons/bindings/ucprelayboard1/" class="sidebar-link">UCProjects.eu Relay Board</a></li><li><a href="/v2.4/addons/bindings/unifi/" class="sidebar-link">UniFi</a></li><li><a href="/v2.4/addons/bindings/upb1/" class="sidebar-link">UPB</a></li><li><a href="/v2.4/addons/bindings/valloxmv/" class="sidebar-link">ValloxMV</a></li><li><a href="/v2.4/addons/bindings/velbus/" class="sidebar-link">Velbus</a></li><li><a href="/v2.4/addons/bindings/k80551/" class="sidebar-link">Velleman k8055 USB IO Board</a></li><li><a href="/v2.4/addons/bindings/velux1/" class="sidebar-link">Velux</a></li><li><a href="/v2.4/addons/bindings/vdr1/" class="sidebar-link">Video Disk Recorder (VDR)</a></li><li><a href="/v2.4/addons/bindings/vitotronic/" class="sidebar-link">Vitotronic</a></li><li><a href="/v2.4/addons/bindings/wago1/" class="sidebar-link">WAGO</a></li><li><a href="/v2.4/addons/bindings/wol1/" class="sidebar-link">Wake-on-LAN</a></li><li><a href="/v2.4/addons/bindings/weather1/" class="sidebar-link">Weather</a></li><li><a href="/v2.4/addons/bindings/weatherunderground/" class="sidebar-link">WeatherUnderground</a></li><li><a href="/v2.4/addons/bindings/wifiled/" class="sidebar-link">WiFi LED</a></li><li><a href="/v2.4/addons/bindings/windcentrale/" class="sidebar-link">Windcentrale</a></li><li><a href="/v2.4/addons/bindings/withings1/" class="sidebar-link">Withings</a></li><li><a href="/v2.4/addons/bindings/wr32231/" class="sidebar-link">WR3223 ventilation controller</a></li><li><a href="/v2.4/addons/bindings/miio/" class="sidebar-link">Xiaomi Mi IO</a></li><li><a href="/v2.4/addons/bindings/mihome/" class="sidebar-link">Xiaomi Mi Smart Home</a></li><li><a href="/v2.4/addons/bindings/xpl1/" class="sidebar-link">xPL</a></li><li><a href="/v2.4/addons/bindings/yahooweather/" class="sidebar-link">YahooWeather</a></li><li><a href="/v2.4/addons/bindings/yamahareceiver/" class="sidebar-link">Yamaha Receiver</a></li><li><a href="/v2.4/addons/bindings/yeelight/" class="sidebar-link">Yeelight</a></li><li><a href="/v2.4/addons/bindings/zway/" class="sidebar-link">Z-Way</a></li><li><a href="/v2.4/addons/bindings/zibase1/" class="sidebar-link">Zibase</a></li><li><a href="/v2.4/addons/bindings/zigbee/" class="sidebar-link">ZigBee</a></li><li><a href="/v2.4/addons/bindings/zoneminder/" class="sidebar-link">Zoneminder</a></li><li><a href="/v2.4/addons/bindings/zwave/" class="sidebar-link">ZWave</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>System Integrations</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Actions</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Data Persistence</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Data Transformation</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Voice</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="modbus-binding"><a href="#modbus-binding" aria-hidden="true" class="header-anchor">#</a> Modbus Binding</h1> <div class="danger custom-block"><p class="custom-block-title">OBSOLETE BINDING</p> <p>This 1.x binding is obsolete; it has been replaced by the 2.x <a href="/v2.4/addons/bindings/modbus/">modbus</a> binding which you should use instead.</p></div> <img src="/v2.4/logos/modbus.png" class="addon-logo"> <p>The binding supports both TCP and Serial slaves. RTU, ASCII and BIN variants of Serial Modbus are supported.</p> <p>The binding can act as</p> <ul><li>Modbus TCP Client (that is, as modbus master), querying data from Modbus TCP servers (that is, modbus slaves).</li> <li>Modbus serial master, querying data from modbus serial slaves</li></ul> <p>The Modbus binding polls the slaves with an configurable poll period. openHAB commands are translated to write requests.</p> <h2 id="table-of-contents"><a href="#table-of-contents" aria-hidden="true" class="header-anchor">#</a> Table of Contents</h2> <ul><li><a href="#modbus-binding">Modbus Binding</a> <ul><li><a href="#table-of-contents">Table of Contents</a></li> <li><a href="#binding-configuration">Binding Configuration</a> <ul><li><a href="#global-configuration">Global configuration</a></li> <li><a href="#configuration-parameters-specific-to-each-slave">Configuration parameters specific to each slave</a></li> <li><a href="#advanced-connection-parameters">Advanced connection parameters</a></li></ul></li> <li><a href="#item-configuration">Item Configuration</a> <ul><li><a href="#simple-format">Simple format</a></li> <li><a href="#extended-format">Extended format</a></li> <li><a href="#item-configuration-examples">Item configuration examples</a></li></ul></li> <li><a href="#details">Details</a> <ul><li><a href="#modbus-functions-supported">Modbus functions supported</a></li> <li><a href="#comment-on-addressing">Comment on addressing</a></li> <li><a href="#many-modbus-binding-slaves-for-single-physical-slave">Many modbus binding slaves for single physical slave</a></li> <li><a href="#read-and-write-functions-modbus-slave-type">Read and write functions (modbus slave type)</a></li> <li><a href="#register-interpretation-valuetype-on-read--write">Register interpretation (valuetype) on read &amp; write</a></li></ul></li> <li><a href="#config-examples">Config Examples</a></li> <li><a href="#troubleshooting">Troubleshooting</a> <ul><li><a href="#enable-verbose-logging">Enable verbose logging</a></li></ul></li> <li><a href="#for-developers">For developers</a> <ul><li><a href="#testing-serial-implementation">Testing serial implementation</a></li> <li><a href="#testing-tcp-implementation">Testing TCP implementation</a></li> <li><a href="#writing-data">Writing data</a></li> <li><a href="#troubleshooting-1">Troubleshooting</a></li></ul></li></ul></li></ul> <h2 id="binding-configuration"><a href="#binding-configuration" aria-hidden="true" class="header-anchor">#</a> Binding Configuration</h2> <p>This binding can be configured in the file <code>services/modbus.cfg</code>.</p> <h3 id="global-configuration"><a href="#global-configuration" aria-hidden="true" class="header-anchor">#</a> Global configuration</h3> <p>Most of config parameters are related to specific slaves, but some are global and thus affect all slaves.</p> <table><thead><tr><th>Property</th> <th>Default</th> <th style="text-align:center">Required</th> <th>Description</th></tr></thead> <tbody><tr><td>poll</td> <td>200</td> <td style="text-align:center">No</td> <td><strong>Poll period (optional)</strong><br> Frequency of polling Modbus slaves. Note that the value is in milliseconds! For example, <code>poll=1000</code> makes the binding poll Modbus slaves once per second.</td></tr> <tr><td>writemultipleregisters</td> <td>false</td> <td style="text-align:center">No</td> <td><strong>Function code to use when writing holding registers (optional)</strong><br>Binding can be configured to use FC 16 (<em>Write Multiple Holding Registers</em>) over FC 6 (<em>Write Single Holding Register</em>) when writing holding register items (see above).  This is optional and default is <code>false</code>. For example, <code>writemultipleregisters=true</code> makes the binding to use FC16 when writing holding registers.</td></tr></tbody></table> <h3 id="configuration-parameters-specific-to-each-slave"><a href="#configuration-parameters-specific-to-each-slave" aria-hidden="true" class="header-anchor">#</a> Configuration parameters specific to each slave</h3> <p>The slaves are configured using key value pairs in openHAB config file. Each slave (identified by the slave name) in the config corresponds to a single modbus read request. Note that it might be necessary to define many &quot;slaves&quot; in openHAB configuration to read all data from a single physical modbus slave.</p> <p>The configuration parameters have the following pattern:</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;slave-type&gt;.&lt;slave-name&gt;.&lt;slave-parameter-name&gt;=&lt;slave-parameter-value&gt;
</code></pre></div><p>where:</p> <ul><li><code>&lt;slave-type&gt;</code> can be either &quot;tcp&quot; or &quot;serial&quot; depending on the type of this Modbus slave</li> <li><code>&lt;slave-name&gt;</code> is unique name per slave you are connecting to. Used in openHAB configuration to refer to the slave.</li> <li><code>&lt;slave-parameter-name&gt;</code> identifies the parameter to configure</li> <li><code>&lt;slave-parameter-value&gt;</code> is the value of the parameter</li></ul> <p>Valid slave parameters are</p> <table><thead><tr><th>Property</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>connection</td> <td>mandatory</td> <td>Connection string for the slave.<br><br><strong>TCP slaves</strong> use the form <code>host_ip[:port]</code> e.g. <code>192.168.1.55</code> or <code>192.168.1.55:511</code>. If you omit port, default <code>502</code> will be used.<br><br>For <strong>serial connections</strong> use the form <code>port:[:baud:[dataBits:[parity:[stopBits:[encoding]]]]]</code>, e.g. <code>/dev/ttyS0:38400:8:none:1:rtu</code> (read from <code>/dev/ttyS0</code> using baud rate of 38400, 8 databits, no parity, 1 stopbits, and rtu encoding. Another minimal example is <code>/dev/ttyS0:38400</code> where all optional parameters except baud rate will get their default values.<br><br><code>port</code> refers to COM port name on Windows and serial device path in *nix. Optionally one can configure one or more of the serial parameters: baud (default <code>9600</code>), dataBits (default <code>8</code>), parity (default <code>none</code>), stopBits (default <code>1</code>), encoding (default <code>ascii</code>). <br>Options for the optional serial parameters are as follows: parity={<code>even</code>, <code>odd</code>}; encoding={<code>ascii</code>, <code>rtu</code>, <code>bin</code>}.</td></tr> <tr><td>id</td> <td>optional</td> <td>slave id, default <code>1</code>. Also known as <em>Address</em>, <em>Station address</em>, or <em>Unit identifier</em>, see <a href="https://en.wikipedia.org/wiki/Modbus" target="_blank" rel="noopener noreferrer">Wikipedia<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="http://www.simplymodbus.ca/index.html" target="_blank" rel="noopener noreferrer">simplymodbus<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> articles for more information</td></tr> <tr><td>type</td> <td>mandatory</td> <td>object type. Dictates the function codes used for read and write. See below for more information. Can be either <code>coil</code>, <code>discrete</code>, <code>holding</code>, or <code>input</code>.</td></tr> <tr><td>start</td> <td>optional</td> <td>address of first coil/discrete input/register to read. Default is 0. The address is directly passed to the corresponding Modbus request, and thus is zero-based. See below for more information on the addressing.</td></tr> <tr><td>length</td> <td>mandatory</td> <td>number of <em>data items</em> to read. <em>Data items</em> here refers to registers, coils or discrete inputs depending on the slave type. For example, if the goal is to read one item with <code>valuetype=int32</code>, one needs to read two registers (2 * 16bit = 32bit), thus <code>length = 2</code>. If three coils are of interest, one should specify <code>length = 3</code></td></tr> <tr><td>valuetype</td> <td>optional</td> <td>tells how interpret the register data. For details, consult <a href="#register-interpretation-valuetype-on-read--write">Register interpretation (valuetype) on read &amp; write</a>.</td></tr> <tr><td>updateunchangeditems</td> <td>optional</td> <td>*<em>Since 1.9.0</em>. <code>true</code> or <code>false</code>. Controls whether the binding sends an update event on every successful poll (<code>true</code>) or only if the state of the item actually changes (<code>false</code>).  Default is <code>false</code>. When polling many items with high poll frequency, setting this parameter to <code>true</code> may cause significant CPU usage.</td></tr> <tr><td>postundefinedonreaderror</td> <td>optional</td> <td><strong>Since 1.9.0</strong>. <code>true</code> or <code>false</code>. Controls whether the binding sends <code>Undefined</code> (<code>UnDefType.UNDEF</code>) to the items associated with this slave when a read error occurs. Here read error refers to connection issues (cannot establish connection), I/O error (e.g. uninterrupted connection, unexpected EOF), <a href="http://www.simplymodbus.ca/exceptions.htm" target="_blank" rel="noopener noreferrer">modbus protocol exceptions<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> (e.g. &quot;Illegal data address&quot;), or response transaction id not matching the request. Note that when <code>updateunchangeditems</code> is enabled, the <code>Undefined</code> is sent only once on errors, unless the slave recovers from the error.</td></tr></tbody></table> <h3 id="advanced-connection-parameters"><a href="#advanced-connection-parameters" aria-hidden="true" class="header-anchor">#</a> Advanced connection parameters</h3> <p>Since 1.9.0, <code>connection</code> parameter can take additional colon (<code>:</code>) separated parameters:</p> <ul><li>For TCP slave the new format for connection parameter is: <code>host_ip[:port[:interTransactionDelayMillis[:reconnectAfterMillis[:interConnectDelayMillis[:connectMaxTries[:connectTimeout]]]]]]</code>.</li> <li>For the serial slaves the new format is: <code>port[:baud[:dataBits[:parity[:stopBits[:encoding[:interTransactionDelayMillis[:receiveTimeoutMillis[:flowControlIn[:flowControlOut]]]]]]]]</code>.</li></ul> <p>Explanation of these new parameters</p> <ul><li><code>interTransactionDelayMillis</code>: Time to wait between consecutive modbus transactions (to the same host or serial device), in milliseconds. Each modbus transaction corresponds to read or write operation. Default 35 for serial slaves and 60 for tcp slaves.</li> <li><code>reconnectAfterMillis</code>: Time after which connection is disconnected and re-established, in milliseconds. Default 0 (closes connection after every transaction).</li> <li><code>interConnectDelayMillis</code>: Time to wait between consecutive connection attempts (to the same host or ip), in milliseconds. Default 0.</li> <li><code>connectMaxTries</code>: Maximum tries when establishing connection. Default 3.</li> <li><code>connectTimeout</code>: Maximum time to wait for connection establishment, in milliseconds. Default is zero which corresponds to infinite/OS default.</li> <li><code>receiveTimeoutMillis</code>: Maximum time to wait for a single &quot;read operation&quot; (sequence of bytes) before giving up, in milliseconds. Default 1500.</li> <li><code>flowControlIn</code>: Flow control for the input data. Default <code>none</code>. Valid values: <code>none</code>, <code>xon/xoff in</code>, <code>rts/cts in</code>.</li> <li><code>flowControlOut</code>: Flow control for the output data. Default <code>none</code>. Valid values: <code>none</code>, <code>xon/xoff out</code>, <code>rts/cts out</code>.</li></ul> <p>Most important of these is the <code>interTransactionDelayMillis</code> which ensures that Modbus RTU (serial) has enough &quot;silent time&quot; between the transactions, as required by the Modbus/RTU protocol. Furthermore it ensures that modbus slave (applies to both tcp and serial slaves) is not spammed with too many transactions, for example some PLC devices might not be able to handle many requests coming in a short time window.</p> <p>These new parameters have conservative defaults, meaning that they should work for most users. In some cases when extreme performance is required (e.g. poll period below 10ms), one might want to decrease the delay parameters, especially <code>interTransactionDelayMillis</code>. With some slower devices on might need to increase the values.</p> <p>With low baud rates and/or long read requests (that is, large <code>length</code> parameter is modbus slave definition), <a href="https://community.openhab.org/t/connection-pooling-in-modbus-binding/5246/205" target="_blank" rel="noopener noreferrer">there might be need to increase <code>receiveTimeoutMillis</code> to something larger<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, e.g. <code>5000</code>.</p> <p>Examples:</p> <ul><li><code>serial.serialslave1.connection=/dev/ttyS0:38400:8:none:1:rtu:150</code> connect to serial slave using with <code>interTransactionDelayMillis</code> of 150ms</li> <li><code>tcp.tcpslave1.connection=192.168.1.100:502:0</code> connect to tcp slave with no <code>interTransactionDelayMillis</code></li></ul> <h2 id="item-configuration"><a href="#item-configuration" aria-hidden="true" class="header-anchor">#</a> Item Configuration</h2> <p>ModbusBindingProvider provides binding for openHAB Items.</p> <p>The item configuration has two formats: simple and extended.</p> <h3 id="simple-format"><a href="#simple-format" aria-hidden="true" class="header-anchor">#</a> Simple format</h3> <p>Simple item configuration format looks like the below:</p> <div class="language- extra-class"><pre class="language-dsl"><code><span class="token keyword">Switch</span> <span class="token class-name">MySwitch</span> <span class="token string">&quot;My Modbus Switch&quot;</span><span class="token tag"> (ALL)</span> <span class="token punctuation">{</span>modbus<span class="token operator">=</span><span class="token string">&quot;slave1:5&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p>where <code>slave1</code> is the name of the slave in openhab configuration, and <code>5</code> is the reference to the coil, discrete input, input register or holding register.</p> <p>The index <code>5</code> is expressed relative to the slave <code>start</code> parameter and <code>valueType</code> parameter to determine which bits are used when interpreting the value. See also <a href="#Comment-on-addressing">Comment on addressing</a> and <a href="#Register-interpretation-(valuetype)-on-read-&-write">Register interpretation (valuetype) on read &amp; write</a> for more details on this.</p> <div class="language- extra-class"><pre class="language-dsl"><code><span class="token keyword">Switch</span> <span class="token class-name">MySwitch</span> <span class="token string">&quot;My Modbus Switch&quot;</span><span class="token tag"> (ALL)</span> <span class="token punctuation">{</span>modbus<span class="token operator">=</span><span class="token string">&quot;slave1:&lt;6:&gt;7&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p>In this case data is read from &quot;index 6&quot;, while data is written to &quot;index 7&quot;.</p> <h3 id="extended-format"><a href="#extended-format" aria-hidden="true" class="header-anchor">#</a> Extended format</h3> <p>In addition to simple format, a new configuration syntax was introduced in version 1.10.0.</p> <p>This gives more freedom to the user. Among other things it enables</p> <ul><li>specify transformation to use on read/write</li> <li>mark item as read-only (received openHAB commands are not processed)</li> <li>mark item as write-only (polled data do not change the item state)</li> <li>overriding <code>valueType</code> per-item basis (allows to read many registers at once and then interpret them using different value types)</li> <li>processing only certain commands (on write)</li> <li>processing only certain state updates (on read) based on value</li></ul> <p>The extended format looks like:</p> <p>(for read)</p> <div class="language-ini extra-class"><pre class="language-ini"><code><span class="token constant">&lt;[slaveName:readIndex:trigger</span><span class="token attr-value"><span class="token punctuation">=</span>TRIGGER, transformation=TRANSFORMATION, valueType=VALUETYPE]</span>
</code></pre></div><p>(for write)</p> <div class="language-ini extra-class"><pre class="language-ini"><code><span class="token constant">&gt;[slaveName:writeIndex:trigger</span><span class="token attr-value"><span class="token punctuation">=</span>TRIGGER, transformation=TRANSFORMATION, valueType=VALUETYPE]</span>
</code></pre></div><p>Read and write entries can be combined, and there can be zero or more read/write entries. All the keyword arguments after index are optional. Defaults are such that they correspond to binding behaviour currently. Multiple read/write definitions can be specified with commas (whitespace allowed as well).</p> <p>Example of having multiple entries:</p> <div class="language-ini extra-class"><pre class="language-ini"><code>&lt;[slaveName:0], &gt;[slaveName:0], &gt;[slaveName:1]
</code></pre></div><p>The above item config would read from &quot;index 0&quot;, and write to both &quot;index 0&quot; and &quot;index 1&quot;.</p> <p>Similar to simple configuration syntax, place the configuration string in <code>modbus</code> parameter of the item. For example,</p> <div class="language-ini extra-class"><pre class="language-dsl"><code><span class="token keyword">Switch</span> <span class="token class-name">MySwitch</span> <span class="token string">&quot;My Modbus Switch&quot;</span><span class="token tag"> (ALL)</span> <span class="token punctuation">{</span>modbus<span class="token operator">=</span><span class="token string">&quot;&lt;[slaveName:0], &gt;[slaveName:0], &gt;[slaveName:1]&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p>Explanation of different keyword arguments</p> <ul><li><code>trigger</code>: a string matching command (write definitions) or state (read definitions). If the command/state does not match the trigger value, the command/state is not processed by this write/read definition.</li> <li>use <code>*</code> to process all (overrides slave's <code>updateunchangeditems</code>)</li> <li>use <code>CHANGED</code> (case-insensitive) with read entries to handle only changed values (similar to slave setting <code>updateunchangeditems=false</code>).</li> <li>use <code>default</code> (case-insensitive) to handle all or just the changed values, depending on slave <code>updateunchangeditems</code> parameter</li> <li>if omitted, uses <code>default</code>.</li> <li><code>transformation</code>: transformation to use interpreting the result.</li> <li>use <code>default</code> (case-insensitive) to communicate that no transformation is done and value should be passed as is</li> <li>use <code>SERVICE(ARG)</code> to refer to transformation service.</li> <li>any other value than the above types will be interpreted as static text, in which case the actual content of the command/polled value is ignored.</li> <li>if omitted, uses <code>default</code>.</li> <li><code>valueType</code>: valueType to use when interpreting the register</li> <li>use <code>default</code> (case-insensitive) to refer to slave definition's valueType</li> <li>if omitted, uses <code>default</code>. Allows to poll the data only once with a single request, and then interpret pieces of data with the correct value type.</li></ul> <p>The transformations can convert to string representing command and state types of the item. You can also always use numbers (that is, <code>DecimalType</code>), <code>ON</code>/<code>OFF</code> and <code>OPEN</code>/<code>CLOSED</code>. The transformation can be quoted in case of special characters (e.g. <code>=</code> or <code>,</code>). One can use java-like escaping inside the quotes for complex transformations such as regular expressions (e.g. <code>\&quot;</code>).</p> <h3 id="item-configuration-examples"><a href="#item-configuration-examples" aria-hidden="true" class="header-anchor">#</a> Item configuration examples</h3> <h4 id="single-coil-register-per-item"><a href="#single-coil-register-per-item" aria-hidden="true" class="header-anchor">#</a> Single coil/register per item</h4> <div class="language-ini extra-class"><pre class="language-dsl"><code><span class="token keyword">Switch</span> <span class="token class-name">MySwitch</span> <span class="token string">&quot;My Modbus Switch&quot;</span><span class="token tag"> (ALL)</span> <span class="token punctuation">{</span>modbus<span class="token operator">=</span><span class="token string">&quot;slave1:5&quot;</span><span class="token punctuation">}</span>
</code></pre></div><ul><li>This binds MySwitch to modbus slave defined as &quot;slave1&quot; in <code>modbus.cfg</code> reading/writing to the coil (5 + slave's <code>start</code> index). The <code>5</code> is called item read index.</li> <li>If the slave is read-only, that is the <code>type</code> is <code>input</code> or <code>discrete</code>, the binding ignores any write commands.</li> <li>if the slave1 refers to registers, and after parsing using the registers as rules defined by the <code>valuetype</code>, zero value is considered as <code>OFF</code>, everything else as <code>ON</code>.</li></ul> <h4 id="separate-index-for-reading-and-writing"><a href="#separate-index-for-reading-and-writing" aria-hidden="true" class="header-anchor">#</a> Separate index for reading and writing</h4> <div class="language-ini extra-class"><pre class="language-dsl"><code><span class="token keyword">Switch</span> <span class="token class-name">MySwitch</span> <span class="token string">&quot;My Modbus Switch&quot;</span><span class="token tag"> (ALL)</span> <span class="token punctuation">{</span>modbus<span class="token operator">=</span><span class="token string">&quot;slave1:&lt;6:&gt;7&quot;</span><span class="token punctuation">}</span>
</code></pre></div><ul><li>In this case index 6 is used for reading while and commands are put to index 7.</li></ul> <h4 id="index-and-value-types"><a href="#index-and-value-types" aria-hidden="true" class="header-anchor">#</a> Index and value types</h4> <div class="language- extra-class"><pre class="language-dsl"><code><span class="token keyword">Number</span> <span class="token class-name">MyCounterH</span> <span class="token string">&quot;My Counter high [%d]&quot;</span><span class="token tag"> (All)</span> <span class="token punctuation">{</span>modbus<span class="token operator">=</span><span class="token string">&quot;slave3:0&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p>this reads counter 1 high word when valuetype=<code>int8</code> or <code>uint8</code></p> <div class="language- extra-class"><pre class="language-dsl"><code><span class="token keyword">Number</span> <span class="token class-name">MyCounterL</span> <span class="token string">&quot;My Counter low [%d]&quot;</span><span class="token tag"> (All)</span> <span class="token punctuation">{</span>modbus<span class="token operator">=</span><span class="token string">&quot;slave3:1&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p>this reads counter 1 low word when valuetype=<code>int8</code> or <code>uint8</code></p> <h4 id="_32bit-floating-point-value-numbers"><a href="#_32bit-floating-point-value-numbers" aria-hidden="true" class="header-anchor">#</a> 32bit floating point value numbers</h4> <p>When using a float32 value you must use [%f] in item description.</p> <div class="language- extra-class"><pre class="language-dsl"><code><span class="token keyword">Number</span> <span class="token class-name">MyCounter</span> <span class="token string">&quot;My Counter [%f]&quot;</span><span class="token tag"> (All)</span> <span class="token punctuation">{</span>modbus<span class="token operator">=</span><span class="token string">&quot;slave5:0&quot;</span><span class="token punctuation">}</span>`
</code></pre></div><p>The above reads two registers, starting from index 0 (plus slave offset <code>start</code>).</p> <h4 id="read-only-items"><a href="#read-only-items" aria-hidden="true" class="header-anchor">#</a> Read-only items</h4> <div class="language- extra-class"><pre class="language-dsl"><code><span class="token keyword">Number</span> <span class="token class-name">NumberItem</span> <span class="token string">&quot;Number [%.1f]&quot;</span><span class="token function"> &lt;temperature&gt;</span> <span class="token punctuation">{</span>modbus<span class="token operator">=</span><span class="token string">&quot;&lt;[slave1:0]&quot;</span><span class="token punctuation">}</span>
</code></pre></div><h4 id="write-only-items"><a href="#write-only-items" aria-hidden="true" class="header-anchor">#</a> Write-only items</h4> <div class="language- extra-class"><pre class="language-dsl"><code><span class="token keyword">Number</span> <span class="token class-name">NumberItem</span> <span class="token string">&quot;Number [%.1f]&quot;</span><span class="token function"> &lt;temperature&gt;</span> <span class="token punctuation">{</span>modbus<span class="token operator">=</span><span class="token string">&quot;&gt;[slave1:0]&quot;</span><span class="token punctuation">}</span>
</code></pre></div><h4 id="set-coil-to-1-on-any-command"><a href="#set-coil-to-1-on-any-command" aria-hidden="true" class="header-anchor">#</a> Set coil to 1 on any command</h4> <p>(inspired by <a href="https://github.com/openhab/openhab1-addons/issues/4745" target="_blank" rel="noopener noreferrer">[Modbus] Coil reset only after item update to ON (OFF excepted) #4745<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>)</p> <p>Reads from index 0, writes to index 1. All writes (no matter what command) are converted to 1.</p> <div class="language- extra-class"><pre class="language-dsl"><code><span class="token keyword">Number</span> <span class="token class-name">NumberItem</span> <span class="token string">&quot;Number [%.1f]&quot;</span><span class="token function"> &lt;temperature&gt;</span> <span class="token punctuation">{</span>modbus<span class="token operator">=</span><span class="token string">&quot;&lt;[slave1:0], &gt;[slave1:1:transformation=ON]&quot;</span><span class="token punctuation">}</span>
</code></pre></div><h4 id="js-transformation-scaling"><a href="#js-transformation-scaling" aria-hidden="true" class="header-anchor">#</a> JS transformation (scaling)</h4> <p>This example multiplies the DecimalType commands by 10 when writing to modbus, and divides the values by 10 when reading from modbus.</p> <p>default.items:</p> <div class="language- extra-class"><pre class="language-dsl"><code><span class="token keyword">Number</span> <span class="token class-name">NumberItem</span> <span class="token string">&quot;Number [%.1f]&quot;</span><span class="token function"> &lt;temperature&gt;</span> <span class="token punctuation">{</span>modbus<span class="token operator">=</span><span class="token string">&quot;&gt;[slave1:0:transformation=JS(multiply10.js)], &lt;[slave1:0:transformation=JS(divide10.js)]&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p>transform/multiply10.js:</p> <div class="language- extra-class"><pre class="language-text"><code>// Wrap everything in a function
(function(i) {
    return Math.round(parseFloat(i, 10) * 10);
})(input)
// input variable contains data passed by openhab
</code></pre></div><p>transform/divide10.js:</p> <div class="language- extra-class"><pre class="language-text"><code>// Wrap everything in a function
(function(i) {
    return parseFloat(i) / 10;
})(input)
// input variable contains data passed by openhab
</code></pre></div><h4 id="rollershutter"><a href="#rollershutter" aria-hidden="true" class="header-anchor">#</a> Rollershutter</h4> <p>(inspired by <a href="https://github.com/openhab/openhab1-addons/pull/4654" target="_blank" rel="noopener noreferrer">[modbus] enhance modbus binding for rollershutter items #4654<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>)</p> <p>This is an example how different Rollershutter commands can be written to MODBUS.</p> <p>Roller shutter position is read from register 0, UP(=1)/DOWN(=-1) commands are written to register 1, and MOVE(=1)/STOP(=0) commands are written to register 2.</p> <p>default.items:</p> <div class="language- extra-class"><pre class="language-dsl"><code><span class="token keyword">Rollershutter</span> <span class="token class-name">RollershutterItem</span> <span class="token string">&quot;Roller shutter position [%.1f]&quot;</span><span class="token function"> &lt;temperature&gt;</span> <span class="token punctuation">{</span>modbus<span class="token operator">=</span><span class="token string">&quot;&lt;[slave1:0], &gt;[slave1:1:trigger=UP, transformation=1], &gt;[slave1:1:trigger=DOWN, transformation=-1], &gt;[slave1:2:trigger=MOVE, transformation=1], &gt;[slave1:2:trigger=STOP, transformation=0]&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p>default.sitemap:</p> <div class="language- extra-class"><pre class="language-dsl"><code><span class="token keyword">sitemap</span> demo <span class="token constant">label</span><span class="token operator">=</span><span class="token string">&quot;Main Menu&quot;</span> <span class="token punctuation">{</span>
    <span class="token keyword">Switch</span> <span class="token class-name">item</span><span class="token operator">=</span>RollershutterItem <span class="token class-name">label</span><span class="token operator">=</span><span class="token string">&quot;Roller shutter [(%d)]&quot;</span> <span class="token constant">mappings</span><span class="token operator">=</span><span class="token punctuation">[</span>UP<span class="token operator">=</span><span class="token string">&quot;up&quot;</span><span class="token punctuation">,</span> STOP<span class="token operator">=</span><span class="token string">&quot;X&quot;</span><span class="token punctuation">,</span> DOWN<span class="token operator">=</span><span class="token string">&quot;down&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="details"><a href="#details" aria-hidden="true" class="header-anchor">#</a> Details</h2> <h3 id="modbus-functions-supported"><a href="#modbus-functions-supported" aria-hidden="true" class="header-anchor">#</a> Modbus functions supported</h3> <h4 id="supported-modbus-object-types"><a href="#supported-modbus-object-types" aria-hidden="true" class="header-anchor">#</a> Supported Modbus object types</h4> <p>Modbus binding allows to connect to multiple Modbus slaves. The binding supports following Modbus <em>object types</em></p> <ul><li>coils, also known as <em>digital out (DO)</em> (read &amp; write)</li> <li>discrete inputs, also known as <em>digital in (DI)</em> (read)</li> <li>input registers (read)</li> <li>holding registers (read &amp; write)</li></ul> <p>Binding can be configured to interpret values stored in the 16bit registers in different ways, e.g. as signed or unsigned integer.</p> <p>For more information on these object types, please consult <a href="https://en.wikipedia.org/wiki/Modbus" target="_blank" rel="noopener noreferrer">Modbus wikipedia article<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h4 id="read-and-write-functions"><a href="#read-and-write-functions" aria-hidden="true" class="header-anchor">#</a> Read and write functions</h4> <p>Modbus specification has different operations for reading and writing different object types. These types of operations are identified by <em>function code</em>. Some devices support only certain function codes.</p> <p>For more background information, please consult <a href="https://en.wikipedia.org/wiki/Modbus" target="_blank" rel="noopener noreferrer">Modbus wikipedia article<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>The binding uses following function codes when communicating with the slaves:</p> <ul><li>read coils: function code (FC) 1 (<em>Read Coils</em>)</li> <li>write coil: FC 5  (<em>Write Single Coil</em>)</li> <li>read discrete inputs: FC 2 (<em>Read Discrete Inputs</em>)</li> <li>read input registers: FC 4 (<em>Read Input Registers</em>)</li> <li>read holding registers: FC 3 (<em>Read Multiple Holding Registers</em>)</li> <li>write holding register: FC 6 (<em>Write Single Holding Register</em>), OR  FC 16 (<em>Write Multiple Holding Registers</em>) (see note on <code>writemultipleregisters</code> configuration parameter below)</li></ul> <h3 id="comment-on-addressing"><a href="#comment-on-addressing" aria-hidden="true" class="header-anchor">#</a> Comment on addressing</h3> <p><a href="https://en.wikipedia.org/wiki/Modbus#Coil.2C_discrete_input.2C_input_register.2C_holding_register_numbers_and_addresses" target="_blank" rel="noopener noreferrer">Modbus Wikipedia article<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> summarizes this excellently:</p> <blockquote><p>In the traditional standard, [entity] numbers for those entities start with a digit, followed by a number of four digits in range 1–9,999:</p></blockquote> <blockquote><ul><li>coils numbers start with a zero and then span from 00001 to 09999</li> <li>discrete input numbers start with a one and then span from 10001 to 19999</li> <li>input register numbers start with a three and then span from 30001 to 39999</li> <li>holding register numbers start with a four and then span from 40001 to 49999</li></ul></blockquote> <blockquote><p>This translates into [entity] addresses between 0 and 9,998 in data frames.</p></blockquote> <p>The openHAB modbus binding uses data frame entity addresses when referring to modbus entities. That is, the entity address configured in modbus binding is passed to modbus protocol frame as-is. For example, modbus slave definition with <code>start=3</code>, <code>length=2</code> and <code>type=holding</code> will read modbus entities with the following numbers 40004 and 40005.</p> <h3 id="many-modbus-binding-slaves-for-single-physical-slave"><a href="#many-modbus-binding-slaves-for-single-physical-slave" aria-hidden="true" class="header-anchor">#</a> Many modbus binding slaves for single physical slave</h3> <p>One needs to configure as many modbus slaves to openHAB as there are corresponding modbus requests. For example, in order to poll status of <code>coil</code> and <code>holding</code> items from a single [physical] modbus slave, two separate modbus slave definitions need to be configured in the <code>modbus.cfg</code>. For example:</p> <div class="language- extra-class"><pre class="language-text"><code>serial.slave1.connection=/dev/pts/8:38400:8:none:1:rtu
serial.slave1.type=coil
serial.slave1.length=3

serial.slave2.connection=/dev/pts/8:38400:8:none:1:rtu
serial.slave2.type=holding
serial.slave2.length=5
</code></pre></div><p>Please note that the binding requires that all slaves connecting to the same serial port share the same connection parameters (e.g. baud-rate, parity, ..). In particular are different parameter settings considered bad practice, because they can confuse the instances (slaves) on the modbus.  For additional information, see <a href="https://community.openHAB.org/t/connection-pooling-in-modbus-binding/5246/161?u=ssalonen" target="_blank" rel="noopener noreferrer">this discussion<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> in the community forums.</p> <p>Similarly, one must have identical connection parameters for all tcp slaves connecting to same host+port.</p> <h3 id="read-and-write-functions-modbus-slave-type"><a href="#read-and-write-functions-modbus-slave-type" aria-hidden="true" class="header-anchor">#</a> Read and write functions (modbus slave type)</h3> <p>Modbus read functions</p> <ul><li><code>type=coil</code> uses function 1 &quot;Read Coil Status&quot;</li> <li><code>type=discrete</code> uses function 2 &quot;Read Input Status&quot; (readonly inputs)</li> <li><code>type=holding</code> uses function 3, &quot;Read Holding Registers&quot;</li> <li><code>type=input</code> uses function 4 &quot;Read Input Register&quot; (readonly-registers eG analogue inputs)</li></ul> <p>Modbus write functions</p> <ul><li><code>type=coil</code> uses function 5 &quot;Write Single Coil&quot;</li> <li><code>type=holding</code> uses function 6 &quot;Write Single Register&quot;, or function 16 &quot;Write Multiple registers&quot; when <code>writemultipleregisters</code> is <code>true</code></li></ul> <p>See also <a href="http://www.simplymodbus.ca" target="_blank" rel="noopener noreferrer">simplymodbus.ca<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="https://en.wikipedia.org/wiki/Modbus#Supported_function_codes" target="_blank" rel="noopener noreferrer">wikipedia article<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h3 id="register-interpretation-valuetype-on-read-write"><a href="#register-interpretation-valuetype-on-read-write" aria-hidden="true" class="header-anchor">#</a> Register interpretation (valuetype) on read &amp; write</h3> <p>Note that this section applies to register elements only (<code>holding</code> or <code>input</code> type)</p> <h4 id="read"><a href="#read" aria-hidden="true" class="header-anchor">#</a> Read</h4> <p>When the binding interprets and converts polled input registers (<code>input</code>) or holding registers (<code>holding</code>) to openHAB items, the process goes like this:</p> <ul><li><ol><li>register(s) are first parsed to a number (see below for the details, exact logic depends on <code>valuetype</code>)</li></ol></li> <li>2a. if the item is Switch or Contact: zero is converted CLOSED / OFF. Other numbers are converted to OPEN / ON.</li> <li>2b. if the item is Number: the value is used as is</li> <li><ol start="3"><li>transformation is done to the value, if configured. The transformation output (string) is parsed to state using item's accepted state types (e.g. number, or CLOSED/OPEN).</li></ol></li></ul> <p>Polled registers from the Modbus slave are converted to openHAB state. The exact conversion logic depends on <code>valuetype</code> as described below.</p> <p>Note that <em>first register</em> refers to register with address <code>start</code> (as defined in the slave definition), <em>second register</em> refers to register with address <code>start + 1</code> etc. The <em>index</em> refers to item read index, e.g. item <code>Switch MySwitch &quot;My Modbus Switch&quot; (ALL) {modbus=&quot;slave1:5&quot;}</code> has 5 as read index.</p> <p><code>valuetype=bit</code>:</p> <ul><li>a single bit is read from the registers</li> <li>indices between 0...15 (inclusive) represent bits of the first register</li> <li>indices between 16...31 (inclusive) represent bits of the second register, etc.</li> <li>index 0 refers to the least significant bit of the first register</li> <li>index 1 refers to the second least significant bit of the first register, etc.</li></ul> <p>(Note that updating a bit in a holding type register will NOT work as expected across Modbus, the whole register gets rewritten. Best to use a read-only mode, such as Contact item.  Input type registers are by definition read-only.)</p> <p><code>valuetype=int8</code>:</p> <ul><li>a byte (8 bits) from the registers is interpreted as signed integer</li> <li>index 0 refers to low byte of the first register, 1 high byte of first register</li> <li>index 2 refers to low byte of the second register, 3 high byte of second register, etc.</li> <li>it is assumed that each high and low byte is encoded in most significant bit first order</li></ul> <p><code>valuetype=uint8</code>:</p> <ul><li>same as <code>int8</code> except values are interpreted as unsigned integers</li></ul> <p><code>valuetype=int16</code>:</p> <ul><li>register with index (counting from zero) is interpreted as 16 bit signed integer.</li> <li>it is assumed that each register is encoded in most significant bit first order</li></ul> <p><code>valuetype=uint16</code>:</p> <ul><li>same as <code>int16</code> except values are interpreted as unsigned integers</li></ul> <p><code>valuetype=int32</code>:</p> <ul><li>registers (2 index) and ( 2 *index + 1) are interpreted as signed 32bit integer.</li> <li>it assumed that the first register contains the most significant 16 bits</li> <li>it is assumed that each register is encoded in most significant bit first order</li></ul> <p><code>valuetype=uint32</code>:</p> <ul><li>same as <code>int32</code> except values are interpreted as unsigned integers</li></ul> <p><code>valuetype=float32</code>:</p> <ul><li>registers (2 index) and ( 2 *index + 1) are interpreted as signed 32bit floating point number.</li> <li>it assumed that the first register contains the most significant 16 bits</li> <li>it is assumed that each register is encoded in most significant bit first order</li></ul> <h5 id="word-swapped-valuetypes-new-since-1-9-0"><a href="#word-swapped-valuetypes-new-since-1-9-0" aria-hidden="true" class="header-anchor">#</a> Word Swapped valuetypes (New since 1.9.0)</h5> <p>The MODBUS specification defines each 16bit word to be encoded as Big Endian,
but there is no specification on the order of those words within 32bit or larger data types.
The net result is that when you have a master and slave that operate with the same
Endian mode things work fine, but add a device with a different Endian mode and it is
very hard to correct. To resolve this the binding supports a second set of valuetypes
that have the words swapped.</p> <p>If you get strange values using the <code>int32</code>, <code>uint32</code> or <code>float32</code> valuetypes then just try the <code>int32_swap</code>, <code>uint32_swap</code> or <code>float32_swap</code> valuetype, depending upon what your data type is.</p> <p><code>valuetype=int32_swap</code>:</p> <ul><li>registers (2 index) and ( 2 *index + 1) are interpreted as signed 32bit integer.</li> <li>it assumed that the first register contains the least significant 16 bits</li> <li>it is assumed that each register is encoded in most significant bit first order (Big Endian)</li></ul> <p><code>valuetype=uint32_swap</code>:</p> <ul><li>same as <code>int32_swap</code> except values are interpreted as unsigned integers</li></ul> <p><code>valuetype=float32_swap</code>:</p> <ul><li>registers (2 index) and ( 2 *index + 1) are interpreted as signed 32bit floating point number.</li> <li>it assumed that the first register contains the least significant 16 bits</li> <li>it is assumed that each register is encoded in most significant bit first order (Big Endian)</li></ul> <h5 id="extra-notes"><a href="#extra-notes" aria-hidden="true" class="header-anchor">#</a> Extra notes</h5> <ul><li><code>valuetypes</code> smaller than one register (less than 16 bits) actually read the whole register, and finally extract single bit from the result.</li></ul> <h4 id="write"><a href="#write" aria-hidden="true" class="header-anchor">#</a> Write</h4> <p>When the binding processes openHAB command (e.g. sent by <code>sendCommand</code> as explained <a href="https://github.com/openhab/openhab1-addons/wiki/Actions" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>), the process goes as follows</p> <ol><li>it is checked whether the associated item is bound to holding register. If not, command is ignored.</li> <li>command goes through transformation, if configured. No matter what commands the associated item accepts, the transformation can always output number (DecimalType), OPEN/CLOSED (OpenClosedType) and ON/OFF (OnOffType).</li> <li>command is converted to 16bit integer (in <a href="https://www.cs.cornell.edu/~tomf/notes/cps104/twoscomp.html" target="_blank" rel="noopener noreferrer">two's complement format<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>). See below for details.</li> <li>the 16bits are written to the register with address <code>start</code> (as defined in the slave definition)</li></ol> <p>Conversion rules for converting command to 16bit integer</p> <ul><li>UP, ON, OPEN commands that are converter to number 1</li> <li>DOWN, OFF, CLOSED commands are converted to number 0</li> <li>Decimal commands are truncated as 32 bit integer (in 2's complement representation), and then the least significant 16 bits of this integer are extracted.</li> <li>INCREASE, DECREASE: see below</li></ul> <p>Other commands are not supported.</p> <p><strong>Note: The way Decimal commands are handled currently means that it is probably not useful to try to use Decimal commands with non-16bit <code>valuetype</code>s.</strong></p> <p>Converting INCREASE and DECREASE commands to numbers is more complicated</p> <p>(After 1.10.0)</p> <ol><li>Most recently polled state (as it has gone through the read transformations etc.) of this item is acquired</li> <li>add/subtract <code>1</code> from the state. If the state is not a number, the whole command is ignored.</li></ol> <p>(Before 1.10.0)</p> <ol><li>Register matching (<code>start</code> + read index) is interpreted as unsigned 16bit integer. Previous polled register value is used</li> <li>add/subtract <code>1</code> from the integer</li></ol> <p><strong>Note (before 1.10.0): note that INCREASE and DECREASE ignore valuetype when using the previously polled value. Thus, it is not recommended to use INCREASE and DECREASE commands with other than <code>valuetype=uint16</code></strong></p> <h4 id="modbus-rtu-over-tcp"><a href="#modbus-rtu-over-tcp" aria-hidden="true" class="header-anchor">#</a> Modbus RTU over TCP</h4> <p>Some devices uses modbus RTU over TCP. This is usually Modbus RTU encapsulation in an ethernet packet. So, those devices does not work with Modbus TCP binding since it is Modbus with a special header. Also Modbus RTU over TCP is not supported by Openhab Modbus Binding. But there is a workaround: you can use a Virtual Serial Port Server, to emulate a COM Port and Bind it with OpenHab unsing Modbus Serial.</p> <h2 id="config-examples"><a href="#config-examples" aria-hidden="true" class="header-anchor">#</a> Config Examples</h2> <p>Please take a look at <a href="https://github.com/openhab/openhab1-addons/wiki/Samples-Binding-Config" target="_blank" rel="noopener noreferrer">Samples-Binding-Config page<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> or examine to the following examples.</p> <ul><li>Minimal construction in modbus.cfg for TCP connections will look like:</li></ul> <div class="language- extra-class"><pre class="language-text"><code># read 10 coils starting from address 0
tcp.slave1.connection=192.168.1.50
tcp.slave1.length=10
tcp.slave1.type=coil
</code></pre></div><ul><li>Minimal construction in modbus.cfg for serial connections will look like:</li></ul> <div class="language- extra-class"><pre class="language-text"><code># read 10 coils starting from address 0
serial.slave1.connection=/dev/ttyUSB0
tcp.slave1.length=10
tcp.slave1.type=coil
</code></pre></div><ul><li>More complex setup could look like</li></ul> <div class="language- extra-class"><pre class="language-text"><code># Poll values very 300ms = 0.3 seconds
poll=300

# Connect to modbus slave at 192.168.1.50, port 502
tcp.slave1.connection=192.168.1.50:502
# use slave id 41 in requests
tcp.slave1.id=41
# read 32 coils (digital outputs) starting from address 0
tcp.slave1.start=0
tcp.slave1.length=32
tcp.slave1.type=coil
</code></pre></div><ul><li>Another example where coils, discrete inputs (<code>discrete</code>) and input registers (<code>input</code>) are polled from modbus tcp slave at <code>192.168.6.180</code>.</li></ul> <blockquote><p>(original example description:)
example for an moxa e1214 module in simple io mode
6 output switches starting from modbus address 0 and
6 inputs from modbus address 10000 (the function 2 implizits the modbus 10000 address range)
you only read 6 input bits and say start from 0
the moxa manual ist not right clear in this case</p></blockquote> <div class="language-ini extra-class"><pre class="language-ini"><code><span class="token constant">poll</span><span class="token attr-value"><span class="token punctuation">=</span>300</span>

# Query coils from 192.168.6.180
<span class="token constant">tcp.slave1.connection</span><span class="token attr-value"><span class="token punctuation">=</span>192.168.6.180:502</span>
<span class="token constant">tcp.slave1.id</span><span class="token attr-value"><span class="token punctuation">=</span>1</span>
<span class="token constant">tcp.slave1.start</span><span class="token attr-value"><span class="token punctuation">=</span>0</span>
<span class="token constant">tcp.slave1.length</span><span class="token attr-value"><span class="token punctuation">=</span>6</span>
<span class="token constant">tcp.slave1.type</span><span class="token attr-value"><span class="token punctuation">=</span>coil</span>

# Query discrete inputs from 192.168.6.180
<span class="token constant">tcp.slave2.connection</span><span class="token attr-value"><span class="token punctuation">=</span>192.168.6.180:502</span>
<span class="token constant">tcp.slave2.id</span><span class="token attr-value"><span class="token punctuation">=</span>1</span>
<span class="token constant">tcp.slave2.start</span><span class="token attr-value"><span class="token punctuation">=</span>0</span>
<span class="token constant">tcp.slave2.length</span><span class="token attr-value"><span class="token punctuation">=</span>6</span>
<span class="token constant">tcp.slave2.type</span><span class="token attr-value"><span class="token punctuation">=</span>discrete</span>

# Query input registers from 192.168.6.180
<span class="token constant">tcp.slave3.connection</span><span class="token attr-value"><span class="token punctuation">=</span>192.168.6.180:502</span>
<span class="token constant">tcp.slave3.id</span><span class="token attr-value"><span class="token punctuation">=</span>1</span>
<span class="token constant">tcp.slave3.start</span><span class="token attr-value"><span class="token punctuation">=</span>17</span>
<span class="token constant">tcp.slave3.length</span><span class="token attr-value"><span class="token punctuation">=</span>2</span>
<span class="token constant">tcp.slave3.type</span><span class="token attr-value"><span class="token punctuation">=</span>input</span>

# Query holding registers from 192.168.6.181
# Holding registers matching addresses 33 and 34 are read
<span class="token constant">tcp.slave4.connection</span><span class="token attr-value"><span class="token punctuation">=</span>192.168.6.181:502</span>
<span class="token constant">tcp.slave4.id</span><span class="token attr-value"><span class="token punctuation">=</span>1</span>
<span class="token constant">tcp.slave4.start</span><span class="token attr-value"><span class="token punctuation">=</span>33</span>
<span class="token constant">tcp.slave4.length</span><span class="token attr-value"><span class="token punctuation">=</span>2</span>
<span class="token constant">tcp.slave4.type</span><span class="token attr-value"><span class="token punctuation">=</span>holding</span>

# Query 2 input registers from 192.168.6.181. 
# Interpret the two registers as single 32bit floating point number
<span class="token constant">tcp.slave5.connection</span><span class="token attr-value"><span class="token punctuation">=</span>192.168.6.181:502</span>
<span class="token constant">tcp.slave5.id</span><span class="token attr-value"><span class="token punctuation">=</span>1</span>
<span class="token constant">tcp.slave5.start</span><span class="token attr-value"><span class="token punctuation">=</span>10</span>
<span class="token constant">tcp.slave5.length</span><span class="token attr-value"><span class="token punctuation">=</span>2</span>
<span class="token constant">tcp.slave5.type</span><span class="token attr-value"><span class="token punctuation">=</span>input</span>
<span class="token constant">tcp.slave5.valuetype</span><span class="token attr-value"><span class="token punctuation">=</span>float32</span>
</code></pre></div><p>Above we used the same modbus gateway with ip 192.168.6.180 multiple times
on different modbus address ranges and modbus functions.</p> <h2 id="troubleshooting"><a href="#troubleshooting" aria-hidden="true" class="header-anchor">#</a> Troubleshooting</h2> <h3 id="enable-verbose-logging"><a href="#enable-verbose-logging" aria-hidden="true" class="header-anchor">#</a> Enable verbose logging</h3> <p>Enable <code>DEBUG</code> or <code>TRACE</code> (even more verbose) logging for the loggers named:</p> <ul><li><code>net.wimpi.modbus</code></li> <li><code>org.openhab.binding.modbus</code></li></ul> <h2 id="for-developers"><a href="#for-developers" aria-hidden="true" class="header-anchor">#</a> For developers</h2> <h3 id="testing-serial-implementation"><a href="#testing-serial-implementation" aria-hidden="true" class="header-anchor">#</a> Testing serial implementation</h3> <p>You can use test serial slaves without any hardware on linux using these steps:</p> <ol><li>Set-up virtual null modem emulator using <a href="https://github.com/freemed/tty0tty" target="_blank" rel="noopener noreferrer">tty0tty<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>Download <a href="http://www.modbusdriver.com/diagslave.html" target="_blank" rel="noopener noreferrer">diagslave<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and start modbus serial slave up using this command:</li></ol> <div class="language- extra-class"><pre class="language-text"><code>./diagslave -m rtu -a 1 -b 38400 -d 8 -s 1 -p none -4 10 /dev/pts/7
</code></pre></div><ol start="3"><li>Configure openHAB's modbus slave to connect to <code>/dev/pts/8</code>:</li></ol> <div class="language- extra-class"><pre class="language-text"><code>xxx.connection=/dev/pts/8:38400:8:none:1:rtu
</code></pre></div><ol start="4"><li>Modify <code>start.sh</code> or <code>start_debug.sh</code> to include the unconventional port name by adding the following argument to <code>java</code>:</li></ol> <div class="language- extra-class"><pre class="language-text"><code>-Dgnu.io.rxtx.SerialPorts=/dev/pts/8
</code></pre></div><p>Naturally this is not the same thing as the real thing but helps to identify simple issues.</p> <h3 id="testing-tcp-implementation"><a href="#testing-tcp-implementation" aria-hidden="true" class="header-anchor">#</a> Testing TCP implementation</h3> <ol><li>Download <a href="http://www.modbusdriver.com/diagslave.html" target="_blank" rel="noopener noreferrer">diagslave<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and start modbus tcp server (slave) using this command:</li></ol> <div class="language- extra-class"><pre class="language-text"><code>./diagslave -m tcp -a 1 -p 55502
</code></pre></div><ol start="2"><li>Configure openHAB's modbus slave to connect to <code>127.0.0.1:55502</code>:</li></ol> <div class="language- extra-class"><pre class="language-text"><code>tcp.slave1.connection=127.0.0.1:55502
</code></pre></div><h3 id="writing-data"><a href="#writing-data" aria-hidden="true" class="header-anchor">#</a> Writing data</h3> <p>See this <a href="https://community.openhab.org/t/something-is-rounding-my-float-values-in-sitemap/13704/32?u=ssalonen" target="_blank" rel="noopener noreferrer">community post<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> explaining how <code>pollmb</code> and <code>diagslave</code> can be used to debug modbus communication.</p> <h3 id="troubleshooting-2"><a href="#troubleshooting-2" aria-hidden="true" class="header-anchor">#</a> Troubleshooting</h3> <p>To troubleshoot, you might be asked to update to latest development version. You can find the &quot;snapshot&quot; or development version from <a href="https://openhab.ci.cloudbees.com/job/openHAB1-Addons/lastSuccessfulBuild/artifact/bundles/binding/org.openhab.binding.modbus/target/" target="_blank" rel="noopener noreferrer">Cloudbees CI<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>With modbus binding before 1.9.0, it strongly recommended to try out with the latest development version since many bugs were fixed in 1.9.0. Furthermore, error logging is enhanced in this new version.</p> <p>If the problem persists in the new version, it is recommended to try to isolate to issue using minimal configuration. Easiest would be to have a fresh openHAB installation, and configure it minimally (if possible, single modbus slave in <code>modbus.cfg</code>, single item, no rules etc.). This helps the developers and community to debug the issue.</p> <p>Problems can be communicated via <a href="https://community.openhab.org" target="_blank" rel="noopener noreferrer">community.openhab.org<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Please use the search function to find out existing reports of the same issue.</p> <p>It helps greatly to document the issue in detail (especially how to reproduce the issue), and attach the related <a href="#enable-verbose-debug-logging">verbose logs</a>. Try to keep interaction minimal during this test; for example, if the problem occurs with modbus read alone, do not touch the the switch items in openHAB sitemap (would trigger write).</p> <p>For attaching the logs to a community post, the <a href="http://pastebin.com/" target="_blank" rel="noopener noreferrer">pastebin.com<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> service is strongly recommended to keep the thread readable. It is useful to store the logs from openHAB startup, and let it run for a while.</p> <p>Remember to attach configuration lines from modbus.cfg, item definitions related to modbus binding, and any relevant rules (if any). You can use <a href="http://pastebin.com/" target="_blank" rel="noopener noreferrer">pastebin.com<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for this purpose as well.</p> <p>To summarize, here are the recommended steps in case of errors</p> <ol><li>Update to latest development version; especially if you are using modbus binding version before 1.9.0</li> <li>isolate the issue using minimal configuration, and enable verbose logging (see above)</li> <li>record logs and configuration to <a href="http://pastebin.com/" target="_blank" rel="noopener noreferrer">pastebin.com<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</li></ol> <div class="page-versions"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Version: 2.4</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><a href="https://www.openhab.org/addons/bindings/modbus1/">latest</a></li><li class="dropdown-item"><a class="current">2.4</a></li></ul></div></div> <div class="editLink"><em>Caught a mistake or want to contribute to the documentation? <a target="_blank" href="https://github.com/openhab/openhab1-addons/edit/master/bundles/binding/org.openhab.binding.modbus/README.md">Edit this page on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></em> <!----></div></div> <div class="page-edit"><!----> <!----></div> <!----> <footer><div class="social-icons"><a href="https://twitter.com/openhab" target="_blank"><svg class="social-icon twitter"><path d="M32 7.075c-1.175 0.525-2.444 0.875-3.769 1.031 1.356-0.813 2.394-2.1 2.887-3.631-1.269 0.75-2.675 1.3-4.169 1.594-1.2-1.275-2.906-2.069-4.794-2.069-3.625 0-6.563 2.938-6.563 6.563 0 0.512 0.056 1.012 0.169 1.494-5.456-0.275-10.294-2.888-13.531-6.862-0.563 0.969-0.887 2.1-0.887 3.3 0 2.275 1.156 4.287 2.919 5.463-1.075-0.031-2.087-0.331-2.975-0.819 0 0.025 0 0.056 0 0.081 0 3.181 2.263 5.838 5.269 6.437-0.55 0.15-1.131 0.231-1.731 0.231-0.425 0-0.831-0.044-1.237-0.119 0.838 2.606 3.263 4.506 6.131 4.563-2.25 1.762-5.075 2.813-8.156 2.813-0.531 0-1.050-0.031-1.569-0.094 2.913 1.869 6.362 2.95 10.069 2.95 12.075 0 18.681-10.006 18.681-18.681 0-0.287-0.006-0.569-0.019-0.85 1.281-0.919 2.394-2.075 3.275-3.394z"></path></svg></a> <a href="https://github.com/openhab" target="_blank"><svg class="social-icon github"><path d="M10.369 24.837c0 0.125-0.144 0.225-0.325 0.225-0.206 0.019-0.35-0.081-0.35-0.225 0-0.125 0.144-0.225 0.325-0.225 0.188-0.019 0.35 0.081 0.35 0.225zM8.425 24.556c-0.044 0.125 0.081 0.269 0.269 0.306 0.162 0.063 0.35 0 0.387-0.125s-0.081-0.269-0.269-0.325c-0.162-0.044-0.344 0.019-0.387 0.144zM11.188 24.45c-0.181 0.044-0.306 0.163-0.287 0.306 0.019 0.125 0.181 0.206 0.369 0.163 0.181-0.044 0.306-0.163 0.287-0.288-0.019-0.119-0.188-0.2-0.369-0.181zM15.3 0.5c-8.669 0-15.3 6.581-15.3 15.25 0 6.931 4.362 12.863 10.594 14.95 0.8 0.144 1.081-0.35 1.081-0.756 0-0.387-0.019-2.525-0.019-3.837 0 0-4.375 0.938-5.294-1.863 0 0-0.713-1.819-1.737-2.288 0 0-1.431-0.981 0.1-0.962 0 0 1.556 0.125 2.412 1.613 1.369 2.413 3.662 1.719 4.556 1.306 0.144-1 0.55-1.694 1-2.106-3.494-0.387-7.019-0.894-7.019-6.906 0-1.719 0.475-2.581 1.475-3.681-0.162-0.406-0.694-2.081 0.162-4.244 1.306-0.406 4.313 1.688 4.313 1.688 1.25-0.35 2.594-0.531 3.925-0.531s2.675 0.181 3.925 0.531c0 0 3.006-2.1 4.313-1.688 0.856 2.169 0.325 3.838 0.163 4.244 1 1.106 1.613 1.969 1.613 3.681 0 6.031-3.681 6.512-7.175 6.906 0.575 0.494 1.063 1.431 1.063 2.9 0 2.106-0.019 4.712-0.019 5.225 0 0.406 0.288 0.9 1.081 0.756 6.25-2.075 10.488-8.006 10.488-14.938 0-8.669-7.031-15.25-15.7-15.25zM6.075 22.056c-0.081 0.063-0.063 0.206 0.044 0.325 0.1 0.1 0.244 0.144 0.325 0.063 0.081-0.063 0.063-0.206-0.044-0.325-0.1-0.1-0.244-0.144-0.325-0.063zM5.4 21.55c-0.044 0.081 0.019 0.181 0.144 0.244 0.1 0.063 0.225 0.044 0.269-0.044 0.044-0.081-0.019-0.181-0.144-0.244-0.125-0.038-0.225-0.019-0.269 0.044zM7.425 23.775c-0.1 0.081-0.063 0.269 0.081 0.387 0.144 0.144 0.325 0.163 0.406 0.063 0.081-0.081 0.044-0.269-0.081-0.387-0.138-0.144-0.325-0.163-0.406-0.063zM6.713 22.856c-0.1 0.063-0.1 0.225 0 0.369s0.269 0.206 0.35 0.144c0.1-0.081 0.1-0.244 0-0.387-0.088-0.144-0.25-0.206-0.35-0.125z"></path></svg></a> <a href="https://www.youtube.com/channel/UC7OK88DW0La_BJlcXZg8ydQ" target="_blank"><svg class="social-icon youtube"><path d="M31.681 9.6c0 0-0.313-2.206-1.275-3.175-1.219-1.275-2.581-1.281-3.206-1.356-4.475-0.325-11.194-0.325-11.194-0.325h-0.012c0 0-6.719 0-11.194 0.325-0.625 0.075-1.987 0.081-3.206 1.356-0.963 0.969-1.269 3.175-1.269 3.175s-0.319 2.588-0.319 5.181v2.425c0 2.587 0.319 5.181 0.319 5.181s0.313 2.206 1.269 3.175c1.219 1.275 2.819 1.231 3.531 1.369 2.563 0.244 10.881 0.319 10.881 0.319s6.725-0.012 11.2-0.331c0.625-0.075 1.988-0.081 3.206-1.356 0.962-0.969 1.275-3.175 1.275-3.175s0.319-2.587 0.319-5.181v-2.425c-0.006-2.588-0.325-5.181-0.325-5.181zM12.694 20.15v-8.994l8.644 4.513-8.644 4.481z"></path></svg></a></div> <div class="legal"><span class="copyright">Copyright © 2018 by the openHAB Community and the openHAB Foundation e.V.</span> <br> <span class="legal-links"><a href="/v2.4/privacy.html">Privacy policy</a> |
    <a href="/v2.4/imprint.html">Imprint</a></span></div> <img src="/openhab-logo-square.png" class="footer-logo"></footer></div> <!----></div></div>
    <script src="/v2.4/assets/js/206.314e047a.js" defer></script><script src="/v2.4/assets/js/5.97efa724.js" defer></script><script src="/v2.4/assets/js/6.b424a272.js" defer></script><script src="/v2.4/assets/js/7.dad7d623.js" defer></script><script src="/v2.4/assets/js/app.1cb1e7e9.js" defer></script>
  </body>
</html>
